<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0a0a0a">
    <title>PAINEL DE GUERRA | Centro de Comando</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Cinzel:wght@400;500;600&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}html{scroll-behavior:smooth;background:#0a0a0a!important}body{font-family:'Inter',sans-serif;background:#0a0a0a!important;color:#fff;min-height:100vh;padding:20px;padding-bottom:80px}body::before,body::after{content:'';position:fixed;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,#d4af7d,transparent);z-index:9999}body::before{top:0}body::after{bottom:0}
        .sidebar{position:fixed;top:0;left:0;width:60px;height:100vh;background:linear-gradient(180deg,#0f0f0f,#1a1a1a);border-right:1px solid rgba(212,175,125,.15);z-index:1000;display:flex;flex-direction:column;align-items:center;padding:15px 0;transition:width .3s;overflow:hidden}.sidebar:hover{width:200px}.sidebar-logo{width:40px;height:40px;border:1px solid rgba(212,175,125,.3);border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Cinzel',serif;font-size:1.1em;color:#d4af7d;margin-bottom:20px;text-decoration:none}.sidebar-menu{display:flex;flex-direction:column;gap:5px;width:100%;flex:1}.sidebar-menu a{display:flex;align-items:center;gap:12px;padding:12px 10px;color:rgba(255,255,255,.6);text-decoration:none;font-size:.85em;transition:all .3s;border-left:2px solid transparent;white-space:nowrap}.sidebar-menu a:hover,.sidebar-menu a.active{background:rgba(212,175,125,.1);border-left-color:#d4af7d;color:#d4af7d}.sidebar-menu a svg{width:20px;height:20px;min-width:20px;margin-left:10px}.sidebar-menu a span{opacity:0;transition:opacity .3s}.sidebar:hover .sidebar-menu a span{opacity:1}.sidebar-divider{height:1px;background:rgba(212,175,125,.2);margin:8px 10px;width:calc(100% - 20px)}.sidebar-footer{padding:15px 10px;text-align:center;border-top:1px solid rgba(212,175,125,.2);width:100%}.sidebar-footer p{color:rgba(255,255,255,.6);font-size:.7em;opacity:0;transition:opacity .3s}.sidebar-footer .instituto{font-size:.85em;color:#d4af7d;display:block;font-family:'Cinzel',serif}.sidebar:hover .sidebar-footer p{opacity:1}
        .mobile-nav{display:none;position:fixed;bottom:0;left:0;right:0;background:linear-gradient(180deg,#1a1a1a,#0f0f0f);border-top:1px solid rgba(212,175,125,.15);padding:10px 0;z-index:1000}.mobile-nav-items{display:flex;justify-content:space-around}.mobile-nav-item{display:flex;flex-direction:column;align-items:center;gap:4px;color:rgba(255,255,255,.5);text-decoration:none;font-size:.65em}.mobile-nav-item svg{width:22px;height:22px}.mobile-nav-item.active{color:#d4af7d}
        @media(max-width:768px){body{padding:10px;padding-bottom:80px}.sidebar{display:none}.mobile-nav{display:block}.main-container{margin-left:0!important}}@media(min-width:769px){body{padding-left:80px}.mobile-nav{display:none!important}}
        .main-container{max-width:1200px;margin:0 auto}
        .identity-card{background:linear-gradient(135deg,#141414,#1a1a1a);border:1px solid rgba(212,175,125,.3);border-radius:16px;padding:30px 40px;margin-bottom:25px;text-align:center;position:relative;overflow:hidden}.identity-card::before,.identity-card::after{content:'';position:absolute;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,#d4af7d,transparent)}.identity-card::before{top:0}.identity-card::after{bottom:0}.identity-text{font-family:'Playfair Display',serif;font-size:1.3em;font-style:italic;color:rgba(255,255,255,.9);line-height:1.8}.identity-text span{display:block;margin-top:8px}
        .container{background:#141414;border:1px solid rgba(212,175,125,.15);border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.5);overflow:hidden;margin-bottom:25px}
        .header{background:linear-gradient(135deg,#1a1a1a,#0f0f0f);border-bottom:1px solid rgba(212,175,125,.2);padding:30px;text-align:center;position:relative}.header h1{font-family:'Cinzel',serif;font-size:2em;margin-bottom:10px;letter-spacing:4px;color:#d4af7d;text-transform:uppercase}.header p{font-size:.85em;color:rgba(255,255,255,.5);letter-spacing:2px;text-transform:uppercase}.header-date{position:absolute;top:15px;right:20px;font-size:.75em;color:rgba(212,175,125,.6)}
        .tabs-container{background:#141414;padding:15px 20px;border-bottom:1px solid rgba(212,175,125,.15)}.tabs-header{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}.tab-btn{display:flex;align-items:center;gap:8px;padding:12px 20px;background:transparent;border:1px solid rgba(212,175,125,.2);color:rgba(255,255,255,.5);font-size:.85em;cursor:pointer;border-radius:8px;transition:all .3s;font-family:'Inter',sans-serif}.tab-btn:hover,.tab-btn.active{color:#d4af7d;border-color:#d4af7d;background:rgba(212,175,125,.1)}.tab-btn svg{width:18px;height:18px}.tab-content{display:none;padding:25px}.tab-content.active{display:block}
        .provocation-card{background:linear-gradient(135deg,#1a0a0a,#0f0505);border:1px solid rgba(180,50,50,.3);border-radius:16px;padding:30px;margin-bottom:25px;text-align:center;position:relative;overflow:hidden}.provocation-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,#d4af7d,transparent)}.provocation-icon{width:50px;height:50px;margin:0 auto 20px;background:rgba(212,175,125,.2);border-radius:50%;display:flex;align-items:center;justify-content:center}.provocation-icon svg{width:26px;height:26px;stroke:#b34040}.provocation-text{font-family:'Cinzel',serif;font-size:1.5em;color:#b34040;letter-spacing:1px;line-height:1.4;margin-bottom:20px;cursor:pointer;transition:color .3s}.provocation-text:hover{color:#d45050}.provocation-subtext{font-size:.8em;color:rgba(255,255,255,.4);margin-bottom:25px}.provocation-actions{display:flex;gap:15px;justify-content:center;flex-wrap:wrap}
        .btn-blood{padding:14px 28px;background:linear-gradient(135deg,#d4af7d,#5c0000);border:1px solid rgba(180,50,50,.4);border-radius:8px;color:#fff;font-size:.9em;font-weight:600;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:10px}.btn-blood:hover{transform:translateY(-2px);box-shadow:0 5px 25px rgba(212,175,125,.4)}.btn-blood svg{width:18px;height:18px}
        .btn-gold{padding:14px 28px;background:linear-gradient(135deg,#d4af7d,#c9a066);border:none;border-radius:8px;color:#0a0a0a;font-size:.9em;font-weight:600;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:10px}.btn-gold:hover{transform:translateY(-2px);box-shadow:0 5px 25px rgba(212,175,125,.4)}.btn-gold svg{width:18px;height:18px}
        .status-section-title{font-family:'Cinzel',serif;font-size:1.1em;color:#d4af7d;letter-spacing:2px;text-transform:uppercase;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid rgba(212,175,125,.2)}
        .status-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}
        .status-card{background:linear-gradient(135deg,#1a1a1a,#151515);border:1px solid rgba(212,175,125,.15);border-radius:12px;padding:20px;position:relative;overflow:hidden}.status-card::before{content:'';position:absolute;top:0;left:0;width:3px;height:100%;background:linear-gradient(180deg,#d4af7d,rgba(212,175,125,.3))}.status-card-header{display:flex;align-items:center;gap:12px;margin-bottom:15px}.status-card-icon{width:40px;height:40px;background:rgba(212,175,125,.1);border-radius:10px;display:flex;align-items:center;justify-content:center}.status-card-icon svg{width:22px;height:22px;stroke:#d4af7d}.status-card-title{font-size:.75em;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.5)}
        .status-phrase{font-family:'Playfair Display',serif;font-size:.85em;font-style:italic;color:rgba(255,255,255,.5);padding:10px 0;border-top:1px solid rgba(255,255,255,.05);margin-top:10px}.status-phrase.warning{color:#e74c3c}.status-phrase.caution{color:#f39c12}.status-phrase.positive{color:#2ecc71}
        .status-select{background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.2);border-radius:6px;padding:10px 12px;color:#fff;font-size:.9em;width:100%;cursor:pointer;outline:none}.status-select:focus{border-color:#d4af7d}.status-select option{background:#1a1a1a;color:#fff}
        .discipline-input{display:flex;align-items:center;gap:10px}.discipline-input input[type="range"]{flex:1;-webkit-appearance:none;height:6px;background:rgba(255,255,255,.1);border-radius:3px;outline:none}.discipline-input input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;background:#d4af7d;border-radius:50%;cursor:pointer}.discipline-input span{font-family:'Cinzel',serif;font-size:1.2em;color:#d4af7d;min-width:50px;text-align:right}
        .progress-bar{height:6px;background:rgba(255,255,255,.1);border-radius:3px;overflow:hidden}.progress-fill{height:100%;background:linear-gradient(90deg,#d4af7d,#c9a066);border-radius:3px;transition:width .5s}
        .history-section{margin-top:30px;padding-top:25px;border-top:1px solid rgba(212,175,125,.15)}.history-title{font-family:'Cinzel',serif;font-size:1em;color:#d4af7d;letter-spacing:2px;text-transform:uppercase;margin-bottom:20px;display:flex;align-items:center;gap:10px}.history-title svg{width:20px;height:20px;stroke:#d4af7d}.history-list{display:flex;flex-direction:column;gap:12px}.history-item{background:linear-gradient(135deg,#1a1a1a,#151515);border:1px solid rgba(212,175,125,.1);border-radius:12px;padding:18px 20px;display:grid;grid-template-columns:100px 1fr 1fr 150px auto;gap:20px;align-items:center;transition:all .3s}.history-item:hover{border-color:rgba(212,175,125,.25)}.history-date{font-family:'Cinzel',serif;font-size:.9em;color:#d4af7d}.history-date small{display:block;font-family:'Inter',sans-serif;font-size:.75em;color:rgba(255,255,255,.4);margin-top:3px}.history-cut,.history-victory{display:flex;flex-direction:column;gap:4px}.history-cut-label,.history-victory-label{font-size:.65em;text-transform:uppercase;letter-spacing:.5px;color:rgba(255,255,255,.4)}.history-cut-value{color:#b34040;font-size:.9em}.history-victory-value{color:#2ecc71;font-size:.9em}.history-law{display:flex;align-items:center;gap:8px}.history-law-number{width:28px;height:28px;background:rgba(212,175,125,.15);border-radius:6px;display:flex;align-items:center;justify-content:center;font-family:'Cinzel',serif;font-size:.8em;color:#d4af7d}.history-law-title{font-size:.8em;color:rgba(255,255,255,.7);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.history-actions{display:flex;gap:8px;justify-content:flex-end}.history-empty{text-align:center;padding:40px 20px;color:rgba(255,255,255,.3);font-style:italic}
        @media(max-width:900px){.history-item{grid-template-columns:1fr;gap:12px}.history-date{border-bottom:1px solid rgba(255,255,255,.05);padding-bottom:10px}.history-actions{justify-content:flex-start}}
        .missions-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.mission-card{background:linear-gradient(135deg,#1a1a1a,#151515);border:1px solid rgba(212,175,125,.15);border-radius:16px;overflow:hidden;transition:all .3s}.mission-card:hover{border-color:rgba(212,175,125,.3);transform:translateY(-2px)}.mission-card-header{padding:20px;display:flex;justify-content:space-between;align-items:flex-start}.mission-card-header.corpo{background:linear-gradient(135deg,rgba(231,76,60,.3),rgba(192,57,43,.2))}.mission-card-header.mente{background:linear-gradient(135deg,rgba(52,152,219,.3),rgba(41,128,185,.2))}.mission-card-header.espirito{background:linear-gradient(135deg,rgba(155,89,182,.3),rgba(142,68,173,.2))}.mission-info{flex:1}.mission-type{font-size:.7em;text-transform:uppercase;letter-spacing:2px;color:rgba(255,255,255,.6);margin-bottom:8px}.mission-title{font-family:'Playfair Display',serif;font-size:1.3em;color:#fff}.mission-icon{width:50px;height:50px;background:rgba(255,255,255,.1);border-radius:12px;display:flex;align-items:center;justify-content:center}.mission-icon svg{width:26px;height:26px;stroke:#fff}.mission-card-body{padding:20px}.mission-description{color:rgba(255,255,255,.7);font-size:.9em;line-height:1.6;margin-bottom:20px}.weekly-checks{display:flex;gap:8px;flex-wrap:wrap}.day-check{display:flex;flex-direction:column;align-items:center;gap:6px}.day-check label{font-size:.7em;color:rgba(255,255,255,.5);text-transform:uppercase}.day-check input[type="checkbox"]{appearance:none;-webkit-appearance:none;width:32px;height:32px;border:2px solid rgba(212,175,125,.3);border-radius:8px;cursor:pointer;position:relative;background:transparent;transition:all .3s}.day-check input[type="checkbox"]:checked{background:linear-gradient(135deg,#d4af7d,#c9a066);border-color:#d4af7d}.day-check input[type="checkbox"]:checked::after{content:'';position:absolute;width:8px;height:14px;border:solid #0a0a0a;border-width:0 3px 3px 0;top:50%;left:50%;transform:translate(-50%,-60%) rotate(45deg)}.mission-card-footer{padding:15px 20px;background:rgba(0,0,0,.2);border-top:1px solid rgba(212,175,125,.1);display:flex;justify-content:flex-end;gap:10px}
        .rituals-section{margin-bottom:30px}.rituals-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.rituals-title{font-family:'Cinzel',serif;font-size:1.1em;color:#d4af7d;letter-spacing:1px}.rituals-list{display:flex;flex-direction:column;gap:12px}.ritual-item{display:flex;align-items:center;gap:15px;padding:15px 20px;background:linear-gradient(135deg,#1a1a1a,#151515);border:1px solid rgba(212,175,125,.1);border-radius:12px;transition:all .3s}.ritual-item:hover{border-color:rgba(212,175,125,.25)}.ritual-item.completed{opacity:.6}.ritual-item.completed .ritual-name{text-decoration:line-through;color:rgba(255,255,255,.4)}.ritual-check{appearance:none;-webkit-appearance:none;width:28px;height:28px;border:2px solid rgba(46,204,113,.5);border-radius:50%;cursor:pointer;position:relative;background:transparent;transition:all .3s;flex-shrink:0}.ritual-check:checked{background:#2ecc71;border-color:#2ecc71}.ritual-check:checked::after{content:'';position:absolute;width:6px;height:12px;border:solid #0a0a0a;border-width:0 2px 2px 0;top:50%;left:50%;transform:translate(-50%,-60%) rotate(45deg)}.ritual-icon{width:36px;height:36px;background:rgba(212,175,125,.1);border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.ritual-icon svg{width:18px;height:18px;stroke:#d4af7d}.ritual-info{flex:1}.ritual-name{color:#fff;font-size:.95em}.ritual-time{color:rgba(255,255,255,.4);font-size:.8em;margin-top:3px}.ritual-actions{display:flex;gap:8px}
        .law-week-card{background:linear-gradient(135deg,#1a1a1a,#0f0f0f);border:2px solid rgba(212,175,125,.3);border-radius:16px;padding:30px;margin-bottom:25px;position:relative;overflow:hidden}.law-week-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,transparent,#d4af7d,transparent)}.law-week-badge{display:inline-block;background:rgba(212,175,125,.2);color:#d4af7d;padding:6px 14px;border-radius:20px;font-size:.75em;text-transform:uppercase;letter-spacing:1px;margin-bottom:15px}.law-week-number{font-family:'Cinzel',serif;font-size:1em;color:rgba(212,175,125,.6);margin-bottom:8px}.law-week-title{font-family:'Playfair Display',serif;font-size:1.8em;color:#fff;margin-bottom:15px;line-height:1.3}.law-week-description{color:rgba(255,255,255,.7);font-size:.95em;line-height:1.7;margin-bottom:20px}.law-week-actions{display:flex;gap:15px;flex-wrap:wrap}
        .laws-filter{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap}.filter-btn{padding:10px 18px;background:transparent;border:1px solid rgba(212,175,125,.2);border-radius:6px;color:rgba(255,255,255,.5);font-size:.85em;cursor:pointer;transition:all .3s}.filter-btn:hover,.filter-btn.active{border-color:#d4af7d;color:#d4af7d;background:rgba(212,175,125,.1)}
        .laws-list{display:flex;flex-direction:column;gap:10px}.law-item{background:linear-gradient(135deg,#1a1a1a,#151515);border:1px solid rgba(212,175,125,.1);border-radius:12px;overflow:hidden;transition:all .3s}.law-item:hover{border-color:rgba(212,175,125,.25)}.law-item.applied{border-left:3px solid #2ecc71}.law-item.favorite{border-left:3px solid #d4af7d}.law-item-header{padding:18px 20px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;user-select:none}.law-item-header:hover{background:rgba(212,175,125,.05)}.law-item-info{display:flex;align-items:center;gap:15px;flex:1}.law-number{font-family:'Cinzel',serif;font-size:1.1em;color:#d4af7d;min-width:35px}.law-title{color:#fff;font-size:.95em;flex:1}.law-item-actions{display:flex;gap:8px;align-items:center}.law-status-badge{font-size:.7em;padding:4px 10px;border-radius:12px;text-transform:uppercase;letter-spacing:.5px}.law-status-badge.applied{background:rgba(46,204,113,.2);color:#2ecc71}.law-status-badge.pending{background:rgba(255,255,255,.1);color:rgba(255,255,255,.5)}.law-item-body{display:none;padding:0 20px 20px;border-top:1px solid rgba(212,175,125,.1)}.law-item-body.active{display:block;padding-top:20px}.law-description{color:rgba(255,255,255,.7);font-size:.9em;line-height:1.7;margin-bottom:20px}.law-notes{margin-bottom:20px}.law-notes label{display:block;font-size:.75em;color:rgba(255,255,255,.5);text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px}.law-notes textarea{width:100%;min-height:100px;padding:15px;background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.2);border-radius:8px;color:#fff;font-size:.9em;font-family:inherit;resize:vertical;outline:none}.law-notes textarea:focus{border-color:#d4af7d}.law-notes textarea::placeholder{color:rgba(255,255,255,.3)}.law-actions{display:flex;gap:10px;flex-wrap:wrap}
        .btn-primary{padding:12px 25px;background:linear-gradient(135deg,#d4af7d,#c9a066);border:none;border-radius:8px;color:#0a0a0a;font-size:.9em;font-weight:600;cursor:pointer;transition:all .3s}.btn-primary:hover{transform:translateY(-2px);box-shadow:0 5px 20px rgba(212,175,125,.3)}.btn-secondary{padding:12px 25px;background:transparent;border:1px solid rgba(212,175,125,.3);border-radius:8px;color:#d4af7d;font-size:.9em;cursor:pointer;transition:all .3s}.btn-secondary:hover{background:rgba(212,175,125,.1)}.btn-icon{background:transparent;border:none;color:rgba(255,255,255,.4);cursor:pointer;padding:8px;border-radius:6px;transition:all .3s;display:flex;align-items:center;justify-content:center}.btn-icon:hover{color:#d4af7d;background:rgba(212,175,125,.1)}.btn-icon.favorite.active{color:#d4af7d}.btn-icon.delete:hover{color:#e74c3c;background:rgba(231,76,60,.1)}.btn-icon svg{width:18px;height:18px}.btn-success{padding:10px 20px;background:rgba(46,204,113,.2);border:1px solid rgba(46,204,113,.4);border-radius:6px;color:#2ecc71;font-size:.85em;cursor:pointer;transition:all .3s}.btn-success:hover{background:rgba(46,204,113,.3)}
        .modal-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.9);z-index:2000;justify-content:center;align-items:center;padding:20px}.modal-overlay.active{display:flex}.modal-content{background:#1a1a1a;border:1px solid rgba(212,175,125,.2);border-radius:16px;padding:30px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px}.modal-title{font-family:'Playfair Display',serif;font-size:1.3em;color:#d4af7d}.modal-close{background:transparent;border:none;color:rgba(255,255,255,.5);font-size:1.5em;cursor:pointer;padding:5px;line-height:1}.modal-close:hover{color:#fff}.form-group{margin-bottom:20px}.form-group label{display:block;font-size:.75em;color:rgba(255,255,255,.5);text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px}.form-group input,.form-group select,.form-group textarea{width:100%;padding:12px 15px;background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.2);border-radius:8px;color:#fff;font-size:.95em;outline:none;font-family:inherit}.form-group input:focus,.form-group select:focus,.form-group textarea:focus{border-color:#d4af7d}.form-group input::placeholder,.form-group textarea::placeholder{color:rgba(255,255,255,.3)}.form-group select option{background:#1a1a1a;color:#fff}.modal-buttons{display:flex;gap:10px;justify-content:flex-end;margin-top:25px}
        .footer-actions{background:linear-gradient(135deg,#1a1a1a,#0f0f0f);border-top:1px solid rgba(212,175,125,.2);padding:20px 25px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.reset-info{font-size:.8em;color:rgba(255,255,255,.4)}.reset-info svg{width:14px;height:14px;vertical-align:middle;margin-right:5px}
        .toast{position:fixed;bottom:100px;right:20px;padding:15px 25px;background:#1a1a1a;border:1px solid rgba(212,175,125,.3);border-radius:10px;color:#fff;font-size:.9em;z-index:10001;opacity:0;transform:translateY(20px);transition:all .3s}.toast.active{opacity:1;transform:translateY(0)}.toast.success{border-color:#2ecc71}.toast.error{border-color:#e74c3c}
        ::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:#0a0a0a}::-webkit-scrollbar-thumb{background:rgba(212,175,125,.3);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:rgba(212,175,125,.5)}
        @media(max-width:768px){.header h1{font-size:1.4em;letter-spacing:2px}.identity-card{padding:20px}.identity-text{font-size:1.1em}.provocation-text{font-size:1.2em}.provocation-actions{flex-direction:column}.provocation-actions button{width:100%;justify-content:center}.status-grid{grid-template-columns:1fr 1fr;gap:12px}.status-card{padding:15px}.missions-grid{grid-template-columns:1fr}.tabs-header{gap:5px}.tab-btn{padding:10px 12px;font-size:.75em;flex:1;justify-content:center}.tab-btn span{display:none}.law-week-title{font-size:1.4em}.law-week-actions{flex-direction:column}.law-week-actions button{width:100%}.footer-actions{flex-direction:column;text-align:center}}
        @media(max-width:480px){.status-grid{grid-template-columns:1fr}.weekly-checks{justify-content:space-between}.day-check input[type="checkbox"]{width:28px;height:28px}}
        /* TOJI STYLES */
        .toji-header{text-align:center;padding:30px 20px;border-bottom:1px solid rgba(212,175,125,.2);margin-bottom:25px}
        .toji-title{font-family:"Cinzel",serif;font-size:2.5em;color:#d4af7d;letter-spacing:8px;text-transform:uppercase;margin-bottom:5px}
        .toji-subtitle{font-family:"Cinzel",serif;font-size:1em;color:rgba(212,175,125,.7);letter-spacing:3px;margin-bottom:15px}
        .toji-frase{font-style:italic;color:rgba(255,255,255,.5);font-size:1em;margin-bottom:25px}
        .essencia-container{display:flex;flex-direction:column;align-items:center;gap:10px}
        .essencia-label{font-family:"Cinzel",serif;font-size:.8em;color:rgba(212,175,125,.7);letter-spacing:2px}
        .radial-progress{position:relative;display:flex;align-items:center;justify-content:center}
        .radial-value{position:absolute;font-family:"Cinzel",serif;font-size:1.8em;color:#d4af7d}
        .toji-section{margin-bottom:30px}
        .toji-section-title{font-family:"Cinzel",serif;font-size:1em;color:#d4af7d;letter-spacing:2px;text-transform:uppercase;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid rgba(212,175,125,.2);display:flex;align-items:center;gap:10px}
        .tracos-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:15px}
        .traco-item{background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.15);border-radius:8px;padding:18px}
        .traco-header{display:flex;align-items:center;gap:10px;margin-bottom:10px}
        .traco-header svg{width:18px;height:18px;color:#d4af7d}
        .traco-header h4{font-family:"Cinzel",serif;font-size:.95em;color:#d4af7d}
        .traco-desc{font-size:.8em;color:rgba(255,255,255,.5);margin-bottom:12px;line-height:1.4}
        .traco-bar{height:6px;background:rgba(212,175,125,.2);border-radius:3px;overflow:hidden;margin-bottom:10px}
        .traco-fill{height:100%;background:linear-gradient(90deg,#d4af7d,#d4af7d);border-radius:3px;transition:width .3s}
        .traco-controls{display:flex;justify-content:space-between;align-items:center}
        .traco-percent{font-family:"Cinzel",serif;color:#d4af7d}
        .traco-btns{display:flex;gap:6px}
        .traco-btn{width:28px;height:28px;border:1px solid rgba(212,175,125,.4);background:rgba(212,175,125,.1);color:#d4af7d;border-radius:4px;cursor:pointer;font-weight:bold;transition:all .3s}
        .traco-btn:hover{background:#d4af7d;color:#fff}
        .bloco-toji{border:1px solid rgba(212,175,125,.2);border-radius:8px;margin-bottom:12px;overflow:hidden}
        .bloco-header-toji{background:rgba(212,175,125,.1);padding:15px 20px;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
        .bloco-header-toji:hover{background:rgba(212,175,125,.15)}
        .bloco-info{display:flex;align-items:center;gap:12px}
        .bloco-num{width:36px;height:36px;background:rgba(212,175,125,.2);border:1px solid #d4af7d;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:"Cinzel",serif;color:#d4af7d}
        .bloco-nome{font-family:"Cinzel",serif;color:#d4af7d;letter-spacing:1px}
        .bloco-dias{font-size:.75em;color:rgba(255,255,255,.4)}
        .bloco-status-toji{display:flex;align-items:center;gap:10px}
        .bloco-check-toji{width:22px;height:22px;border:2px solid rgba(212,175,125,.4);border-radius:50%;display:flex;align-items:center;justify-content:center}
        .bloco-check-toji.done{background:#d4af7d;border-color:#d4af7d}
        .bloco-check-toji svg{width:12px;height:12px;color:#fff;opacity:0}
        .bloco-check-toji.done svg{opacity:1}
        .bloco-toggle{color:rgba(255,255,255,.4);transition:transform .3s}
        .bloco-toji.open .bloco-toggle{transform:rotate(180deg)}
        .bloco-content-toji{display:none;padding:20px;background:rgba(0,0,0,.2)}
        .bloco-toji.open .bloco-content-toji{display:block}
        .bloco-frase-toji{font-style:italic;color:rgba(212,175,125,.6);margin-bottom:15px;padding-left:12px;border-left:2px solid #d4af7d}
        .meta-item-toji{display:flex;align-items:center;gap:10px;padding:8px 0;border-bottom:1px solid rgba(212,175,125,.1)}
        .meta-check-toji{width:18px;height:18px;border:2px solid rgba(212,175,125,.4);border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center}
        .meta-check-toji.checked{background:#d4af7d;border-color:#d4af7d}
        .meta-check-toji svg{width:12px;height:12px;color:#fff;opacity:0}
        .meta-check-toji.checked svg{opacity:1}
        .prova-final-toji{background:rgba(212,175,125,.1);border:1px solid rgba(212,175,125,.3);border-radius:6px;padding:15px;margin-top:15px}
        .prova-final-toji h5{font-family:"Cinzel",serif;color:#d4af7d;margin-bottom:8px}
        .prova-final-toji p{color:rgba(255,255,255,.6);font-size:.9em;margin-bottom:12px}
        .prova-btn-toji{background:transparent;border:1px solid #d4af7d;color:#d4af7d;padding:8px 20px;border-radius:4px;cursor:pointer;font-family:"Cinzel",serif;transition:all .3s}
        .prova-btn-toji:hover,.prova-btn-toji.done{background:#d4af7d;color:#fff}
        .ritual-item-toji{display:flex;align-items:center;gap:12px;padding:12px 15px;background:rgba(0,0,0,.2);border:1px solid rgba(212,175,125,.1);border-radius:6px;margin-bottom:8px}
        .ritual-check-toji{width:22px;height:22px;border:2px solid rgba(212,175,125,.4);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center}
        .ritual-check-toji.checked{background:#d4af7d;border-color:#d4af7d}
        .ritual-check-toji svg{width:12px;height:12px;color:#fff;opacity:0}
        .ritual-check-toji.checked svg{opacity:1}
        .ritual-text-toji{flex:1;color:rgba(255,255,255,.7)}
        .ritual-progress-toji{text-align:center;margin-top:15px;padding-top:15px;border-top:1px solid rgba(212,175,125,.2);font-family:"Cinzel",serif;color:#d4af7d}
        .corte-input-toji{display:flex;gap:10px;margin-bottom:20px}
        .corte-input-toji input{flex:1;background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.2);border-radius:4px;padding:12px;color:#e0e0e0}
        .corte-input-toji input::placeholder{color:rgba(255,255,255,.3)}
        .btn-corte{background:#d4af7d;border:none;color:#fff;padding:12px 20px;border-radius:4px;cursor:pointer;font-family:"Cinzel",serif;transition:all .3s}
        .btn-corte:hover{background:#a00000}
        .corte-item-toji{display:flex;align-items:center;gap:12px;padding:12px 15px;background:rgba(212,175,125,.05);border-left:3px solid #d4af7d;border-radius:0 6px 6px 0;margin-bottom:8px}
        .corte-icon-toji svg{width:18px;height:18px;color:#d4af7d}
        .corte-text-toji{color:rgba(255,255,255,.7);flex:1}
        .corte-data-toji{font-size:.75em;color:rgba(255,255,255,.4)}
        .selo-predador{display:none;text-align:center;padding:30px;background:linear-gradient(135deg,rgba(212,175,125,.2),rgba(212,175,125,.1));border:2px solid #d4af7d;border-radius:8px;margin-top:25px}
        .selo-predador.visivel{display:block}
        .selo-predador svg{width:60px;height:60px;color:#d4af7d;margin-bottom:15px}
        .selo-predador h2{font-family:"Cinzel",serif;font-size:1.8em;color:#d4af7d;letter-spacing:4px;margin-bottom:8px}
        .selo-predador p{color:rgba(255,255,255,.6)}
        .fase-progress-container{background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.2);border-radius:6px;padding:12px 15px;margin-bottom:15px}
        .fase-progress-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
        .fase-progress-label{font-family:"Cinzel",serif;font-size:.85em;color:#d4af7d;letter-spacing:1px}
        .fase-progress-count{font-family:"Cinzel",serif;font-size:.9em;color:rgba(255,255,255,.7)}
        .fase-progress-bar{height:10px;background:rgba(212,175,125,.15);border-radius:5px;overflow:hidden;position:relative}
        .fase-progress-fill{height:100%;background:linear-gradient(90deg,#d4af7d,#c9a066);border-radius:5px;transition:width .5s ease}
        .fase-progress-percent{text-align:right;font-size:.75em;color:rgba(212,175,125,.7);margin-top:5px}
    </style>
</head>
<body>
    <nav class="sidebar">
        <a href="index.html" class="sidebar-logo">Z</a>
        <div class="sidebar-menu">
            <a href="index.html"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg><span>Inicio</span></a>
            <a href="saude.html"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg><span>Saude</span></a>
            <a href="financeiro.html"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg><span>Financeiro</span></a>
            <a href="profissional.html"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg><span>Profissional</span></a>
            <div class="sidebar-divider"></div>
            <a href="comando.html" class="active"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg><span>Comando</span></a>
        </div>
        <div class="sidebar-footer"><p><span class="instituto">ZARA</span>Private Access</p></div>
    </nav>
    <nav class="mobile-nav">
        <div class="mobile-nav-items">
            <a href="index.html" class="mobile-nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>Inicio</a>
            <a href="saude.html" class="mobile-nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>Saude</a>
            <a href="financeiro.html" class="mobile-nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>Financeiro</a>
            <a href="profissional.html" class="mobile-nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>Prof.</a>
            <a href="comando.html" class="mobile-nav-item active"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>Comando</a>
        </div>
    </nav>
    <div class="main-container">
        <div class="identity-card">
            <p class="identity-text">"Eu sou perigoso porque domino minha mente.<span>Eu sou livre porque ninguém me controla."</span></p>
        </div>
        <div class="container">
            <div class="header">
                <span class="header-date" id="currentDate"></span>
                <h1>Painel de Guerra</h1>
                <p>Centro de Comando • Evolução Estratégica</p>
            </div>
            <div class="tabs-container">
                <div class="tabs-header">
                    <button class="tab-btn active" onclick="switchTab('status')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg><span>Status de Guerra</span></button>
                    <button class="tab-btn" onclick="switchTab('missions')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg><span>Missões</span></button>
                    <button class="tab-btn" onclick="switchTab('rituals')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg><span>Rituais</span></button>
                    <button class="tab-btn" onclick="switchTab('laws')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg><span>Leis do Poder</span></button>
                    <button class="tab-btn" onclick="switchTab('toji')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14.5 17.5L3 6V3h3l11.5 11.5M13 19l6-6M16 16l4 4M19 19l2 2"/></svg><span>TOJI</span></button>
                </div>
            </div>
            <div class="tab-content active" id="tab-status">
                <div class="provocation-card">
                    <div class="provocation-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg></div>
                    <p class="provocation-text" id="dailyProvocation" onclick="setRandomProvocation()">"Você já matou o fraco hoje?"</p>
                    <p class="provocation-subtext">Clique para sortear outra provocação</p>
                    <div class="provocation-actions">
                        <button class="btn-blood" onclick="openCutModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>Registrar Corte do Dia</button>
                        <button class="btn-gold" onclick="openVictoryModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>Relatar Vitória do Dia</button>
                    </div>
                </div>
                <h3 class="status-section-title">Indicadores de Combate</h3>
                <div class="status-grid">
                    <div class="status-card">
                        <div class="status-card-header"><div class="status-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg></div><span class="status-card-title">Disciplina</span></div>
                        <div class="discipline-input"><input type="range" id="disciplineRange" min="0" max="100" value="75" oninput="updateDiscipline(this.value)"><span id="disciplineValue">75%</span></div>
                        <div class="progress-bar" style="margin-top:10px"><div class="progress-fill" id="disciplineBar" style="width:75%"></div></div>
                        <p class="status-phrase" id="disciplinePhrase">Mantenha a guarda erguida.</p>
                    </div>
                    <div class="status-card">
                        <div class="status-card-header"><div class="status-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg></div><span class="status-card-title">Foco</span></div>
                        <select class="status-select" id="focusSelect" onchange="updateFocus(this.value)"><option value="fraco">Fraco</option><option value="moderado" selected>Moderado</option><option value="afiado">Afiado</option></select>
                        <p class="status-phrase caution" id="focusPhrase">Você ainda se distrai com lixo.</p>
                    </div>
                    <div class="status-card">
                        <div class="status-card-header"><div class="status-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2c1 3 2.5 3.5 3.5 4.5A5 5 0 0 1 17 10c0 3.5-2.5 6-5 8-2.5-2-5-4.5-5-8a5 5 0 0 1 1.5-3.5C9.5 5.5 11 5 12 2z"/></svg></div><span class="status-card-title">Espírito</span></div>
                        <select class="status-select" id="spiritSelect" onchange="updateSpirit(this.value)"><option value="seco">Seco</option><option value="vivo" selected>Vivo</option><option value="blindado">Blindado</option></select>
                        <p class="status-phrase positive" id="spiritPhrase">Continue regando o fogo.</p>
                    </div>
                    <div class="status-card">
                        <div class="status-card-header"><div class="status-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 8v4M12 16h.01"/></svg></div><span class="status-card-title">Perigo</span></div>
                        <select class="status-select" id="dangerSelect" onchange="updateDanger(this.value)"><option value="baixo">Baixo</option><option value="medio" selected>Médio</option><option value="alto">Alto</option></select>
                        <p class="status-phrase caution" id="dangerPhrase">Você ainda é previsível.</p>
                    </div>
                </div>
                <div class="history-section">
                    <h3 class="history-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>Registro de Guerra — Últimos 7 Dias</h3>
                    <div class="history-list" id="historyList"></div>
                </div>
            </div>
            <div class="tab-content" id="tab-missions"><div class="missions-grid" id="missionsList"></div><div style="text-align:center;margin-top:25px"><button class="btn-secondary" onclick="openMissionModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px;vertical-align:middle;margin-right:8px"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>Nova Missão</button></div></div>
            <div class="tab-content" id="tab-rituals">
                <div class="rituals-section"><div class="rituals-header"><h3 class="rituals-title">Rituais Diários</h3><button class="btn-icon" onclick="openRitualModal('diario')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg></button></div><div class="rituals-list" id="dailyRitualsList"></div></div>
                <div class="rituals-section"><div class="rituals-header"><h3 class="rituals-title">Rituais Semanais</h3><button class="btn-icon" onclick="openRitualModal('semanal')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg></button></div><div class="rituals-list" id="weeklyRitualsList"></div></div>
            </div>
            <div class="tab-content" id="tab-laws"><div class="law-week-card" id="lawWeekCard"></div><div class="laws-filter"><button class="filter-btn active" onclick="filterLaws('todas')">Todas</button><button class="filter-btn" onclick="filterLaws('aplicadas')">Aplicadas</button><button class="filter-btn" onclick="filterLaws('pendentes')">Pendentes</button><button class="filter-btn" onclick="filterLaws('favoritas')">Favoritas</button></div><div class="laws-list" id="lawsList"></div></div>
            <!-- ABA TOJI -->
            <div class="tab-content" id="tab-toji">
                <div class="toji-header">
                    <h2 class="toji-title">TOJI</h2>
                    <p class="toji-subtitle">Caminho do Predador Silencioso</p>
                    <p class="toji-frase">"Força é tudo. Emoção é ruído."</p>
                    <div class="essencia-container">
                        <span class="essencia-label">ESSÊNCIA TOJI</span>
                        <div class="radial-progress">
                            <svg viewBox="0 0 150 150" width="120" height="120">
                                <defs><linearGradient id="tojiGrad" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#c9a066"/><stop offset="100%" style="stop-color:#c9a066"/></linearGradient></defs>
                                <circle cx="75" cy="75" r="60" fill="none" stroke="rgba(212,175,125,0.2)" stroke-width="8"/>
                                <circle id="essenciaCircle" cx="75" cy="75" r="60" fill="none" stroke="url(#tojiGrad)" stroke-width="8" stroke-linecap="round" stroke-dasharray="377" stroke-dashoffset="377" transform="rotate(-90 75 75)"/>
                            </svg>
                            <div class="radial-value" id="essenciaValor">0%</div>
                        </div>
                    </div>
                </div>
                <div class="toji-section">
                    <h3 class="toji-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:20px;height:20px"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg> TRAÇOS TOJI</h3>
                    <div class="tracos-grid" id="tracosGrid"></div>
                </div>
                <div class="toji-section">
                    <h3 class="toji-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:20px;height:20px"><path d="M14.5 17.5L3 6V3h3l11.5 11.5M13 19l6-6"/></svg> PLANO DE 1 ANO — O CAMINHO TOJI</h3>
                    <div id="blocosContainer"></div>
                </div>
                <div class="toji-section">
                    <h3 class="toji-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:20px;height:20px"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg> RITUAIS DIÁRIOS DO PREDADOR</h3>
                    <div id="rituaisToji"></div>
                    <div class="ritual-progress-toji"><span id="rituaisTojProgress">0 / 5 rituais hoje</span></div>
                </div>
                <div class="toji-section">
                    <h3 class="toji-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:20px;height:20px"><path d="M18 6L6 18M6 6l12 12"/></svg> CORTE DIÁRIO</h3>
                    <div class="corte-input-toji">
                        <input type="text" id="corteInputToji" placeholder="O que você cortou hoje? (pensamento, hábito, pessoa...)">
                        <button class="btn-corte" onclick="adicionarCorteToji()">CORTAR</button>
                    </div>
                    <div id="cortesListaToji"></div>
                </div>
                <div class="selo-predador" id="seloPredador">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M9 12l2 2 4-4"/></svg>
                    <h2>PREDADOR FORMADO</h2>
                    <p>Você completou o Caminho Toji. A força está em você.</p>
                </div>
            </div>
            <div class="footer-actions"><span class="reset-info"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>Reset automático: Segunda-feira, 05:00</span><button class="btn-primary" onclick="openExportModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px;vertical-align:middle;margin-right:8px"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>Exportar Relatório</button></div>
        </div>
    </div>
    <div class="modal-overlay" id="cutModal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Registrar Corte do Dia</h3><button class="modal-close" onclick="closeCutModal()">&times;</button></div><div class="form-group"><label>O que você cortou hoje?</label><input type="text" id="cutDescription" placeholder="Ex: Procrastinação, pessoa tóxica..."></div><div class="form-group"><label>Categoria</label><select id="cutCategory"><option value="comportamento">Comportamento</option><option value="pensamento">Pensamento</option><option value="pessoa">Pessoa</option><option value="habito">Hábito</option><option value="outro">Outro</option></select></div><div class="form-group"><label>Data</label><input type="date" id="cutDate"></div><div class="form-group"><label>Anotações (opcional)</label><textarea id="cutNotes" rows="3" placeholder="Por que isso precisava ser cortado?"></textarea></div><div class="modal-buttons"><button class="btn-secondary" onclick="closeCutModal()">Cancelar</button><button class="btn-blood" onclick="saveCut()" style="padding:12px 25px">Registrar Corte</button></div></div></div>
    <div class="modal-overlay" id="victoryModal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Relatar Vitória do Dia</h3><button class="modal-close" onclick="closeVictoryModal()">&times;</button></div><div class="form-group"><label>O que você venceu hoje?</label><input type="text" id="victoryDescription" placeholder="Ex: Completei treino mesmo cansado..."></div><div class="form-group"><label>O que você resistiu?</label><input type="text" id="victoryResisted" placeholder="Ex: Tentação de desistir..."></div><div class="form-group"><label>Lei do Poder Aplicada</label><select id="victoryLaw"><option value="">Nenhuma</option></select></div><div class="form-group"><label>Data</label><input type="date" id="victoryDate"></div><div class="modal-buttons"><button class="btn-secondary" onclick="closeVictoryModal()">Cancelar</button><button class="btn-gold" onclick="saveVictory()" style="padding:12px 25px">Registrar Vitória</button></div></div></div>
    <div class="modal-overlay" id="missionModal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Nova Missão Estratégica</h3><button class="modal-close" onclick="closeMissionModal()">&times;</button></div><input type="hidden" id="missionId"><div class="form-group"><label>Tipo de Missão</label><select id="missionType"><option value="corpo">Corpo</option><option value="mente">Mente</option><option value="espirito">Espírito</option></select></div><div class="form-group"><label>Título</label><input type="text" id="missionTitle" placeholder="Ex: Dominar o físico"></div><div class="form-group"><label>Descrição</label><textarea id="missionDescription" rows="3" placeholder="Descreva sua missão..."></textarea></div><div class="modal-buttons"><button class="btn-secondary" onclick="closeMissionModal()">Cancelar</button><button class="btn-primary" onclick="saveMission()">Salvar</button></div></div></div>
    <div class="modal-overlay" id="ritualModal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Novo Ritual de Força</h3><button class="modal-close" onclick="closeRitualModal()">&times;</button></div><input type="hidden" id="ritualId"><input type="hidden" id="ritualFrequency"><div class="form-group"><label>Nome do Ritual</label><input type="text" id="ritualName" placeholder="Ex: Meditação matinal"></div><div class="form-group"><label>Horário (opcional)</label><input type="time" id="ritualTime"></div><div class="form-group"><label>Ícone</label><select id="ritualIcon"><option value="sun">☀️ Sol</option><option value="moon">🌙 Lua</option><option value="fire">🔥 Fogo</option><option value="book">📖 Livro</option><option value="run">🏃 Exercício</option><option value="meditate">🧘 Meditação</option><option value="write">✍️ Escrita</option></select></div><div class="modal-buttons"><button class="btn-secondary" onclick="closeRitualModal()">Cancelar</button><button class="btn-primary" onclick="saveRitual()">Salvar</button></div></div></div>
    <div class="modal-overlay" id="exportModal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Exportar Relatório de Guerra</h3><button class="modal-close" onclick="closeExportModal()">&times;</button></div><div class="form-group"><label>Formato de Exportação</label><select id="exportFormat"><option value="txt">📄 TXT (Texto Puro)</option><option value="pdf">📑 PDF (Documento)</option></select></div><div style="padding:15px;background:rgba(212,175,125,.1);border:1px solid rgba(212,175,125,.3);border-radius:8px;margin-bottom:15px;"><p style="font-size:.85em;color:rgba(255,255,255,.7);line-height:1.5;margin:0;font-style:italic;">"Quem não sangra no treino, sangra no campo."</p></div><div class="modal-buttons"><button class="btn-secondary" onclick="closeExportModal()">Cancelar</button><button class="btn-primary" onclick="generateReport()">⚔️ Gerar Relatório</button></div></div></div>
    <div class="toast" id="toast"></div>
    <script>
const STORAGE_KEY='painelGuerra';
const provocations=["Você já matou o fraco hoje?","O conforto é o veneno do guerreiro.","Quem você foi ontem já morreu?","A dor que você evita é o crescimento que você perde.","Você está construindo ou destruindo?","Seu maior inimigo acordou com você.","O medo só existe se você alimentá-lo.","Disciplina é liberdade. Você é livre?","O mundo não deve nada a você.","Silêncio. Foco. Execução.","Você está caçando ou sendo caçado?","A mediocridade é uma escolha diária.","Ninguém vem te salvar. Levante.","O fraco reclama. O forte executa.","Cada desculpa é uma derrota aceita.","Você está mais forte que ontem?","O tempo não espera. Nem deveria."];
const statusPhrases={discipline:{low:"Você está perdendo terreno.",medium:"Mantenha a guarda erguida.",high:"O escudo está firme."},focus:{fraco:"Você ainda se distrai com lixo.",moderado:"A mira ainda treme.",afiado:"Um tiro, um alvo."},spirit:{seco:"A chama está morrendo.",vivo:"Continue regando o fogo.",blindado:"Nada penetra. Nada abala."},danger:{baixo:"Você está doméstico demais.",medio:"Você ainda é previsível.",alto:"Eles temem o que não entendem."}};
const laws48=[{number:1,title:"Nunca ofusque o brilho do mestre",description:"Faça sempre com que as pessoas acima de você se sintam superiores."},{number:2,title:"Nunca confie demais nos amigos",description:"Desconfie dos amigos, pois eles o trairão mais rápido."},{number:3,title:"Oculte suas intenções",description:"Mantenha as pessoas sem saber para onde você está indo."},{number:4,title:"Sempre diga menos do que o necessário",description:"Pessoas poderosas impressionam dizendo menos."},{number:5,title:"Proteja sua reputação com sua vida",description:"A reputação é a pedra angular do poder."},{number:6,title:"Chame atenção a qualquer preço",description:"O que não é visto conta como nada."},{number:7,title:"Faça os outros trabalharem para você",description:"Use a sabedoria dos outros para avançar sua causa."},{number:8,title:"Faça as pessoas virem até você",description:"Quando você força o outro a agir, você está no controle."},{number:9,title:"Vença através de ações",description:"Demonstre, não argumente."},{number:10,title:"Evite os infelizes e azarados",description:"Estados emocionais são contagiosos."},{number:11,title:"Mantenha as pessoas dependentes de você",description:"Quanto mais você é confiado, mais liberdade você tem."},{number:12,title:"Use honestidade seletiva",description:"Um gesto sincero pode encobrir dezenas de desonestos."},{number:13,title:"Apele para o interesse próprio",description:"Não lembre favores passados."},{number:14,title:"Seja um espião",description:"Saber sobre seu rival é crítico."},{number:15,title:"Esmague seu inimigo totalmente",description:"Um inimigo temido deve ser esmagado completamente."},{number:16,title:"Use a ausência para aumentar respeito",description:"Muito circulando fará você desvalorizar."},{number:17,title:"Cultive imprevisibilidade",description:"Seja deliberadamente imprevisível."},{number:18,title:"Não construa fortalezas",description:"O isolamento o expõe a mais perigos."},{number:19,title:"Saiba com quem está lidando",description:"Nunca assuma que todos reagem igual."},{number:20,title:"Não se comprometa com ninguém",description:"É tolice apressar-se a tomar um lado."},{number:21,title:"Jogue de bobo para pegar um esperto",description:"Faça suas vítimas se sentirem espertas."},{number:22,title:"Use a tática da rendição",description:"A rendição lhe dá tempo para se recuperar."},{number:23,title:"Concentre suas forças",description:"Encontre uma mina rica e minere-a mais profundamente."},{number:24,title:"Jogue o cortesão perfeito",description:"Domine a arte da indireção."},{number:25,title:"Recrie-se",description:"Forje uma nova identidade que comanda atenção."},{number:26,title:"Mantenha suas mãos limpas",description:"Suas mãos nunca são sujas por erros."},{number:27,title:"Jogue com a necessidade de acreditar",description:"Torne-se o ponto focal do desejo de crer."},{number:28,title:"Entre na ação com ousadia",description:"A timidez é perigosa."},{number:29,title:"Planeje todo o caminho até o fim",description:"O final é tudo."},{number:30,title:"Faça parecer sem esforço",description:"Esconda todo o trabalho duro."},{number:31,title:"Controle as opções",description:"Faça os outros jogarem com suas cartas."},{number:32,title:"Jogue com as fantasias",description:"A verdade é frequentemente evitada."},{number:33,title:"Descubra o ponto fraco",description:"Todos têm uma fraqueza."},{number:34,title:"Aja como rei",description:"A maneira como você se comporta determina como é tratado."},{number:35,title:"Domine a arte do timing",description:"Nunca pareça ter pressa."},{number:36,title:"Despreze o que não pode ter",description:"Ignorar é a melhor vingança."},{number:37,title:"Crie espetáculos convincentes",description:"Gestos simbólicos grandiosos criam aura de poder."},{number:38,title:"Pense como quiser, comporte-se como os outros",description:"Não ostente ideias não convencionais."},{number:39,title:"Agite a água para pegar o peixe",description:"Deixe seus inimigos com raiva enquanto permanece calmo."},{number:40,title:"Despreze a refeição grátis",description:"O que é oferecido de graça é perigoso."},{number:41,title:"Evite pisar nos sapatos de um grande homem",description:"Suceder um grande homem exige o dobro."},{number:42,title:"Ataque o pastor",description:"Identifique e neutralize o líder."},{number:43,title:"Trabalhe nos corações e mentes",description:"Seduza os outros a querer se mover em sua direção."},{number:44,title:"Desarme com o efeito espelho",description:"Espelhe seus inimigos para confundi-los."},{number:45,title:"Pregue mudança, mas nunca reforme demais",description:"Muita inovação é traumática."},{number:46,title:"Nunca pareça perfeito demais",description:"A inveja cria inimigos silenciosos."},{number:47,title:"Na vitória, aprenda quando parar",description:"A arrogância pode empurrá-lo além da meta."},{number:48,title:"Assuma forma sem forma",description:"Mantenha-se adaptável e em movimento."}];
let data={status:{discipline:75,focus:'moderado',spirit:'vivo',danger:'medio'},missions:[{id:1,type:'corpo',title:'Dominar o Físico',description:'Treinar com consistência e disciplina.',weeklyChecks:{seg:false,ter:false,qua:false,qui:false,sex:false,sab:false,dom:false}},{id:2,type:'mente',title:'Expandir o Conhecimento',description:'Leitura diária e estudo de estratégia.',weeklyChecks:{seg:false,ter:false,qua:false,qui:false,sex:false,sab:false,dom:false}},{id:3,type:'espirito',title:'Fortalecer a Mente',description:'Meditação e controle emocional.',weeklyChecks:{seg:false,ter:false,qua:false,qui:false,sex:false,sab:false,dom:false}}],rituals:{daily:[{id:1,name:'Acordar às 5h',time:'05:00',icon:'sun',completed:false},{id:2,name:'Meditação matinal',time:'05:30',icon:'meditate',completed:false},{id:3,name:'Leitura estratégica',time:'06:00',icon:'book',completed:false},{id:4,name:'Treino físico',time:'07:00',icon:'run',completed:false},{id:5,name:'Revisão do dia',time:'22:00',icon:'write',completed:false}],weekly:[{id:6,name:'Planejamento semanal',time:null,icon:'write',completed:false},{id:7,name:'Análise de resultados',time:null,icon:'book',completed:false}]},laws:laws48.map(l=>({...l,applied:false,favorite:false,notes:''})),lawOfTheWeek:1,warHistory:[],lastReset:null};
function init(){loadData();checkWeeklyReset();updateDate();setRandomProvocation();populateLawsDropdown();renderAll();setInterval(checkWeeklyReset,60000);}
function loadData(){const saved=localStorage.getItem(STORAGE_KEY);if(saved){const parsed=JSON.parse(saved);data={...data,...parsed,laws:data.laws.map((law,i)=>({...law,...(parsed.laws?.[i]||{})}))};if(!data.warHistory)data.warHistory=[];}}
function saveData(){localStorage.setItem(STORAGE_KEY,JSON.stringify(data));}
function updateDate(){const now=new Date();document.getElementById('currentDate').textContent=now.toLocaleDateString('pt-BR',{weekday:'long',day:'numeric',month:'long',year:'numeric'});}
function setRandomProvocation(){document.getElementById('dailyProvocation').textContent=`"${provocations[Math.floor(Math.random()*provocations.length)]}"`;}
function populateLawsDropdown(){const select=document.getElementById('victoryLaw');select.innerHTML='<option value="">Nenhuma</option>';laws48.forEach(law=>{const option=document.createElement('option');option.value=law.number;option.textContent=`Lei ${law.number}: ${law.title}`;select.appendChild(option);});}
function checkWeeklyReset(){const now=new Date();if(now.getDay()===1&&now.getHours()===5){const today=now.toDateString();if(data.lastReset!==today){performWeeklyReset();data.lastReset=today;saveData();}}}
function performWeeklyReset(){data.missions.forEach(m=>{m.weeklyChecks={seg:false,ter:false,qua:false,qui:false,sex:false,sab:false,dom:false};});data.rituals.daily.forEach(r=>{r.completed=false;});data.rituals.weekly.forEach(r=>{r.completed=false;});const pending=data.laws.filter(l=>!l.applied);data.lawOfTheWeek=pending.length>0?pending[Math.floor(Math.random()*pending.length)].number:Math.floor(Math.random()*48)+1;showToast('Reset semanal!','success');renderAll();}
function switchTab(tabName){document.querySelectorAll('.tab-btn').forEach(btn=>btn.classList.remove('active'));document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));event.target.closest('.tab-btn').classList.add('active');document.getElementById('tab-'+tabName).classList.add('active');}
function updateDiscipline(value){data.status.discipline=parseInt(value);document.getElementById('disciplineValue').textContent=value+'%';document.getElementById('disciplineBar').style.width=value+'%';const phraseEl=document.getElementById('disciplinePhrase');phraseEl.className='status-phrase';if(value<40){phraseEl.textContent=statusPhrases.discipline.low;phraseEl.classList.add('warning');}else if(value<75){phraseEl.textContent=statusPhrases.discipline.medium;phraseEl.classList.add('caution');}else{phraseEl.textContent=statusPhrases.discipline.high;phraseEl.classList.add('positive');}saveData();}
function updateFocus(value){data.status.focus=value;const phraseEl=document.getElementById('focusPhrase');phraseEl.className='status-phrase';phraseEl.textContent=statusPhrases.focus[value];if(value==='fraco')phraseEl.classList.add('warning');else if(value==='moderado')phraseEl.classList.add('caution');else phraseEl.classList.add('positive');saveData();}
function updateSpirit(value){data.status.spirit=value;const phraseEl=document.getElementById('spiritPhrase');phraseEl.className='status-phrase';phraseEl.textContent=statusPhrases.spirit[value];if(value==='seco')phraseEl.classList.add('warning');else phraseEl.classList.add('positive');saveData();}
function updateDanger(value){data.status.danger=value;const phraseEl=document.getElementById('dangerPhrase');phraseEl.className='status-phrase';phraseEl.textContent=statusPhrases.danger[value];if(value==='baixo')phraseEl.classList.add('warning');else if(value==='medio')phraseEl.classList.add('caution');else phraseEl.classList.add('positive');saveData();}
function renderStatus(){document.getElementById('disciplineRange').value=data.status.discipline;updateDiscipline(data.status.discipline);document.getElementById('focusSelect').value=data.status.focus;updateFocus(data.status.focus);document.getElementById('spiritSelect').value=data.status.spirit;updateSpirit(data.status.spirit);document.getElementById('dangerSelect').value=data.status.danger;updateDanger(data.status.danger);}
function openCutModal(){document.getElementById('cutModal').classList.add('active');document.getElementById('cutDate').value=new Date().toISOString().split('T')[0];document.getElementById('cutDescription').value='';document.getElementById('cutCategory').value='comportamento';document.getElementById('cutNotes').value='';}
function closeCutModal(){document.getElementById('cutModal').classList.remove('active');}
function saveCut(){const description=document.getElementById('cutDescription').value.trim();const category=document.getElementById('cutCategory').value;const date=document.getElementById('cutDate').value;const notes=document.getElementById('cutNotes').value.trim();if(!description){showToast('Descreva o corte','error');return;}let entry=data.warHistory.find(h=>h.date===date);if(!entry){entry={id:Date.now(),date,cut:null,victory:null};data.warHistory.push(entry);}entry.cut={description,category,notes};data.warHistory.sort((a,b)=>new Date(b.date)-new Date(a.date));data.warHistory=data.warHistory.slice(0,30);saveData();renderHistory();closeCutModal();showToast('Corte registrado!','success');}
function openVictoryModal(){document.getElementById('victoryModal').classList.add('active');document.getElementById('victoryDate').value=new Date().toISOString().split('T')[0];document.getElementById('victoryDescription').value='';document.getElementById('victoryResisted').value='';document.getElementById('victoryLaw').value='';}
function closeVictoryModal(){document.getElementById('victoryModal').classList.remove('active');}
function saveVictory(){const description=document.getElementById('victoryDescription').value.trim();const resisted=document.getElementById('victoryResisted').value.trim();const lawApplied=document.getElementById('victoryLaw').value;const date=document.getElementById('victoryDate').value;if(!description){showToast('Descreva a vitória','error');return;}let entry=data.warHistory.find(h=>h.date===date);if(!entry){entry={id:Date.now(),date,cut:null,victory:null};data.warHistory.push(entry);}entry.victory={description,resisted,lawApplied:lawApplied?parseInt(lawApplied):null};data.warHistory.sort((a,b)=>new Date(b.date)-new Date(a.date));data.warHistory=data.warHistory.slice(0,30);saveData();renderHistory();closeVictoryModal();showToast('Vitória registrada!','success');}
function renderHistory(){const container=document.getElementById('historyList');const last7=data.warHistory.slice(0,7);if(last7.length===0){container.innerHTML='<div class="history-empty">Nenhum registro ainda. Comece registrando um corte ou vitória.</div>';return;}const daysOfWeek=['Dom','Seg','Ter','Qua','Qui','Sex','Sáb'];container.innerHTML=last7.map(entry=>{const dateObj=new Date(entry.date+'T12:00:00');const dayName=daysOfWeek[dateObj.getDay()];const dayNum=dateObj.getDate();const month=dateObj.toLocaleDateString('pt-BR',{month:'short'});const lawInfo=entry.victory?.lawApplied?laws48.find(l=>l.number===entry.victory.lawApplied):null;return`<div class="history-item"><div class="history-date">${dayNum} ${month}<small>${dayName}</small></div><div class="history-cut"><span class="history-cut-label">Corte</span><span class="history-cut-value">${entry.cut?.description||'—'}</span></div><div class="history-victory"><span class="history-victory-label">Vitória</span><span class="history-victory-value">${entry.victory?.description||'—'}</span></div><div class="history-law">${lawInfo?`<span class="history-law-number">${lawInfo.number}</span><span class="history-law-title">${lawInfo.title}</span>`:'<span style="color:rgba(255,255,255,.3);font-size:.85em">—</span>'}</div><div class="history-actions"><button class="btn-icon" onclick="editHistoryEntry('${entry.date}')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button></div></div>`;}).join('');}
function editHistoryEntry(date){const entry=data.warHistory.find(h=>h.date===date);if(!entry)return;if(entry.cut){document.getElementById('cutDescription').value=entry.cut.description||'';document.getElementById('cutCategory').value=entry.cut.category||'comportamento';document.getElementById('cutDate').value=date;document.getElementById('cutNotes').value=entry.cut.notes||'';document.getElementById('cutModal').classList.add('active');}else{openCutModal();document.getElementById('cutDate').value=date;}}
function renderMissions(){const container=document.getElementById('missionsList');const icons={corpo:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="5" r="3"/><path d="M12 8v8"/><path d="M8 14l4 4 4-4"/></svg>',mente:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2a8 8 0 0 1 8 8c0 5.33-8 12-8 12S4 15.33 4 10a8 8 0 0 1 8-8z"/><circle cx="12" cy="10" r="3"/></svg>',espirito:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2c1 3 2.5 3.5 3.5 4.5A5 5 0 0 1 17 10c0 3.5-2.5 6-5 8-2.5-2-5-4.5-5-8a5 5 0 0 1 1.5-3.5C9.5 5.5 11 5 12 2z"/></svg>'};const typeLabels={corpo:'Corpo',mente:'Mente',espirito:'Espírito'};const days=['seg','ter','qua','qui','sex','sab','dom'];const dayLabels={seg:'S',ter:'T',qua:'Q',qui:'Q',sex:'S',sab:'S',dom:'D'};container.innerHTML=data.missions.map(mission=>`<div class="mission-card"><div class="mission-card-header ${mission.type}"><div class="mission-info"><div class="mission-type">${typeLabels[mission.type]}</div><div class="mission-title">${mission.title}</div></div><div class="mission-icon">${icons[mission.type]}</div></div><div class="mission-card-body"><p class="mission-description">${mission.description}</p><div class="weekly-checks">${days.map(day=>`<div class="day-check"><label>${dayLabels[day]}</label><input type="checkbox" ${mission.weeklyChecks[day]?'checked':''} onchange="toggleMissionDay(${mission.id},'${day}')"></div>`).join('')}</div></div><div class="mission-card-footer"><button class="btn-icon" onclick="editMission(${mission.id})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button><button class="btn-icon delete" onclick="deleteMission(${mission.id})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button></div></div>`).join('');}
function toggleMissionDay(missionId,day){const mission=data.missions.find(m=>m.id===missionId);if(mission){mission.weeklyChecks[day]=!mission.weeklyChecks[day];saveData();}}
function openMissionModal(missionId=null){const modal=document.getElementById('missionModal');document.getElementById('missionId').value=missionId||'';if(missionId){const mission=data.missions.find(m=>m.id===missionId);document.getElementById('missionType').value=mission.type;document.getElementById('missionTitle').value=mission.title;document.getElementById('missionDescription').value=mission.description;}else{document.getElementById('missionType').value='corpo';document.getElementById('missionTitle').value='';document.getElementById('missionDescription').value='';}modal.classList.add('active');}
function closeMissionModal(){document.getElementById('missionModal').classList.remove('active');}
function saveMission(){const id=document.getElementById('missionId').value;const type=document.getElementById('missionType').value;const title=document.getElementById('missionTitle').value.trim();const description=document.getElementById('missionDescription').value.trim();if(!title){showToast('Preencha o título','error');return;}if(data.missions.length>=3&&!id){showToast('Máximo de 3 missões','error');return;}if(id){const mission=data.missions.find(m=>m.id===parseInt(id));mission.type=type;mission.title=title;mission.description=description;}else{data.missions.push({id:Math.max(...data.missions.map(m=>m.id),0)+1,type,title,description,weeklyChecks:{seg:false,ter:false,qua:false,qui:false,sex:false,sab:false,dom:false}});}saveData();renderMissions();closeMissionModal();showToast('Missão salva!','success');}
function editMission(id){openMissionModal(id);}
function deleteMission(id){if(confirm('Excluir missão?')){data.missions=data.missions.filter(m=>m.id!==id);saveData();renderMissions();showToast('Excluída','success');}}
function renderRituals(){const iconsSvg={sun:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>',moon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>',fire:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2c1 3 2.5 3.5 3.5 4.5A5 5 0 0 1 17 10c0 3.5-2.5 6-5 8-2.5-2-5-4.5-5-8a5 5 0 0 1 1.5-3.5C9.5 5.5 11 5 12 2z"/></svg>',book:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>',run:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="5" r="2"/><path d="M4 17l4-4 4 4 4-4 4 4"/><line x1="12" y1="7" x2="12" y2="13"/></svg>',meditate:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="6" r="3"/><path d="M12 9v4"/><path d="M5 21c0-4 3-7 7-7s7 3 7 7"/></svg>',write:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>'};const renderList=(rituals,listId)=>{const container=document.getElementById(listId);if(rituals.length===0){container.innerHTML='<div style="text-align:center;color:rgba(255,255,255,.4);padding:20px">Nenhum ritual</div>';return;}container.innerHTML=rituals.map(ritual=>`<div class="ritual-item ${ritual.completed?'completed':''}"><input type="checkbox" class="ritual-check" ${ritual.completed?'checked':''} onchange="toggleRitual(${ritual.id})"><div class="ritual-icon">${iconsSvg[ritual.icon]||iconsSvg.fire}</div><div class="ritual-info"><div class="ritual-name">${ritual.name}</div>${ritual.time?`<div class="ritual-time">${ritual.time}</div>`:''}</div><div class="ritual-actions"><button class="btn-icon" onclick="editRitual(${ritual.id})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button><button class="btn-icon delete" onclick="deleteRitual(${ritual.id})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button></div></div>`).join('');};renderList(data.rituals.daily,'dailyRitualsList');renderList(data.rituals.weekly,'weeklyRitualsList');}
function toggleRitual(id){let ritual=data.rituals.daily.find(r=>r.id===id)||data.rituals.weekly.find(r=>r.id===id);if(ritual){ritual.completed=!ritual.completed;saveData();renderRituals();}}
function openRitualModal(frequency,ritualId=null){const modal=document.getElementById('ritualModal');document.getElementById('ritualId').value=ritualId||'';document.getElementById('ritualFrequency').value=frequency;if(ritualId){const ritual=data.rituals.daily.find(r=>r.id===ritualId)||data.rituals.weekly.find(r=>r.id===ritualId);document.getElementById('ritualName').value=ritual.name;document.getElementById('ritualTime').value=ritual.time||'';document.getElementById('ritualIcon').value=ritual.icon;}else{document.getElementById('ritualName').value='';document.getElementById('ritualTime').value='';document.getElementById('ritualIcon').value='sun';}modal.classList.add('active');}
function closeRitualModal(){document.getElementById('ritualModal').classList.remove('active');}
function saveRitual(){const id=document.getElementById('ritualId').value;const frequency=document.getElementById('ritualFrequency').value;const name=document.getElementById('ritualName').value.trim();const time=document.getElementById('ritualTime').value||null;const icon=document.getElementById('ritualIcon').value;if(!name){showToast('Preencha o nome','error');return;}const list=frequency==='diario'?data.rituals.daily:data.rituals.weekly;if(id){const ritual=list.find(r=>r.id===parseInt(id));ritual.name=name;ritual.time=time;ritual.icon=icon;}else{const allRituals=[...data.rituals.daily,...data.rituals.weekly];list.push({id:Math.max(...allRituals.map(r=>r.id),0)+1,name,time,icon,completed:false});}saveData();renderRituals();closeRitualModal();showToast('Ritual salvo!','success');}
function editRitual(id){const isDaily=data.rituals.daily.some(r=>r.id===id);openRitualModal(isDaily?'diario':'semanal',id);}
function deleteRitual(id){if(confirm('Excluir ritual?')){data.rituals.daily=data.rituals.daily.filter(r=>r.id!==id);data.rituals.weekly=data.rituals.weekly.filter(r=>r.id!==id);saveData();renderRituals();showToast('Excluído','success');}}
let currentFilter='todas';
function renderLaws(){renderLawOfTheWeek();renderLawsList();}
function renderLawOfTheWeek(){const law=data.laws.find(l=>l.number===data.lawOfTheWeek);document.getElementById('lawWeekCard').innerHTML=`<span class="law-week-badge">Lei da Semana</span><div class="law-week-number">Lei ${law.number}</div><h2 class="law-week-title">${law.title}</h2><p class="law-week-description">${law.description}</p><div class="law-week-actions"><button class="btn-primary" onclick="applyLaw(${law.number})">Aplicar Hoje</button><button class="btn-secondary" onclick="changeLawOfWeek()">Sortear Nova Lei</button></div>`;}
function renderLawsList(){let filtered=data.laws;if(currentFilter==='aplicadas')filtered=data.laws.filter(l=>l.applied);else if(currentFilter==='pendentes')filtered=data.laws.filter(l=>!l.applied);else if(currentFilter==='favoritas')filtered=data.laws.filter(l=>l.favorite);if(filtered.length===0){document.getElementById('lawsList').innerHTML='<div style="text-align:center;color:rgba(255,255,255,.4);padding:40px">Nenhuma lei encontrada</div>';return;}document.getElementById('lawsList').innerHTML=filtered.map(law=>`<div class="law-item ${law.applied?'applied':''} ${law.favorite?'favorite':''}"><div class="law-item-header" onclick="toggleLawBody(${law.number})"><div class="law-item-info"><span class="law-number">${law.number}</span><span class="law-title">${law.title}</span></div><div class="law-item-actions"><span class="law-status-badge ${law.applied?'applied':'pending'}">${law.applied?'Aplicada':'Pendente'}</span><button class="btn-icon favorite ${law.favorite?'active':''}" onclick="event.stopPropagation();toggleFavorite(${law.number})"><svg viewBox="0 0 24 24" fill="${law.favorite?'currentColor':'none'}" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></button></div></div><div class="law-item-body" id="law-body-${law.number}"><p class="law-description">${law.description}</p><div class="law-notes"><label>Anotações</label><textarea placeholder="Insights, vitórias, falhas..." onchange="saveLawNotes(${law.number},this.value)">${law.notes||''}</textarea></div><div class="law-actions"><button class="btn-success" onclick="applyLaw(${law.number})">${law.applied?'Desmarcar':'Marcar como Aplicada'}</button></div></div></div>`).join('');}
function toggleLawBody(number){document.getElementById('law-body-'+number).classList.toggle('active');}
function filterLaws(filter){currentFilter=filter;document.querySelectorAll('.filter-btn').forEach(btn=>btn.classList.remove('active'));event.target.classList.add('active');renderLawsList();}
function applyLaw(number){const law=data.laws.find(l=>l.number===number);law.applied=!law.applied;saveData();renderLaws();showToast(law.applied?'Lei aplicada!':'Lei desmarcada','success');}
function toggleFavorite(number){const law=data.laws.find(l=>l.number===number);law.favorite=!law.favorite;saveData();renderLawsList();}
function saveLawNotes(number,notes){data.laws.find(l=>l.number===number).notes=notes;saveData();}
function changeLawOfWeek(){const pending=data.laws.filter(l=>!l.applied&&l.number!==data.lawOfTheWeek);data.lawOfTheWeek=pending.length>0?pending[Math.floor(Math.random()*pending.length)].number:Math.floor(Math.random()*48)+1;saveData();renderLawOfTheWeek();showToast('Nova lei selecionada!','success');}

function openExportModal(){document.getElementById('exportModal').classList.add('active');}
function closeExportModal(){document.getElementById('exportModal').classList.remove('active');}

function generateReport(){
    const format = document.getElementById('exportFormat').value;
    const now = new Date();
    const dateStr = now.toLocaleDateString('pt-BR', {day:'2-digit',month:'2-digit',year:'numeric'});
    
    // Comentários automáticos baseados nos níveis
    const disciplineComments = {
        low: "⚠️ Você está sangrando. A guerra não perdoa os fracos.",
        medium: "🔶 Ainda há brechas. O inimigo observa cada vacilo.",
        high: "🛡️ O escudo está erguido. Continue assim, soldado."
    };
    const focusComments = {
        fraco: "Você ainda se distrai com lixo. O fraco mira no nada.",
        moderado: "A mira ainda treme. Estabilize ou será abatido.",
        afiado: "Um tiro. Um alvo. Zero desperdício."
    };
    const spiritComments = {
        seco: "A chama está morrendo. Reacenda ou será consumido pelas trevas.",
        vivo: "O fogo arde, mas precisa de lenha. Continue alimentando.",
        blindado: "Nada penetra. Nada abala. Você é fortaleza."
    };
    const dangerComments = {
        baixo: "Você está doméstico demais. Um leão de zoológico não caça.",
        medio: "Você ainda é previsível. Surpreenda ou seja surpreendido.",
        alto: "Eles temem o que não entendem. Continue sendo o caos calculado."
    };
    
    // Determinar nível de disciplina
    const discLevel = data.status.discipline < 40 ? 'low' : data.status.discipline < 70 ? 'medium' : 'high';
    
    // Labels
    const focusLabels = {fraco:'FRACO',moderado:'MODERADO',afiado:'AFIADO'};
    const spiritLabels = {seco:'SECO',vivo:'VIVO',blindado:'BLINDADO'};
    const dangerLabels = {baixo:'BAIXO',medio:'MÉDIO',alto:'ALTO'};
    
    // Buscar último corte e vitória
    const lastEntry = data.warHistory.length > 0 ? data.warHistory[0] : null;
    const lastCut = lastEntry?.cut || null;
    const lastVictory = lastEntry?.victory || null;
    
    // Lei da semana
    const lawOfWeek = data.laws.find(l => l.number === data.lawOfTheWeek);
    
    // Frases de encerramento
    const closingPhrases = [
        "Eu sou perigoso porque domino minha mente.",
        "Eu sou livre porque ninguém me controla.",
        "O fraco morre todos os dias. O forte morre uma vez.",
        "Disciplina é a ponte entre metas e conquistas.",
        "Quem controla a si mesmo, controla o mundo."
    ];
    const closingPhrase = closingPhrases[Math.floor(Math.random() * closingPhrases.length)];
    
    const report = `
══════════════════════════════════════════════════════════════
⚔️ RELATÓRIO DE GUERRA – ${dateStr}
> "Quem não sangra no treino, sangra no campo."
══════════════════════════════════════════════════════════════


🎯 STATUS DE GUERRA
──────────────────────────────────────────────────────────────

• Disciplina: ${data.status.discipline}%
  ${disciplineComments[discLevel]}

• Foco: ${focusLabels[data.status.focus]}
  ${focusComments[data.status.focus]}

• Espírito: ${spiritLabels[data.status.spirit]}
  ${spiritComments[data.status.spirit]}

• Perigo: ${dangerLabels[data.status.danger]}
  ${dangerComments[data.status.danger]}


💀 CORTE DO DIA
──────────────────────────────────────────────────────────────
${lastCut ? `
• Corte aplicado: ${lastCut.description}
• Categoria: ${lastCut.category.toUpperCase()}
• Data: ${lastCut.date}
${lastCut.notes ? `• Motivo: ${lastCut.notes}` : ''}
` : `
• Nenhum corte registrado hoje.
  ⚠️ O que você está tolerando que deveria eliminar?
`}

🛡️ VITÓRIA DO DIA
──────────────────────────────────────────────────────────────
${lastVictory ? `
• Ação realizada: ${lastVictory.description}
${lastVictory.resisted ? `• Resistência: ${lastVictory.resisted}` : ''}
${lastVictory.lawApplied ? `• Lei aplicada: Lei ${lastVictory.lawApplied}` : ''}
• Resultado: Mais um passo em direção à versão imbatível.
` : `
• Nenhuma vitória registrada hoje.
  ⚠️ Quem não registra vitórias, não reconhece seu progresso.
`}

📜 LEI DA SEMANA
──────────────────────────────────────────────────────────────

Lei ${lawOfWeek.number}: "${lawOfWeek.title}"
Status: ${lawOfWeek.applied ? '✅ APLICADA' : '⏳ PENDENTE'}

"${lawOfWeek.description}"


══════════════════════════════════════════════════════════════
                    ENCERRAMENTO
══════════════════════════════════════════════════════════════

"${closingPhrase}"

──────────────────────────────────────────────────────────────
            ZARA • PAINEL DE GUERRA • ${dateStr}
══════════════════════════════════════════════════════════════
`;

    if(format === 'txt'){
        // Exportar como TXT
        const blob = new Blob([report], {type:'text/plain;charset=utf-8'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `relatorio-guerra-${now.toISOString().split('T')[0]}.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        closeExportModal();
        showToast('Relatório TXT exportado!','success');
    } else {
        // Exportar como PDF usando jsPDF
        generatePDF(report, dateStr, now);
    }
}

function generatePDF(reportText, dateStr, now){
    const printWindow = window.open('', '_blank');
    const htmlContent = '<!DOCTYPE html><html><head><title>Relatório de Guerra - ' + dateStr + '</title><style>@import url("https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap");*{margin:0;padding:0;box-sizing:border-box}body{font-family:"Courier Prime",monospace;background:#0a0a0a;color:#d4af7d;padding:40px;line-height:1.6}.container{max-width:800px;margin:0 auto;background:#141414;border:2px solid #d4af7d;padding:40px;box-shadow:0 0 50px rgba(212,175,125,0.2)}pre{white-space:pre-wrap;word-wrap:break-word;font-family:"Courier Prime",monospace;font-size:14px;color:#e0e0e0}@media print{body{background:white;color:black;padding:20px}.container{border-color:#333;box-shadow:none;background:white}pre{color:#333}}</style></head><body><div class="container"><pre>' + reportText.replace(/</g,'&lt;').replace(/>/g,'&gt;') + '</pre></div><script>setTimeout(function(){window.print();},500);<\/script></body></html>';
    printWindow.document.write(htmlContent);
    printWindow.document.close();
    closeExportModal();
    showToast('PDF gerado! Use Ctrl+P para salvar.','success');
}
function showToast(message,type='success'){const toast=document.getElementById('toast');toast.textContent=message;toast.className='toast '+type+' active';setTimeout(()=>{toast.classList.remove('active');},3000);}
function renderAll(){renderStatus();renderHistory();renderMissions();renderRituals();renderLaws();renderToji();}

// ============================================
// TOJI - CAMINHO DO PREDADOR SILENCIOSO
// ============================================
const TOJI_STORAGE='toji_data';
const TRACOS_TOJI=[
    {id:'frieza',nome:'Frieza Absoluta',desc:'Controle emocional total.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="12" y1="2" x2="12" y2="22"/><line x1="2" y1="12" x2="22" y2="12"/></svg>'},
    {id:'forca',nome:'Força Bruta',desc:'Corpo como arma. Treino constante.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="6" y="6" width="12" height="12"/></svg>'},
    {id:'silencio',nome:'Silêncio Estratégico',desc:'Falar apenas o necessário.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/></svg>'},
    {id:'desapego',nome:'Desapego Material',desc:'Nenhuma dependência de conforto.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>'},
    {id:'instinto',nome:'Instinto Predador',desc:'Decisões rápidas, sem hesitação.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>'},
    {id:'disciplina',nome:'Disciplina Monástica',desc:'Rotina inflexível.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>'},
    {id:'isolamento',nome:'Isolamento Produtivo',desc:'Solidão como ferramenta.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>'},
    {id:'resistencia',nome:'Resistência ao Prazer',desc:'Negar gratificação instantânea.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>'},
    {id:'execucao',nome:'Execução Silenciosa',desc:'Agir sem anunciar.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>'},
    {id:'indiferenca',nome:'Indiferença Social',desc:'Opinião alheia é irrelevante.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/><line x1="1" y1="1" x2="23" y2="23"/></svg>'}
];
const BLOCOS_TOJI=[
    {id:1,nome:'CORPO COMO ARMA',dias:'Dias 1–90',frase:'Antes de ser frio por dentro, seja inquebrável por fora.',metas:['Treinar 6x/semana','Banho gelado diário','Cortar pornografia','Alimentação funcional','Dormir antes 23h'],prova:'48h de disciplina monástica'},
    {id:2,nome:'FRIEZA SILENCIOSA',dias:'Dias 91–180',frase:'Ninguém merece sua reação. Só sua vitória.',metas:['Reduzir fala ao mínimo','Treino mesmo cansado','Execução sem aviso'],prova:'3 dias sem expressar emoção'},
    {id:3,nome:'INSTINTO SELVAGEM',dias:'Dias 181–270',frase:'Se pensar demais, já perdeu.',metas:['Treinar reação/sparring','Decisões em 5s','Cortar hesitação'],prova:'Executar plano em 24h'},
    {id:4,nome:'DESAPEGO TOTAL',dias:'Dias 271–365',frase:'Se tiver que cortar, corta. Ponto.',metas:['Eliminar dependência emocional','7 dias sem conforto'],prova:'1 dia sem falar, sem celular'}
];
const RITUAIS_TOJI=[
    {id:'acordar',texto:'Acordar 05h sem celular',hora:'05:00'},
    {id:'banho',texto:'Banho gelado',hora:'05:15'},
    {id:'jejum',texto:'Jejum até meio-dia',hora:'12:00'},
    {id:'treino',texto:'Treino (mínimo 45min)',hora:'06:00'},
    {id:'silencio',texto:'Silêncio absoluto 20min',hora:'22:00'}
];
let tojiData=JSON.parse(localStorage.getItem(TOJI_STORAGE))||{tracos:{},blocos:{},rituais:{},cortes:[],lastReset:null};
function saveToji(){localStorage.setItem(TOJI_STORAGE,JSON.stringify(tojiData));}
function renderToji(){
    const hoje=new Date().toDateString();
    if(tojiData.lastReset!==hoje){tojiData.rituais={};tojiData.lastReset=hoje;saveToji();}
    renderTracosToji();renderBlocosToji();renderRituaisToji();renderCortesToji();atualizarEssenciaToji();verificarSeloPredador();
}
function renderTracosToji(){
    const grid=document.getElementById('tracosGrid');if(!grid)return;
    grid.innerHTML=TRACOS_TOJI.map(t=>{
        const v=tojiData.tracos[t.id]||0;
        return `<div class="traco-item"><div class="traco-header">${t.icon}<h4>${t.nome}</h4></div><p class="traco-desc">${t.desc}</p><div class="traco-bar"><div class="traco-fill" style="width:${v}%"></div></div><div class="traco-controls"><span class="traco-percent">${v}%</span><div class="traco-btns"><button class="traco-btn" onclick="ajustarTracoToji('${t.id}',-5)">−</button><button class="traco-btn" onclick="ajustarTracoToji('${t.id}',5)">+</button></div></div></div>`;
    }).join('');
}
function ajustarTracoToji(id,delta){tojiData.tracos[id]=Math.max(0,Math.min(100,(tojiData.tracos[id]||0)+delta));saveToji();renderTracosToji();atualizarEssenciaToji();}
function atualizarEssenciaToji(){
    const vals=TRACOS_TOJI.map(t=>tojiData.tracos[t.id]||0);
    const media=vals.reduce((a,b)=>a+b,0)/vals.length;
    const el=document.getElementById('essenciaValor');if(el)el.textContent=Math.round(media)+'%';
    const circle=document.getElementById('essenciaCircle');if(circle){const circ=2*Math.PI*60;circle.style.strokeDashoffset=circ-(media/100)*circ;}
}
function getFaseProgresso(faseId){return parseInt(localStorage.getItem('toji_fase'+faseId+'_progresso'))||0;}
function setFaseProgresso(faseId,valor){localStorage.setItem('toji_fase'+faseId+'_progresso',Math.min(90,Math.max(0,valor)));}
function verificarProgressoDiario(){
    const hoje=new Date().toDateString();
    const ultimaVerif=localStorage.getItem('toji_ultima_verificacao');
    if(ultimaVerif===hoje)return;
    const rituaisCompletos=RITUAIS_TOJI.every(r=>tojiData.rituais[r.id]);
    if(rituaisCompletos){
        const faseAtiva=detectarFaseAtiva();
        if(faseAtiva){
            const atual=getFaseProgresso(faseAtiva);
            if(atual<90){
                setFaseProgresso(faseAtiva,atual+1);
                localStorage.setItem('toji_ultima_verificacao',hoje);
                showToast('Dia concluído! Fase '+faseAtiva+': '+(atual+1)+'/90','success');
                renderBlocosToji();
            }
        }
    }
}
function detectarFaseAtiva(){
    for(let i=1;i<=4;i++){
        const prog=getFaseProgresso(i);
        if(prog<90)return i;
    }
    return null;
}
function renderBlocosToji(){
    const c=document.getElementById('blocosContainer');if(!c)return;
    const checkSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>';
    const chevSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polyline points="6 9 12 15 18 9"/></svg>';
    c.innerHTML=BLOCOS_TOJI.map(b=>{
        const bd=tojiData.blocos[b.id]||{metas:{},prova:false,open:false};
        const progresso=getFaseProgresso(b.id);
        const percentual=Math.floor((progresso/90)*100);
        return `<div class="bloco-toji ${bd.open?'open':''}" id="bloco-toji-${b.id}"><div class="bloco-header-toji" onclick="toggleBlocoToji(${b.id})"><div class="bloco-info"><div class="bloco-num">${b.id}</div><div><div class="bloco-nome">${b.nome}</div><div class="bloco-dias">${b.dias}</div></div></div><div class="bloco-status-toji"><div class="bloco-check-toji ${bd.prova?'done':''}">${checkSvg}</div><div class="bloco-toggle">${chevSvg}</div></div></div><div class="bloco-content-toji"><div class="fase-progress-container"><div class="fase-progress-header"><span class="fase-progress-label">PROGRESSO DA FASE</span><span class="fase-progress-count">${progresso}/90 dias</span></div><div class="fase-progress-bar"><div class="fase-progress-fill" style="width:${percentual}%"></div></div><div class="fase-progress-percent">${percentual}% concluído</div></div><p class="bloco-frase-toji">"${b.frase}"</p><div class="bloco-metas">${b.metas.map((m,i)=>`<div class="meta-item-toji"><div class="meta-check-toji ${bd.metas[i]?'checked':''}" onclick="toggleMetaToji(${b.id},${i})">${checkSvg}</div><span>${m}</span></div>`).join('')}</div><div class="prova-final-toji"><h5>⚔️ PROVA FINAL</h5><p>${b.prova}</p><button class="prova-btn-toji ${bd.prova?'done':''}" onclick="toggleProvaToji(${b.id})">${bd.prova?'✓ CONCLUÍDA':'MARCAR CONCLUÍDA'}</button></div></div></div>`;
    }).join('');
}
function toggleBlocoToji(id){if(!tojiData.blocos[id])tojiData.blocos[id]={metas:{},prova:false,open:false};tojiData.blocos[id].open=!tojiData.blocos[id].open;saveToji();renderBlocosToji();}
function toggleMetaToji(bid,idx){if(!tojiData.blocos[bid])tojiData.blocos[bid]={metas:{},prova:false,open:true};tojiData.blocos[bid].metas[idx]=!tojiData.blocos[bid].metas[idx];saveToji();renderBlocosToji();}
function toggleProvaToji(bid){if(!tojiData.blocos[bid])tojiData.blocos[bid]={metas:{},prova:false,open:true};tojiData.blocos[bid].prova=!tojiData.blocos[bid].prova;saveToji();renderBlocosToji();verificarSeloPredador();}
function verificarSeloPredador(){const todos=BLOCOS_TOJI.every(b=>tojiData.blocos[b.id]?.prova);const selo=document.getElementById('seloPredador');if(selo){if(todos)selo.classList.add('visivel');else selo.classList.remove('visivel');}}
function renderRituaisToji(){
    const c=document.getElementById('rituaisToji');if(!c)return;
    const checkSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>';
    c.innerHTML=RITUAIS_TOJI.map(r=>{
        const checked=tojiData.rituais[r.id]||false;
        return `<div class="ritual-item-toji"><div class="ritual-check-toji ${checked?'checked':''}" onclick="toggleRitualToji('${r.id}')">${checkSvg}</div><span class="ritual-text-toji">${r.texto}</span><span class="ritual-time-toji">${r.hora}</span></div>`;
    }).join('');
    const done=RITUAIS_TOJI.filter(r=>tojiData.rituais[r.id]).length;
    const prog=document.getElementById('rituaisTojProgress');if(prog)prog.textContent=`${done} / ${RITUAIS_TOJI.length} rituais hoje`;
}
function toggleRitualToji(id){tojiData.rituais[id]=!tojiData.rituais[id];saveToji();renderRituaisToji();verificarProgressoDiario();}
function renderCortesToji(){
    const c=document.getElementById('cortesListaToji');if(!c)return;
    const last7=tojiData.cortes.slice(-7).reverse();
    if(!last7.length){c.innerHTML='<p style="color:rgba(255,255,255,.4);text-align:center;padding:20px;">Nenhum corte registrado.</p>';return;}
    c.innerHTML=last7.map(ct=>`<div class="corte-item-toji"><div class="corte-icon-toji"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></div><span class="corte-text-toji">${ct.texto}</span><span class="corte-data-toji">${ct.data}</span></div>`).join('');
}
function adicionarCorteToji(){
    const input=document.getElementById('corteInputToji');const texto=input.value.trim();if(!texto)return;
    tojiData.cortes.push({texto,data:new Date().toLocaleDateString('pt-BR')});
    saveToji();input.value='';renderCortesToji();showToast('Corte registrado!','success');
}
document.addEventListener('keypress',function(e){if(e.target.id==='corteInputToji'&&e.key==='Enter')adicionarCorteToji();});

init();
    </script>
</body>
</html>
