<!DOCTYPE html>

<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0a0a0a">
    <title>PAINEL DE GUERRA | Centro de Comando</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Cinzel:wght@400;500;600&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}html{scroll-behavior:smooth;background:#0a0a0a!important}body{font-family:'Inter',sans-serif;background:#0a0a0a!important;color:#fff;min-height:100vh;padding:20px;padding-bottom:80px}body::before,body::after{content:'';position:fixed;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,#d4af7d,transparent);z-index:9999}body::before{top:0}body::after{bottom:0}
        .sidebar{position:fixed;top:0;left:0;width:60px;height:100vh;background:linear-gradient(180deg,#0f0f0f,#1a1a1a);border-right:1px solid rgba(212,175,125,.15);z-index:1000;display:flex;flex-direction:column;align-items:center;padding:15px 0;transition:width .3s;overflow:hidden}.sidebar:hover{width:200px}.sidebar-logo{width:40px;height:40px;border:1px solid rgba(212,175,125,.3);border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Cinzel',serif;font-size:1.1em;color:#d4af7d;margin-bottom:20px;text-decoration:none}.sidebar-menu{display:flex;flex-direction:column;gap:5px;width:100%;flex:1}.sidebar-menu a{display:flex;align-items:center;gap:12px;padding:12px 10px;color:rgba(255,255,255,.6);text-decoration:none;font-size:.85em;transition:all .3s;border-left:2px solid transparent;white-space:nowrap}.sidebar-menu a:hover,.sidebar-menu a.active{background:rgba(212,175,125,.1);border-left-color:#d4af7d;color:#d4af7d}.sidebar-menu a svg{width:20px;height:20px;min-width:20px;margin-left:10px}.sidebar-menu a span{opacity:0;transition:opacity .3s}.sidebar:hover .sidebar-menu a span{opacity:1}.sidebar-divider{height:1px;background:rgba(212,175,125,.2);margin:8px 10px;width:calc(100% - 20px)}.sidebar-footer{padding:15px 10px;text-align:center;border-top:1px solid rgba(212,175,125,.2);width:100%}.sidebar-footer p{color:rgba(255,255,255,.6);font-size:.7em;opacity:0;transition:opacity .3s}.sidebar-footer .instituto{font-size:.85em;color:#d4af7d;display:block;font-family:'Cinzel',serif}.sidebar:hover .sidebar-footer p{opacity:1}
        .mobile-nav{display:none;position:fixed;bottom:0;left:0;right:0;background:linear-gradient(180deg,#1a1a1a,#0f0f0f);border-top:1px solid rgba(212,175,125,.15);padding:10px 0;z-index:1000}.mobile-nav-items{display:flex;justify-content:space-around}.mobile-nav-item{display:flex;flex-direction:column;align-items:center;gap:4px;color:rgba(255,255,255,.5);text-decoration:none;font-size:.65em}.mobile-nav-item svg{width:22px;height:22px}.mobile-nav-item.active{color:#d4af7d}
        @media(max-width:768px){body{padding:10px;padding-bottom:80px}.sidebar{display:none}.mobile-nav{display:block}.main-container{margin-left:0!important}}@media(min-width:769px){body{padding-left:80px}.mobile-nav{display:none!important}}
        .main-container{max-width:1200px;margin:0 auto}
        .identity-card{background:linear-gradient(135deg,#141414,#1a1a1a);border:1px solid rgba(212,175,125,.3);border-radius:16px;padding:30px 40px;margin-bottom:25px;text-align:center;position:relative;overflow:hidden}.identity-card::before,.identity-card::after{content:'';position:absolute;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,#d4af7d,transparent)}.identity-card::before{top:0}.identity-card::after{bottom:0}.identity-text{font-family:'Playfair Display',serif;font-size:1.3em;font-style:italic;color:rgba(255,255,255,.9);line-height:1.8}.identity-text span{display:block;margin-top:8px}
        .container{background:#141414;border:1px solid rgba(212,175,125,.15);border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.5);overflow:hidden;margin-bottom:25px}
        .header{background:linear-gradient(135deg,#1a1a1a,#0f0f0f);border-bottom:1px solid rgba(212,175,125,.2);padding:30px;text-align:center;position:relative}.header h1{font-family:'Cinzel',serif;font-size:2em;margin-bottom:10px;letter-spacing:4px;color:#d4af7d;text-transform:uppercase}.header p{font-size:.85em;color:rgba(255,255,255,.5);letter-spacing:2px;text-transform:uppercase}.header-date{position:absolute;top:15px;right:20px;font-size:.75em;color:rgba(212,175,125,.6)}
        .tabs-container{background:#141414;padding:15px 20px;border-bottom:1px solid rgba(212,175,125,.15)}.tabs-header{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}.tab-btn{display:flex;align-items:center;gap:8px;padding:12px 20px;background:transparent;border:1px solid rgba(212,175,125,.2);color:rgba(255,255,255,.5);font-size:.85em;cursor:pointer;border-radius:8px;transition:all .3s;font-family:'Inter',sans-serif}.tab-btn:hover,.tab-btn.active{color:#d4af7d;border-color:#d4af7d;background:rgba(212,175,125,.1)}.tab-btn svg{width:18px;height:18px}.tab-content{display:none;padding:25px}.tab-content.active{display:block}
        .provocation-card{background:linear-gradient(135deg,#1a0a0a,#0f0505);border:1px solid rgba(180,50,50,.3);border-radius:16px;padding:30px;margin-bottom:25px;text-align:center;position:relative;overflow:hidden}.provocation-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,#d4af7d,transparent)}.provocation-icon{width:50px;height:50px;margin:0 auto 20px;background:rgba(212,175,125,.2);border-radius:50%;display:flex;align-items:center;justify-content:center}.provocation-icon svg{width:26px;height:26px;stroke:#b34040}.provocation-text{font-family:'Cinzel',serif;font-size:1.5em;color:#b34040;letter-spacing:1px;line-height:1.4;margin-bottom:20px;cursor:pointer;transition:color .3s}.provocation-text:hover{color:#d45050}.provocation-subtext{font-size:.8em;color:rgba(255,255,255,.4);margin-bottom:25px}.provocation-actions{display:flex;gap:15px;justify-content:center;flex-wrap:wrap}
        .btn-blood{padding:14px 28px;background:linear-gradient(135deg,#d4af7d,#5c0000);border:1px solid rgba(180,50,50,.4);border-radius:8px;color:#fff;font-size:.9em;font-weight:600;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:10px}.btn-blood:hover{transform:translateY(-2px);box-shadow:0 5px 25px rgba(212,175,125,.4)}.btn-blood svg{width:18px;height:18px}
        .btn-gold{padding:14px 28px;background:linear-gradient(135deg,#d4af7d,#c9a066);border:none;border-radius:8px;color:#0a0a0a;font-size:.9em;font-weight:600;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:10px}.btn-gold:hover{transform:translateY(-2px);box-shadow:0 5px 25px rgba(212,175,125,.4)}.btn-gold svg{width:18px;height:18px}
        .status-section-title{font-family:'Cinzel',serif;font-size:1.1em;color:#d4af7d;letter-spacing:2px;text-transform:uppercase;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid rgba(212,175,125,.2)}
        .status-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}
        .status-card{background:linear-gradient(135deg,#1a1a1a,#151515);border:1px solid rgba(212,175,125,.15);border-radius:12px;padding:20px;position:relative;overflow:hidden}.status-card::before{content:'';position:absolute;top:0;left:0;width:3px;height:100%;background:linear-gradient(180deg,#d4af7d,rgba(212,175,125,.3))}.status-card-header{display:flex;align-items:center;gap:12px;margin-bottom:15px}.status-card-icon{width:40px;height:40px;background:rgba(212,175,125,.1);border-radius:10px;display:flex;align-items:center;justify-content:center}.status-card-icon svg{width:22px;height:22px;stroke:#d4af7d}.status-card-title{font-size:.75em;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.5)}
        .status-phrase{font-family:'Playfair Display',serif;font-size:.85em;font-style:italic;color:rgba(255,255,255,.5);padding:10px 0;border-top:1px solid rgba(255,255,255,.05);margin-top:10px}.status-phrase.warning{color:#e74c3c}.status-phrase.caution{color:#f39c12}.status-phrase.positive{color:#2ecc71}
        .status-select{background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.2);border-radius:6px;padding:10px 12px;color:#fff;font-size:.9em;width:100%;cursor:pointer;outline:none}.status-select:focus{border-color:#d4af7d}.status-select option{background:#1a1a1a;color:#fff}
        .discipline-input{display:flex;align-items:center;gap:10px}.discipline-input input[type="range"]{flex:1;-webkit-appearance:none;height:6px;background:rgba(255,255,255,.1);border-radius:3px;outline:none}.discipline-input input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;background:#d4af7d;border-radius:50%;cursor:pointer}.discipline-input span{font-family:'Cinzel',serif;font-size:1.2em;color:#d4af7d;min-width:50px;text-align:right}
        .progress-bar{height:6px;background:rgba(255,255,255,.1);border-radius:3px;overflow:hidden}.progress-fill{height:100%;background:linear-gradient(90deg,#d4af7d,#c9a066);border-radius:3px;transition:width .5s}
        .history-section{margin-top:30px;padding-top:25px;border-top:1px solid rgba(212,175,125,.15)}.history-title{font-family:'Cinzel',serif;font-size:1em;color:#d4af7d;letter-spacing:2px;text-transform:uppercase;margin-bottom:20px;display:flex;align-items:center;gap:10px}.history-title svg{width:20px;height:20px;stroke:#d4af7d}.history-list{display:flex;flex-direction:column;gap:12px}.history-item{background:linear-gradient(135deg,#1a1a1a,#151515);border:1px solid rgba(212,175,125,.1);border-radius:12px;padding:18px 20px;display:grid;grid-template-columns:100px 1fr 1fr 150px auto;gap:20px;align-items:center;transition:all .3s}.history-item:hover{border-color:rgba(212,175,125,.25)}.history-date{font-family:'Cinzel',serif;font-size:.9em;color:#d4af7d}.history-date small{display:block;font-family:'Inter',sans-serif;font-size:.75em;color:rgba(255,255,255,.4);margin-top:3px}.history-cut,.history-victory{display:flex;flex-direction:column;gap:4px}.history-cut-label,.history-victory-label{font-size:.65em;text-transform:uppercase;letter-spacing:.5px;color:rgba(255,255,255,.4)}.history-cut-value{color:#b34040;font-size:.9em}.history-victory-value{color:#2ecc71;font-size:.9em}.history-law{display:flex;align-items:center;gap:8px}.history-law-number{width:28px;height:28px;background:rgba(212,175,125,.15);border-radius:6px;display:flex;align-items:center;justify-content:center;font-family:'Cinzel',serif;font-size:.8em;color:#d4af7d}.history-law-title{font-size:.8em;color:rgba(255,255,255,.7);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.history-actions{display:flex;gap:8px;justify-content:flex-end}.history-empty{text-align:center;padding:40px 20px;color:rgba(255,255,255,.3);font-style:italic}
        @media(max-width:900px){.history-item{grid-template-columns:1fr;gap:12px}.history-date{border-bottom:1px solid rgba(255,255,255,.05);padding-bottom:10px}.history-actions{justify-content:flex-start}}
        .missions-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.mission-card{background:linear-gradient(135deg,#1a1a1a,#151515);border:1px solid rgba(212,175,125,.15);border-radius:16px;overflow:hidden;transition:all .3s}.mission-card:hover{border-color:rgba(212,175,125,.3);transform:translateY(-2px)}.mission-card-header{padding:20px;display:flex;justify-content:space-between;align-items:flex-start}.mission-card-header.corpo{background:linear-gradient(135deg,rgba(231,76,60,.3),rgba(192,57,43,.2))}.mission-card-header.mente{background:linear-gradient(135deg,rgba(52,152,219,.3),rgba(41,128,185,.2))}.mission-card-header.espirito{background:linear-gradient(135deg,rgba(155,89,182,.3),rgba(142,68,173,.2))}.mission-info{flex:1}.mission-type{font-size:.7em;text-transform:uppercase;letter-spacing:2px;color:rgba(255,255,255,.6);margin-bottom:8px}.mission-title{font-family:'Playfair Display',serif;font-size:1.3em;color:#fff}.mission-icon{width:50px;height:50px;background:rgba(255,255,255,.1);border-radius:12px;display:flex;align-items:center;justify-content:center}.mission-icon svg{width:26px;height:26px;stroke:#fff}.mission-card-body{padding:20px}.mission-description{color:rgba(255,255,255,.7);font-size:.9em;line-height:1.6;margin-bottom:20px}.weekly-checks{display:flex;gap:8px;flex-wrap:wrap}.day-check{display:flex;flex-direction:column;align-items:center;gap:6px}.day-check label{font-size:.7em;color:rgba(255,255,255,.5);text-transform:uppercase}.day-check input[type="checkbox"]{appearance:none;-webkit-appearance:none;width:32px;height:32px;border:2px solid rgba(212,175,125,.3);border-radius:8px;cursor:pointer;position:relative;background:transparent;transition:all .3s}.day-check input[type="checkbox"]:checked{background:linear-gradient(135deg,#d4af7d,#c9a066);border-color:#d4af7d}.day-check input[type="checkbox"]:checked::after{content:'';position:absolute;width:8px;height:14px;border:solid #0a0a0a;border-width:0 3px 3px 0;top:50%;left:50%;transform:translate(-50%,-60%) rotate(45deg)}.mission-card-footer{padding:15px 20px;background:rgba(0,0,0,.2);border-top:1px solid rgba(212,175,125,.1);display:flex;justify-content:flex-end;gap:10px}
        .rituals-section{margin-bottom:30px}.rituals-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.rituals-title{font-family:'Cinzel',serif;font-size:1.1em;color:#d4af7d;letter-spacing:1px}.rituals-list{display:flex;flex-direction:column;gap:12px}.ritual-item{display:flex;align-items:center;gap:15px;padding:15px 20px;background:linear-gradient(135deg,#1a1a1a,#151515);border:1px solid rgba(212,175,125,.1);border-radius:12px;transition:all .3s}.ritual-item:hover{border-color:rgba(212,175,125,.25)}.ritual-item.completed{opacity:.6}.ritual-item.completed .ritual-name{text-decoration:line-through;color:rgba(255,255,255,.4)}.ritual-check{appearance:none;-webkit-appearance:none;width:28px;height:28px;border:2px solid rgba(46,204,113,.5);border-radius:50%;cursor:pointer;position:relative;background:transparent;transition:all .3s;flex-shrink:0}.ritual-check:checked{background:#2ecc71;border-color:#2ecc71}.ritual-check:checked::after{content:'';position:absolute;width:6px;height:12px;border:solid #0a0a0a;border-width:0 2px 2px 0;top:50%;left:50%;transform:translate(-50%,-60%) rotate(45deg)}.ritual-icon{width:36px;height:36px;background:rgba(212,175,125,.1);border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.ritual-icon svg{width:18px;height:18px;stroke:#d4af7d}.ritual-info{flex:1}.ritual-name{color:#fff;font-size:.95em}.ritual-time{color:rgba(255,255,255,.4);font-size:.8em;margin-top:3px}.ritual-actions{display:flex;gap:8px}
        .law-week-card{background:linear-gradient(135deg,#1a1a1a,#0f0f0f);border:2px solid rgba(212,175,125,.3);border-radius:16px;padding:30px;margin-bottom:25px;position:relative;overflow:hidden}.law-week-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,transparent,#d4af7d,transparent)}.law-week-badge{display:inline-block;background:rgba(212,175,125,.2);color:#d4af7d;padding:6px 14px;border-radius:20px;font-size:.75em;text-transform:uppercase;letter-spacing:1px;margin-bottom:15px}.law-week-number{font-family:'Cinzel',serif;font-size:1em;color:rgba(212,175,125,.6);margin-bottom:8px}.law-week-title{font-family:'Playfair Display',serif;font-size:1.8em;color:#fff;margin-bottom:15px;line-height:1.3}.law-week-description{color:rgba(255,255,255,.7);font-size:.95em;line-height:1.7;margin-bottom:20px}.law-week-actions{display:flex;gap:15px;flex-wrap:wrap}
        .laws-filter{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap}.filter-btn{padding:10px 18px;background:transparent;border:1px solid rgba(212,175,125,.2);border-radius:6px;color:rgba(255,255,255,.5);font-size:.85em;cursor:pointer;transition:all .3s}.filter-btn:hover,.filter-btn.active{border-color:#d4af7d;color:#d4af7d;background:rgba(212,175,125,.1)}
        .laws-list{display:flex;flex-direction:column;gap:10px}.law-item{background:linear-gradient(135deg,#1a1a1a,#151515);border:1px solid rgba(212,175,125,.1);border-radius:12px;overflow:hidden;transition:all .3s}.law-item:hover{border-color:rgba(212,175,125,.25)}.law-item.applied{border-left:3px solid #2ecc71}.law-item.favorite{border-left:3px solid #d4af7d}.law-item-header{padding:18px 20px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;user-select:none}.law-item-header:hover{background:rgba(212,175,125,.05)}.law-item-info{display:flex;align-items:center;gap:15px;flex:1}.law-number{font-family:'Cinzel',serif;font-size:1.1em;color:#d4af7d;min-width:35px}.law-title{color:#fff;font-size:.95em;flex:1}.law-item-actions{display:flex;gap:8px;align-items:center}.law-status-badge{font-size:.7em;padding:4px 10px;border-radius:12px;text-transform:uppercase;letter-spacing:.5px}.law-status-badge.applied{background:rgba(46,204,113,.2);color:#2ecc71}.law-status-badge.pending{background:rgba(255,255,255,.1);color:rgba(255,255,255,.5)}.law-item-body{display:none;padding:0 20px 20px;border-top:1px solid rgba(212,175,125,.1)}.law-item-body.active{display:block;padding-top:20px}.law-description{color:rgba(255,255,255,.7);font-size:.9em;line-height:1.7;margin-bottom:20px}.law-notes{margin-bottom:20px}.law-notes label{display:block;font-size:.75em;color:rgba(255,255,255,.5);text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px}.law-notes textarea{width:100%;min-height:100px;padding:15px;background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.2);border-radius:8px;color:#fff;font-size:.9em;font-family:inherit;resize:vertical;outline:none}.law-notes textarea:focus{border-color:#d4af7d}.law-notes textarea::placeholder{color:rgba(255,255,255,.3)}.law-actions{display:flex;gap:10px;flex-wrap:wrap}
        .btn-primary{padding:12px 25px;background:linear-gradient(135deg,#d4af7d,#c9a066);border:none;border-radius:8px;color:#0a0a0a;font-size:.9em;font-weight:600;cursor:pointer;transition:all .3s}.btn-primary:hover{transform:translateY(-2px);box-shadow:0 5px 20px rgba(212,175,125,.3)}.btn-secondary{padding:12px 25px;background:transparent;border:1px solid rgba(212,175,125,.3);border-radius:8px;color:#d4af7d;font-size:.9em;cursor:pointer;transition:all .3s}.btn-secondary:hover{background:rgba(212,175,125,.1)}.btn-icon{background:transparent;border:none;color:rgba(255,255,255,.4);cursor:pointer;padding:8px;border-radius:6px;transition:all .3s;display:flex;align-items:center;justify-content:center}.btn-icon:hover{color:#d4af7d;background:rgba(212,175,125,.1)}.btn-icon.favorite.active{color:#d4af7d}.btn-icon.delete:hover{color:#e74c3c;background:rgba(231,76,60,.1)}.btn-icon svg{width:18px;height:18px}.btn-success{padding:10px 20px;background:rgba(46,204,113,.2);border:1px solid rgba(46,204,113,.4);border-radius:6px;color:#2ecc71;font-size:.85em;cursor:pointer;transition:all .3s}.btn-success:hover{background:rgba(46,204,113,.3)}
        .modal-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.9);z-index:2000;justify-content:center;align-items:center;padding:20px}.modal-overlay.active{display:flex}.modal-content{background:#1a1a1a;border:1px solid rgba(212,175,125,.2);border-radius:16px;padding:30px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px}.modal-title{font-family:'Playfair Display',serif;font-size:1.3em;color:#d4af7d}.modal-close{background:transparent;border:none;color:rgba(255,255,255,.5);font-size:1.5em;cursor:pointer;padding:5px;line-height:1}.modal-close:hover{color:#fff}.form-group{margin-bottom:20px}.form-group label{display:block;font-size:.75em;color:rgba(255,255,255,.5);text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px}.form-group input,.form-group select,.form-group textarea{width:100%;padding:12px 15px;background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.2);border-radius:8px;color:#fff;font-size:.95em;outline:none;font-family:inherit}.form-group input:focus,.form-group select:focus,.form-group textarea:focus{border-color:#d4af7d}.form-group input::placeholder,.form-group textarea::placeholder{color:rgba(255,255,255,.3)}.form-group select option{background:#1a1a1a;color:#fff}.modal-buttons{display:flex;gap:10px;justify-content:flex-end;margin-top:25px}
        .footer-actions{background:linear-gradient(135deg,#1a1a1a,#0f0f0f);border-top:1px solid rgba(212,175,125,.2);padding:20px 25px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.reset-info{font-size:.8em;color:rgba(255,255,255,.4)}.reset-info svg{width:14px;height:14px;vertical-align:middle;margin-right:5px}
        .toast{position:fixed;bottom:100px;right:20px;padding:15px 25px;background:#1a1a1a;border:1px solid rgba(212,175,125,.3);border-radius:10px;color:#fff;font-size:.9em;z-index:10001;opacity:0;transform:translateY(20px);transition:all .3s}.toast.active{opacity:1;transform:translateY(0)}.toast.success{border-color:#2ecc71}.toast.error{border-color:#e74c3c}
        ::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:#0a0a0a}::-webkit-scrollbar-thumb{background:rgba(212,175,125,.3);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:rgba(212,175,125,.5)}
        @media(max-width:768px){.header h1{font-size:1.4em;letter-spacing:2px}.identity-card{padding:20px}.identity-text{font-size:1.1em}.provocation-text{font-size:1.2em}.provocation-actions{flex-direction:column}.provocation-actions button{width:100%;justify-content:center}.status-grid{grid-template-columns:1fr 1fr;gap:12px}.status-card{padding:15px}.missions-grid{grid-template-columns:1fr}.tabs-header{gap:5px}.tab-btn{padding:10px 12px;font-size:.75em;flex:1;justify-content:center}.tab-btn span{display:none}.law-week-title{font-size:1.4em}.law-week-actions{flex-direction:column}.law-week-actions button{width:100%}.footer-actions{flex-direction:column;text-align:center}}
        @media(max-width:480px){.status-grid{grid-template-columns:1fr}.weekly-checks{justify-content:space-between}.day-check input[type="checkbox"]{width:28px;height:28px}}
        /* TOJI STYLES */
        .toji-header{text-align:center;padding:30px 20px;border-bottom:1px solid rgba(212,175,125,.2);margin-bottom:25px}
        .toji-title{font-family:"Cinzel",serif;font-size:2.5em;color:#d4af7d;letter-spacing:8px;text-transform:uppercase;margin-bottom:5px}
        .toji-subtitle{font-family:"Cinzel",serif;font-size:1em;color:rgba(212,175,125,.7);letter-spacing:3px;margin-bottom:15px}
        .toji-frase{font-style:italic;color:rgba(255,255,255,.5);font-size:1em;margin-bottom:25px}
        .essencia-container{display:flex;flex-direction:column;align-items:center;gap:10px}
        .essencia-label{font-family:"Cinzel",serif;font-size:.8em;color:rgba(212,175,125,.7);letter-spacing:2px}
        .radial-progress{position:relative;display:flex;align-items:center;justify-content:center}
        .radial-value{position:absolute;font-family:"Cinzel",serif;font-size:1.8em;color:#d4af7d}
        .toji-section{margin-bottom:30px}
        .toji-section-title{font-family:"Cinzel",serif;font-size:1em;color:#d4af7d;letter-spacing:2px;text-transform:uppercase;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid rgba(212,175,125,.2);display:flex;align-items:center;gap:10px}
        .tracos-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:15px}
        .traco-item{background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.15);border-radius:8px;padding:18px}
        .traco-header{display:flex;align-items:center;gap:10px;margin-bottom:10px}
        .traco-header svg{width:18px;height:18px;color:#d4af7d}
        .traco-header h4{font-family:"Cinzel",serif;font-size:.95em;color:#d4af7d}
        .traco-desc{font-size:.8em;color:rgba(255,255,255,.5);margin-bottom:12px;line-height:1.4}
        .traco-bar{height:6px;background:rgba(212,175,125,.2);border-radius:3px;overflow:hidden;margin-bottom:10px}
        .traco-fill{height:100%;background:linear-gradient(90deg,#d4af7d,#d4af7d);border-radius:3px;transition:width .3s}
        .traco-controls{display:flex;justify-content:space-between;align-items:center}
        .traco-percent{font-family:"Cinzel",serif;color:#d4af7d}
        .traco-btns{display:flex;gap:6px}
        .traco-btn{width:28px;height:28px;border:1px solid rgba(212,175,125,.4);background:rgba(212,175,125,.1);color:#d4af7d;border-radius:4px;cursor:pointer;font-weight:bold;transition:all .3s}
        .traco-btn:hover{background:#d4af7d;color:#fff}
        .bloco-toji{border:1px solid rgba(212,175,125,.2);border-radius:8px;margin-bottom:12px;overflow:hidden}
        .bloco-header-toji{background:rgba(212,175,125,.1);padding:15px 20px;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
        .bloco-header-toji:hover{background:rgba(212,175,125,.15)}
        .bloco-info{display:flex;align-items:center;gap:12px}
        .bloco-num{width:36px;height:36px;background:rgba(212,175,125,.2);border:1px solid #d4af7d;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:"Cinzel",serif;color:#d4af7d}
        .bloco-nome{font-family:"Cinzel",serif;color:#d4af7d;letter-spacing:1px}
        .bloco-dias{font-size:.75em;color:rgba(255,255,255,.4)}
        .bloco-status-toji{display:flex;align-items:center;gap:10px}
        .bloco-check-toji{width:22px;height:22px;border:2px solid rgba(212,175,125,.4);border-radius:50%;display:flex;align-items:center;justify-content:center}
        .bloco-check-toji.done{background:#d4af7d;border-color:#d4af7d}
        .bloco-check-toji svg{width:12px;height:12px;color:#fff;opacity:0}
        .bloco-check-toji.done svg{opacity:1}
        .bloco-toggle{color:rgba(255,255,255,.4);transition:transform .3s}
        .bloco-toji.open .bloco-toggle{transform:rotate(180deg)}
        .bloco-content-toji{display:none;padding:20px;background:rgba(0,0,0,.2)}
        .bloco-toji.open .bloco-content-toji{display:block}
        .bloco-frase-toji{font-style:italic;color:rgba(212,175,125,.6);margin-bottom:15px;padding-left:12px;border-left:2px solid #d4af7d}
        .meta-item-toji{display:flex;align-items:center;gap:10px;padding:8px 0;border-bottom:1px solid rgba(212,175,125,.1)}
        .meta-check-toji{width:18px;height:18px;border:2px solid rgba(212,175,125,.4);border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center}
        .meta-check-toji.checked{background:#d4af7d;border-color:#d4af7d}
        .meta-check-toji svg{width:12px;height:12px;color:#fff;opacity:0}
        .meta-check-toji.checked svg{opacity:1}
        .prova-final-toji{background:rgba(212,175,125,.1);border:1px solid rgba(212,175,125,.3);border-radius:6px;padding:15px;margin-top:15px}
        .prova-final-toji h5{font-family:"Cinzel",serif;color:#d4af7d;margin-bottom:8px}
        .prova-final-toji p{color:rgba(255,255,255,.6);font-size:.9em;margin-bottom:12px}
        .prova-btn-toji{background:transparent;border:1px solid #d4af7d;color:#d4af7d;padding:8px 20px;border-radius:4px;cursor:pointer;font-family:"Cinzel",serif;transition:all .3s}
        .prova-btn-toji:hover,.prova-btn-toji.done{background:#d4af7d;color:#fff}
        .ritual-item-toji{display:flex;align-items:center;gap:12px;padding:12px 15px;background:rgba(0,0,0,.2);border:1px solid rgba(212,175,125,.1);border-radius:6px;margin-bottom:8px}
        .ritual-check-toji{width:22px;height:22px;border:2px solid rgba(212,175,125,.4);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center}
        .ritual-check-toji.checked{background:#d4af7d;border-color:#d4af7d}
        .ritual-check-toji svg{width:12px;height:12px;color:#fff;opacity:0}
        .ritual-check-toji.checked svg{opacity:1}
        .ritual-text-toji{flex:1;color:rgba(255,255,255,.7)}
        .ritual-progress-toji{text-align:center;margin-top:15px;padding-top:15px;border-top:1px solid rgba(212,175,125,.2);font-family:"Cinzel",serif;color:#d4af7d}
        .corte-input-toji{display:flex;gap:10px;margin-bottom:20px}
        .corte-input-toji input{flex:1;background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.2);border-radius:4px;padding:12px;color:#e0e0e0}
        .corte-input-toji input::placeholder{color:rgba(255,255,255,.3)}
        .btn-corte{background:#d4af7d;border:none;color:#fff;padding:12px 20px;border-radius:4px;cursor:pointer;font-family:"Cinzel",serif;transition:all .3s}
        .btn-corte:hover{background:#a00000}
        .corte-item-toji{display:flex;align-items:center;gap:12px;padding:12px 15px;background:rgba(212,175,125,.05);border-left:3px solid #d4af7d;border-radius:0 6px 6px 0;margin-bottom:8px}
        .corte-icon-toji svg{width:18px;height:18px;color:#d4af7d}
        .corte-text-toji{color:rgba(255,255,255,.7);flex:1}
        .corte-data-toji{font-size:.75em;color:rgba(255,255,255,.4)}
        .rituais-semanais-toji{background:rgba(212,175,125,.08);border:1px solid rgba(212,175,125,.2);border-radius:6px;padding:15px;margin-top:15px}
        .rituais-semanais-toji h5{font-family:"Cinzel",serif;color:#d4af7d;margin-bottom:12px;font-size:.9em;letter-spacing:1px}
        .rituais-semanais-toji ul{list-style:none;padding:0;margin:0}
        .rituais-semanais-toji li{color:rgba(255,255,255,.7);font-size:.85em;padding:8px 12px;background:rgba(0,0,0,.2);border-left:2px solid #d4af7d;margin-bottom:6px;border-radius:0 4px 4px 0}
        .rituais-semanais-toji li:last-child{margin-bottom:0}
        .toji-plano-desc{background:rgba(212,175,125,.08);border:1px solid rgba(212,175,125,.2);border-radius:8px;padding:20px;margin-bottom:20px}
        .toji-plano-desc>p{color:rgba(255,255,255,.7);font-size:.9em;line-height:1.6;margin-bottom:15px}
        .sistema-progresso-info{background:rgba(0,0,0,.2);border-radius:6px;padding:15px}
        .sistema-progresso-info strong{color:#d4af7d;font-family:"Cinzel",serif;font-size:.85em;letter-spacing:1px;display:block;margin-bottom:10px}
        .sistema-progresso-info ul{list-style:none;padding:0;margin:0 0 10px 0}
        .sistema-progresso-info li{color:rgba(255,255,255,.6);font-size:.8em;padding:5px 0 5px 15px;position:relative}
        .sistema-progresso-info li::before{content:'‚Ä¢';position:absolute;left:0;color:#d4af7d}
        .sistema-progresso-info .sem-feedback{color:#d4af7d;font-style:italic;font-size:.85em;margin:0;padding-top:5px;border-top:1px solid rgba(212,175,125,.15)}
        .selo-predador{display:none;text-align:center;padding:30px;background:linear-gradient(135deg,rgba(212,175,125,.2),rgba(212,175,125,.1));border:2px solid #d4af7d;border-radius:8px;margin-top:25px}
        .selo-predador.visivel{display:block}
        .selo-predador svg{width:60px;height:60px;color:#d4af7d;margin-bottom:15px}
        .selo-predador h2{font-family:"Cinzel",serif;font-size:1.8em;color:#d4af7d;letter-spacing:4px;margin-bottom:8px}
        .selo-predador p{color:rgba(255,255,255,.6)}
        .fase-progress-container{background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.2);border-radius:6px;padding:12px 15px;margin-bottom:15px}
        .fase-progress-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
        .fase-progress-label{font-family:"Cinzel",serif;font-size:.85em;color:#d4af7d;letter-spacing:1px}
        .fase-progress-count{font-family:"Cinzel",serif;font-size:.9em;color:rgba(255,255,255,.7)}
        .fase-progress-bar{height:10px;background:rgba(212,175,125,.15);border-radius:5px;overflow:hidden;position:relative}
        .fase-progress-fill{height:100%;background:linear-gradient(90deg,#d4af7d,#c9a066);border-radius:5px;transition:width .5s ease}
        .fase-progress-percent{text-align:right;font-size:.75em;color:rgba(212,175,125,.7);margin-top:5px}
        .metas-header{display:flex;justify-content:space-between;align-items:center;margin:20px 0 15px;padding-bottom:10px;border-bottom:1px solid rgba(212,175,125,.15)}
        .metas-header span{font-family:"Cinzel",serif;font-size:.85em;color:#d4af7d;letter-spacing:1px}
        .btn-add-meta{background:transparent;border:1px solid rgba(212,175,125,.3);color:#d4af7d;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:.75em;display:flex;align-items:center;gap:5px;transition:all .3s}
        .btn-add-meta:hover{background:rgba(212,175,125,.1)}
        .metas-grid-container{background:rgba(0,0,0,.2);border:1px solid rgba(212,175,125,.1);border-radius:8px;overflow:hidden}
        .metas-dias-header{display:flex;align-items:center;background:rgba(212,175,125,.1);padding:10px 15px;border-bottom:1px solid rgba(212,175,125,.15)}
        .meta-nome-header{flex:1;font-size:.8em;color:rgba(212,175,125,.7);text-transform:uppercase;letter-spacing:1px}
        .dias-header-row{display:flex;gap:8px}
        .dia-header{width:32px;height:24px;display:flex;align-items:center;justify-content:center;font-size:.75em;color:rgba(255,255,255,.5);font-weight:600}
        .dia-header.completo{color:#d4af7d;text-shadow:0 0 10px rgba(212,175,125,.5)}
        .meta-row-toji{display:flex;align-items:center;padding:12px 15px;border-bottom:1px solid rgba(212,175,125,.05)}
        .meta-row-toji:last-child{border-bottom:none}
        .meta-row-toji:hover{background:rgba(212,175,125,.03)}
        .meta-nome{flex:1;color:rgba(255,255,255,.8);font-size:.9em;display:flex;align-items:center;gap:10px}
        .meta-actions-inline{display:flex;gap:4px;opacity:0;transition:opacity .2s}
        .meta-row-toji:hover .meta-actions-inline{opacity:1}
        .btn-meta-action-sm{background:transparent;border:none;color:rgba(255,255,255,.4);padding:4px;cursor:pointer;border-radius:3px;transition:all .2s}
        .btn-meta-action-sm:hover{color:#d4af7d;background:rgba(212,175,125,.1)}
        .btn-meta-action-sm.del:hover{color:#e74c3c;background:rgba(231,76,60,.1)}
        .meta-dias-row{display:flex;gap:8px}
        .dia-check{width:32px;height:32px;border:2px solid rgba(212,175,125,.25);border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s}
        .dia-check:hover{border-color:#d4af7d;background:rgba(212,175,125,.1)}
        .dia-check.checked{background:#d4af7d;border-color:#d4af7d}
        .dia-check.checked::after{content:'‚úì';color:#0a0a0a;font-weight:bold;font-size:.8em}
        .ritual-actions-toji{display:flex;gap:6px;margin-left:auto}
        .btn-add-ritual{width:100%;background:transparent;border:1px dashed rgba(212,175,125,.3);color:rgba(212,175,125,.7);padding:12px;border-radius:6px;cursor:pointer;font-size:.85em;display:flex;align-items:center;justify-content:center;gap:8px;margin-top:10px;transition:all .3s}
        .btn-add-ritual:hover{border-color:#d4af7d;color:#d4af7d;background:rgba(212,175,125,.05)}
        .btn-meta-action{background:transparent;border:1px solid rgba(212,175,125,.2);color:rgba(255,255,255,.5);padding:5px 8px;border-radius:4px;cursor:pointer;transition:all .2s}
        .btn-meta-action:hover{border-color:#d4af7d;color:#d4af7d;background:rgba(212,175,125,.1)}
        .btn-meta-action.del:hover{border-color:#e74c3c;color:#e74c3c;background:rgba(231,76,60,.1)}
        /* SHELBY STYLES */
        .shelby-header{text-align:center;padding:30px 20px;border-bottom:1px solid rgba(212,175,125,.3);margin-bottom:25px}
        .shelby-title{font-family:'Cinzel',serif;font-size:2.2em;color:#d4af7d;letter-spacing:6px;text-transform:uppercase;margin-bottom:5px}
        .shelby-subtitle{font-family:'Cinzel',serif;font-size:1em;color:rgba(212,175,125,.8);letter-spacing:4px;margin-bottom:15px}
        .shelby-frase{font-style:italic;color:rgba(255,255,255,.5);font-size:.9em;max-width:600px;margin:0 auto;line-height:1.6}
        .shelby-lado-toggle{display:flex;gap:10px;justify-content:center;margin-bottom:25px}
        .lado-btn{display:flex;align-items:center;gap:8px;padding:12px 25px;background:transparent;border:1px solid rgba(212,175,125,.3);color:rgba(255,255,255,.5);font-family:'Cinzel',serif;font-size:.85em;letter-spacing:1px;cursor:pointer;border-radius:6px;transition:all .3s}
        .lado-btn:hover{border-color:#d4af7d;color:#d4af7d}
        .lado-btn.active{background:rgba(212,175,125,.15);border-color:#d4af7d;color:#d4af7d}
        .lado-btn.ilicito.active{background:rgba(212,175,125,.2);border-color:#d4af7d;color:#d4af7d}
        .lado-btn svg{width:18px;height:18px}
        .shelby-lado{transition:all .3s}
        .shelby-lado.hidden{display:none}
        .lado-header{padding:20px;border-radius:8px;margin-bottom:25px;text-align:center}
        .lado-header.licito{background:linear-gradient(135deg,rgba(212,175,125,.2),rgba(212,175,125,.1));border:1px solid rgba(212,175,125,.3)}
        .lado-header.ilicito{background:linear-gradient(135deg,rgba(212,175,125,.2),rgba(20,20,20,.3));border:1px solid rgba(212,175,125,.4)}
        .lado-header h3{font-family:'Cinzel',serif;font-size:1.3em;letter-spacing:3px;margin-bottom:8px}
        .lado-header.licito h3{color:#d4af7d}
        .lado-header.ilicito h3{color:#d4af7d}
        .lado-header p{font-size:.85em;color:rgba(255,255,255,.5);letter-spacing:1px}
        .shelby-section{margin-bottom:30px}
        .section-title-shelby{font-family:'Cinzel',serif;font-size:1em;color:#d4af7d;letter-spacing:2px;text-transform:uppercase;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid rgba(212,175,125,.2);display:flex;align-items:center;gap:10px}
        .section-title-shelby svg{width:20px;height:20px}
        .section-title-shelby.ilicito{color:#d4af7d;border-color:rgba(212,175,125,.3)}
        .tracos-shelby-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:15px}
        .traco-shelby{background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.15);border-radius:8px;padding:15px}
        .traco-shelby.ilicito{border-color:rgba(212,175,125,.3)}
        .traco-shelby h5{font-family:'Cinzel',serif;font-size:.85em;color:#d4af7d;margin-bottom:10px;letter-spacing:1px}
        .traco-shelby.ilicito h5{color:#d4af7d}
        .traco-shelby-bar{height:6px;background:rgba(212,175,125,.15);border-radius:3px;overflow:hidden;margin-bottom:8px}
        .traco-shelby.ilicito .traco-shelby-bar{background:rgba(212,175,125,.2)}
        .traco-shelby-fill{height:100%;background:linear-gradient(90deg,#d4af7d,#d4af7d);border-radius:3px;transition:width .3s}
        .traco-shelby.ilicito .traco-shelby-fill{background:linear-gradient(90deg,#d4af7d,#d4af7d)}
        .traco-shelby-controls{display:flex;justify-content:space-between;align-items:center}
        .traco-shelby-percent{font-size:.9em;color:#d4af7d}
        .traco-shelby.ilicito .traco-shelby-percent{color:#d4af7d}
        .traco-shelby-btns{display:flex;gap:5px}
        .traco-shelby-btn{width:26px;height:26px;border:1px solid rgba(212,175,125,.3);background:transparent;color:#d4af7d;border-radius:4px;cursor:pointer;font-weight:bold;transition:all .2s}
        .traco-shelby-btn:hover{background:#d4af7d;color:#0a0a0a}
        .traco-shelby.ilicito .traco-shelby-btn{border-color:rgba(212,175,125,.4);color:#d4af7d}
        .traco-shelby.ilicito .traco-shelby-btn:hover{background:#d4af7d;color:#fff}
        .codigo-shelby{background:linear-gradient(135deg,rgba(212,175,125,.15),rgba(20,20,20,.2));border:1px solid rgba(212,175,125,.4);border-radius:8px;padding:20px;margin-bottom:25px}
        .codigo-shelby h5{font-family:'Cinzel',serif;color:#d4af7d;letter-spacing:2px;margin-bottom:15px;text-align:center}
        .codigo-shelby ul{list-style:none;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px}
        .codigo-shelby li{color:rgba(255,255,255,.6);font-size:.85em;padding:8px 12px;background:rgba(0,0,0,.3);border-radius:4px;border-left:2px solid #d4af7d}
        .codigo-shelby li strong{color:#d4af7d}
        .estetica-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px}
        .estetica-item{background:rgba(0,0,0,.2);border:1px solid rgba(212,175,125,.1);border-radius:8px;padding:15px}
        .estetica-item h5{font-family:'Cinzel',serif;color:#d4af7d;font-size:.85em;margin-bottom:8px;letter-spacing:1px}
        .estetica-item p{color:rgba(255,255,255,.6);font-size:.85em;line-height:1.5}
        .leituras-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:15px}
        .leitura-fase{background:rgba(0,0,0,.2);border:1px solid rgba(212,175,125,.15);border-radius:8px;padding:15px}
        .leitura-fase h5{font-family:'Cinzel',serif;color:#d4af7d;font-size:.85em;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid rgba(212,175,125,.1)}
        .leitura-fase ul{list-style:none}
        .leitura-fase li{color:rgba(255,255,255,.6);font-size:.85em;padding:5px 0;display:flex;align-items:center;gap:8px}
        .leitura-fase li::before{content:'üìñ';font-size:.7em}
        .operacao-oculta{background:rgba(212,175,125,.1);border:1px solid rgba(212,175,125,.3);border-radius:8px;padding:20px}
        .operacao-oculta p{color:rgba(255,255,255,.6);font-size:.9em;margin-bottom:15px;line-height:1.5}
        .operacao-oculta textarea{width:100%;min-height:100px;background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.3);border-radius:6px;padding:12px;color:#e0e0e0;font-size:.9em;resize:vertical;margin-bottom:15px}
        .operacao-oculta textarea::placeholder{color:rgba(255,255,255,.3)}
        .btn-operacao{background:transparent;border:1px solid #d4af7d;color:#d4af7d;padding:12px 25px;border-radius:6px;cursor:pointer;font-family:'Cinzel',serif;letter-spacing:2px;transition:all .3s;width:100%}
        .btn-operacao:hover,.btn-operacao.done{background:#d4af7d;color:#fff}
        .selo-shelby{display:none;text-align:center;padding:30px;background:linear-gradient(135deg,rgba(212,175,125,.2),rgba(212,175,125,.1));border:2px solid #d4af7d;border-radius:8px;margin-top:25px}
        .selo-shelby.visivel{display:block}
        .selo-shelby svg{width:60px;height:60px;color:#d4af7d;margin-bottom:15px}
        .selo-shelby h2{font-family:'Cinzel',serif;font-size:1.5em;color:#d4af7d;letter-spacing:3px;margin-bottom:8px}
        .selo-shelby p{color:rgba(255,255,255,.6)}
        /* AN√ÅLISE IL√çCITA */
        .analise-ilicita{background:linear-gradient(135deg,rgba(212,175,125,.2),rgba(20,20,20,.3));border:1px solid rgba(212,175,125,.4);border-radius:8px;padding:25px}
        .analise-quote{font-style:italic;color:rgba(212,175,125,.9);font-size:1.05em;text-align:center;padding:15px 20px;margin-bottom:20px;border-left:3px solid #d4af7d;background:rgba(0,0,0,.2)}
        .analise-ilicita h5{font-family:'Cinzel',serif;color:#d4af7d;letter-spacing:2px;margin-bottom:20px;font-size:.9em}
        .analise-pontos{display:flex;flex-direction:column;gap:15px;margin-bottom:20px}
        .analise-ponto{display:flex;gap:15px;align-items:flex-start;padding:12px;background:rgba(0,0,0,.2);border-radius:6px;border-left:2px solid #d4af7d}
        .ponto-num{width:28px;height:28px;min-width:28px;background:rgba(212,175,125,.4);border:1px solid #d4af7d;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Cinzel',serif;color:#d4af7d;font-size:.9em}
        .analise-ponto strong{color:#d4af7d;display:block;margin-bottom:5px;font-size:.95em}
        .analise-ponto p{color:rgba(255,255,255,.6);font-size:.85em;line-height:1.5;margin:0}
        .analise-conclusao{background:rgba(212,175,125,.15);border:1px solid rgba(212,175,125,.3);border-radius:6px;padding:15px;text-align:center}
        .analise-conclusao strong{color:#d4af7d}
        .analise-conclusao{color:rgba(255,255,255,.7);font-size:.9em}
        /* CRIMES GRID */
        .crimes-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:12px;margin-bottom:20px}
        .crime-card{background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.3);border-radius:8px;overflow:hidden;transition:all .3s}
        .crime-card:hover{border-color:#d4af7d}
        .crime-card.open{border-color:#d4af7d}
        .crime-header{display:flex;align-items:center;gap:15px;padding:15px;cursor:pointer;transition:all .3s}
        .crime-header:hover{background:rgba(212,175,125,.1)}
        .crime-icon{width:40px;height:40px;min-width:40px;background:rgba(212,175,125,.3);border:1px solid rgba(212,175,125,.5);border-radius:8px;display:flex;align-items:center;justify-content:center}
        .crime-icon svg{width:20px;height:20px;stroke:#d4af7d}
        .crime-info{flex:1}
        .crime-info h6{font-family:'Cinzel',serif;color:#d4af7d;font-size:.85em;letter-spacing:1px;margin-bottom:4px}
        .crime-info p{color:rgba(255,255,255,.5);font-size:.8em;line-height:1.4;margin:0}
        .crime-toggle{color:rgba(212,175,125,.5);transition:transform .3s}
        .crime-card.open .crime-toggle{transform:rotate(180deg)}
        .crime-toggle svg{width:20px;height:20px}
        .crime-manual{display:none;padding:20px;background:rgba(0,0,0,.2);border-top:1px solid rgba(212,175,125,.2)}
        .crime-card.open .crime-manual{display:block}
        .manual-section{margin-bottom:20px}
        .manual-section:last-child{margin-bottom:0}
        .manual-section h5{font-family:'Cinzel',serif;color:#d4af7d;font-size:.8em;letter-spacing:1px;margin-bottom:10px;display:flex;align-items:center;gap:8px}
        .manual-section h5 svg{width:16px;height:16px}
        .manual-section p{color:rgba(255,255,255,.7);font-size:.85em;line-height:1.6;margin:0}
        .manual-section ul{list-style:none;padding:0;margin:0}
        .manual-section li{color:rgba(255,255,255,.6);font-size:.85em;padding:8px 12px;background:rgba(212,175,125,.05);border-left:2px solid rgba(212,175,125,.3);margin-bottom:6px;line-height:1.5}
        .manual-section li:last-child{margin-bottom:0}
        .manual-exemplo{background:rgba(212,175,125,.1);border:1px solid rgba(212,175,125,.2);border-radius:6px;padding:12px 15px;font-style:italic;color:rgba(255,255,255,.8);font-size:.85em;line-height:1.6}
        .manual-codigo{background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.2);border-radius:6px;padding:15px}
        .manual-codigo p{color:#d4af7d;font-family:'Cinzel',serif;font-size:.85em;letter-spacing:.5px;margin-bottom:8px;padding-left:15px;border-left:2px solid #d4af7d}
        .manual-codigo p:last-child{margin-bottom:0}
        .crimes-footer{background:rgba(212,175,125,.1);border:1px solid rgba(212,175,125,.2);border-radius:6px;padding:15px;text-align:center}
        .crimes-footer p{color:rgba(255,255,255,.6);font-size:.85em;line-height:1.6;margin:0}
        .crimes-footer strong{color:#d4af7d}
        /* TOJI EXPANDIDO */
        .traco-missao{margin-top:12px;padding-top:12px;border-top:1px solid rgba(212,175,125,.1)}
        .traco-missao input{width:100%;background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.2);border-radius:4px;padding:8px 12px;color:#e0e0e0;font-size:.85em}
        .traco-missao input::placeholder{color:rgba(255,255,255,.3)}
        .traco-nota{margin-top:8px;font-size:.75em;color:rgba(255,255,255,.4);font-style:italic}
        .bloco-objetivo{color:rgba(255,255,255,.6);margin-bottom:20px;font-size:.9em;line-height:1.5}
        .bloco-section{margin-bottom:20px}
        .bloco-section h4{font-family:'Cinzel',serif;font-size:.9em;color:#d4af7d;letter-spacing:1px;margin-bottom:12px;text-transform:uppercase}
        .missao-semanal{background:rgba(212,175,125,.05);border-left:3px solid rgba(212,175,125,.3);padding:10px 15px;margin-bottom:8px;display:flex;align-items:center;gap:12px}
        .missao-semana{font-size:.75em;color:rgba(212,175,125,.7);min-width:70px}
        .missao-desc{color:rgba(255,255,255,.6);font-size:.85em}
        .bloco-anotacoes{margin-top:20px}
        .bloco-anotacoes h4{font-family:'Cinzel',serif;font-size:.9em;color:#d4af7d;letter-spacing:1px;margin-bottom:10px}
        .bloco-anotacoes textarea{width:100%;min-height:80px;background:rgba(0,0,0,.3);border:1px solid rgba(212,175,125,.2);border-radius:4px;padding:12px;color:#e0e0e0;font-size:.85em;resize:vertical;font-family:inherit}
        .bloco-anotacoes textarea::placeholder{color:rgba(255,255,255,.3)}
    </style>
</head>
<body>
    <nav class="sidebar">
        <a href="index.html" class="sidebar-logo">Z</a>
        <div class="sidebar-menu">
            <a href="index.html"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg><span>Inicio</span></a>
            <a href="saude.html"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg><span>Saude</span></a>
            <a href="financeiro.html"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg><span>Financeiro</span></a>
            <a href="profissional.html"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg><span>Profissional</span></a>
            <div class="sidebar-divider"></div>
            <a href="comando.html" class="active"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg><span>Comando</span></a>
        </div>
        <div class="sidebar-footer"><p><span class="instituto">ZARA</span>Private Access</p></div>
    </nav>
    <nav class="mobile-nav">
        <div class="mobile-nav-items">
            <a href="index.html" class="mobile-nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>Inicio</a>
            <a href="saude.html" class="mobile-nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>Saude</a>
            <a href="financeiro.html" class="mobile-nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>Financeiro</a>
            <a href="profissional.html" class="mobile-nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>Prof.</a>
            <a href="comando.html" class="mobile-nav-item active"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>Comando</a>
        </div>
    </nav>
    <div class="main-container">
        <div class="identity-card">
            <p class="identity-text">"Eu sou perigoso porque domino minha mente.<span>Eu sou livre porque ningu√©m me controla."</span></p>
        </div>
        <div class="container">
            <div class="header">
                <span class="header-date" id="currentDate"></span>
                <h1>Painel de Guerra</h1>
                <p>Centro de Comando ‚Ä¢ Evolu√ß√£o Estrat√©gica</p>
            </div>
            <div class="tabs-container">
                <div class="tabs-header">
                    <button class="tab-btn active" onclick="switchTab('status')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg><span>Status de Guerra</span></button>
                    <button class="tab-btn" onclick="switchTab('missions')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg><span>Miss√µes</span></button>
                    <button class="tab-btn" onclick="switchTab('rituals')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg><span>Rituais</span></button>
                    <button class="tab-btn" onclick="switchTab('laws')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg><span>Leis do Poder</span></button>
                    <button class="tab-btn" onclick="switchTab('toji')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14.5 17.5L3 6V3h3l11.5 11.5M13 19l6-6M16 16l4 4M19 19l2 2"/></svg><span>TOJI</span></button>
                    <button class="tab-btn" onclick="switchTab('shelby')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="8" r="5"/><path d="M3 21v-2a7 7 0 0 1 7-7h4a7 7 0 0 1 7 7v2"/><line x1="12" y1="3" x2="12" y2="1"/></svg><span>SHELBY</span></button>
                </div>
            </div>
            <div class="tab-content active" id="tab-status">
                <div class="provocation-card">
                    <div class="provocation-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg></div>
                    <p class="provocation-text" id="dailyProvocation" onclick="setRandomProvocation()">"Voc√™ j√° matou o fraco hoje?"</p>
                    <p class="provocation-subtext">Clique para sortear outra provoca√ß√£o</p>
                    <div class="provocation-actions">
                        <button class="btn-blood" onclick="openCutModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>Registrar Corte do Dia</button>
                        <button class="btn-gold" onclick="openVictoryModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>Relatar Vit√≥ria do Dia</button>
                    </div>
                </div>
                <h3 class="status-section-title">Indicadores de Combate</h3>
                <div class="status-grid">
                    <div class="status-card">
                        <div class="status-card-header"><div class="status-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg></div><span class="status-card-title">Disciplina</span></div>
                        <div class="discipline-input"><input type="range" id="disciplineRange" min="0" max="100" value="75" oninput="updateDiscipline(this.value)"><span id="disciplineValue">75%</span></div>
                        <div class="progress-bar" style="margin-top:10px"><div class="progress-fill" id="disciplineBar" style="width:75%"></div></div>
                        <p class="status-phrase" id="disciplinePhrase">Mantenha a guarda erguida.</p>
                    </div>
                    <div class="status-card">
                        <div class="status-card-header"><div class="status-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg></div><span class="status-card-title">Foco</span></div>
                        <select class="status-select" id="focusSelect" onchange="updateFocus(this.value)"><option value="fraco">Fraco</option><option value="moderado" selected>Moderado</option><option value="afiado">Afiado</option></select>
                        <p class="status-phrase caution" id="focusPhrase">Voc√™ ainda se distrai com lixo.</p>
                    </div>
                    <div class="status-card">
                        <div class="status-card-header"><div class="status-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2c1 3 2.5 3.5 3.5 4.5A5 5 0 0 1 17 10c0 3.5-2.5 6-5 8-2.5-2-5-4.5-5-8a5 5 0 0 1 1.5-3.5C9.5 5.5 11 5 12 2z"/></svg></div><span class="status-card-title">Esp√≠rito</span></div>
                        <select class="status-select" id="spiritSelect" onchange="updateSpirit(this.value)"><option value="seco">Seco</option><option value="vivo" selected>Vivo</option><option value="blindado">Blindado</option></select>
                        <p class="status-phrase positive" id="spiritPhrase">Continue regando o fogo.</p>
                    </div>
                    <div class="status-card">
                        <div class="status-card-header"><div class="status-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 8v4M12 16h.01"/></svg></div><span class="status-card-title">Perigo</span></div>
                        <select class="status-select" id="dangerSelect" onchange="updateDanger(this.value)"><option value="baixo">Baixo</option><option value="medio" selected>M√©dio</option><option value="alto">Alto</option></select>
                        <p class="status-phrase caution" id="dangerPhrase">Voc√™ ainda √© previs√≠vel.</p>
                    </div>
                </div>
                <div class="history-section">
                    <h3 class="history-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>Registro de Guerra ‚Äî √öltimos 7 Dias</h3>
                    <div class="history-list" id="historyList"></div>
                </div>
            </div>
            <div class="tab-content" id="tab-missions"><div class="missions-grid" id="missionsList"></div><div style="text-align:center;margin-top:25px"><button class="btn-secondary" onclick="openMissionModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px;vertical-align:middle;margin-right:8px"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>Nova Miss√£o</button></div></div>
            <div class="tab-content" id="tab-rituals">
                <div class="rituals-section"><div class="rituals-header"><h3 class="rituals-title">Rituais Di√°rios</h3><button class="btn-icon" onclick="openRitualModal('diario')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg></button></div><div class="rituals-list" id="dailyRitualsList"></div></div>
                <div class="rituals-section"><div class="rituals-header"><h3 class="rituals-title">Rituais Semanais</h3><button class="btn-icon" onclick="openRitualModal('semanal')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg></button></div><div class="rituals-list" id="weeklyRitualsList"></div></div>
            </div>
            <div class="tab-content" id="tab-laws"><div class="law-week-card" id="lawWeekCard"></div><div class="laws-filter"><button class="filter-btn active" onclick="filterLaws('todas')">Todas</button><button class="filter-btn" onclick="filterLaws('aplicadas')">Aplicadas</button><button class="filter-btn" onclick="filterLaws('pendentes')">Pendentes</button><button class="filter-btn" onclick="filterLaws('favoritas')">Favoritas</button></div><div class="laws-list" id="lawsList"></div></div>
            <!-- ABA TOJI -->
            <div class="tab-content" id="tab-toji">
                <div class="toji-header">
                    <h2 class="toji-title">TOJI</h2>
                    <p class="toji-subtitle">Caminho do Predador Silencioso</p>
                    <p class="toji-frase">"For√ßa √© tudo. Emo√ß√£o √© ru√≠do."</p>
                    <div class="essencia-container">
                        <span class="essencia-label">ESS√äNCIA TOJI</span>
                        <div class="radial-progress">
                            <svg viewBox="0 0 150 150" width="120" height="120">
                                <defs><linearGradient id="tojiGrad" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#c9a066"/><stop offset="100%" style="stop-color:#c9a066"/></linearGradient></defs>
                                <circle cx="75" cy="75" r="60" fill="none" stroke="rgba(212,175,125,0.2)" stroke-width="8"/>
                                <circle id="essenciaCircle" cx="75" cy="75" r="60" fill="none" stroke="url(#tojiGrad)" stroke-width="8" stroke-linecap="round" stroke-dasharray="377" stroke-dashoffset="377" transform="rotate(-90 75 75)"/>
                            </svg>
                            <div class="radial-value" id="essenciaValor">0%</div>
                        </div>
                    </div>
                </div>
                <div class="toji-section">
                    <h3 class="toji-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:20px;height:20px"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg> TRA√áOS TOJI</h3>
                    <div class="tracos-grid" id="tracosGrid"></div>
                </div>
                <div class="toji-section">
                    <h3 class="toji-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:20px;height:20px"><path d="M14.5 17.5L3 6V3h3l11.5 11.5M13 19l6-6"/></svg> PLANO DE 1 ANO ‚Äî O CAMINHO TOJI</h3>
                    <div id="blocosContainer"></div>
                </div>
                <div class="toji-section">
                    <h3 class="toji-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:20px;height:20px"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg> RITUAIS DI√ÅRIOS DO PREDADOR</h3>
                    <div id="rituaisToji"></div>
                    <div class="ritual-progress-toji"><span id="rituaisTojProgress">0 / 5 rituais hoje</span></div>
                </div>
                <div class="toji-section">
                    <h3 class="toji-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:20px;height:20px"><path d="M18 6L6 18M6 6l12 12"/></svg> CORTE DI√ÅRIO</h3>
                    <div class="corte-input-toji">
                        <input type="text" id="corteInputToji" placeholder="O que voc√™ cortou hoje? (pensamento, h√°bito, pessoa...)">
                        <button class="btn-corte" onclick="adicionarCorteToji()">CORTAR</button>
                    </div>
                    <div id="cortesListaToji"></div>
                </div>
                <div class="selo-predador" id="seloPredador">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M9 12l2 2 4-4"/></svg>
                    <h2>PREDADOR FORMADO</h2>
                    <p>Voc√™ completou o Caminho Toji. A for√ßa est√° em voc√™.</p>
                </div>
            </div>
            <!-- ABA SHELBY -->
            <div class="tab-content" id="tab-shelby">
                <div class="shelby-header">
                    <h2 class="shelby-title">THOMAS SHELBY</h2>
                    <p class="shelby-subtitle">PLANO DE 1 ANO</p>
                    <p class="shelby-frase">"Voc√™ pode me chamar de l√≠der, mas saiba que eu comando porque ningu√©m tem coragem de fazer o que eu fa√ßo."</p>
                </div>
                <!-- LADO TOGGLE -->
                <div class="shelby-lado-toggle">
                    <button class="lado-btn active" onclick="toggleLadoShelby('licito')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
                        LADO L√çCITO
                    </button>
                    <button class="lado-btn" onclick="toggleLadoShelby('ilicito')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                        LADO IL√çCITO
                    </button>
                </div>
                <!-- LADO L√çCITO -->
                <div class="shelby-lado" id="ladoLicito">
                    <div class="lado-header licito">
                        <h3>O ESTRATEGISTA IMPERIAL</h3>
                        <p>Vis√£o ‚Ä¢ Intelig√™ncia ‚Ä¢ Imagem ‚Ä¢ Influ√™ncia ‚Ä¢ Expans√£o</p>
                    </div>
                    <div class="shelby-section">
                        <h4 class="section-title-shelby"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg> TRA√áOS L√çCITOS SHELBY</h4>
                        <div id="tracosLicitosGrid" class="tracos-shelby-grid"></div>
                    </div>
                    <div class="shelby-section">
                        <h4 class="section-title-shelby"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg> FASES DO ANO ‚Äî LADO L√çCITO</h4>
                        <div id="fasesLicitasContainer"></div>
                    </div>
                    <div class="shelby-section">
                        <h4 class="section-title-shelby"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> CHECKLIST DE COMANDO PESSOAL</h4>
                        <div id="checklistComandoContainer"></div>
                    </div>
                    <div class="shelby-section">
                        <h4 class="section-title-shelby"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg> LEITURA OBRIGAT√ìRIA</h4>
                        <div id="leiturasContainer" class="leituras-grid"></div>
                    </div>
                    <div class="shelby-section">
                        <h4 class="section-title-shelby"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg> EST√âTICA DE PODER</h4>
                        <div class="estetica-grid">
                            <div class="estetica-item"><h5>VESTIMENTA</h5><p>Roupas escuras, bem cortadas. Sobretudo como armadura. Nada casual, tudo intencional.</p></div>
                            <div class="estetica-item"><h5>LINGUAGEM CORPORAL</h5><p>Movimentos lentos, deliberados. Nunca demonstrar pressa. Olhar fixo, sem desviar primeiro.</p></div>
                            <div class="estetica-item"><h5>CONTROLE VOCAL</h5><p>Tom grave, pausado. Falar menos, impactar mais. Sil√™ncio como ferramenta de poder.</p></div>
                            <div class="estetica-item"><h5>IMAGEM COMO ARMADURA</h5><p>Cada detalhe comunica autoridade. Cabelo, postura, acess√≥rios ‚Äî nada √© acidente.</p></div>
                        </div>
                    </div>
                </div>
                <!-- LADO IL√çCITO -->
                <div class="shelby-lado hidden" id="ladoIlicito">
                    <div class="lado-header ilicito">
                        <h3>O GENERAL NA SOMBRA</h3>
                        <p>Guerra Psicol√≥gica ‚Ä¢ Manipula√ß√£o ‚Ä¢ Controle ‚Ä¢ Poder Invis√≠vel</p>
                    </div>
                    <!-- C√ìDIGO SHELBY FIXO -->
                    <div class="codigo-shelby">
                        <h5>C√ìDIGO SHELBY DA SOMBRA</h5>
                        <ul>
                            <li>Nunca amea√ßa, <strong>surpreenda</strong></li>
                            <li>Nunca reage, <strong>conduz</strong></li>
                            <li>Nunca explica, <strong>age</strong></li>
                            <li>Nunca pede, <strong>toma</strong></li>
                            <li>Nunca exp√µe, <strong>manipula</strong></li>
                        </ul>
                    </div>
                    <div class="shelby-section">
                        <h4 class="section-title-shelby ilicito"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg> TRA√áOS IL√çCITOS SHELBY</h4>
                        <div id="tracosIlicitosGrid" class="tracos-shelby-grid"></div>
                    </div>
                    <!-- AN√ÅLISE DO LADO IL√çCITO -->
                    <div class="shelby-section">
                        <h4 class="section-title-shelby ilicito"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg> AN√ÅLISE DO LADO IL√çCITO</h4>
                        <div class="analise-ilicita">
                            <p class="analise-quote">"Eu n√£o sou um criminoso. Eu sou um estrategista que opera onde o sistema n√£o alcan√ßa."</p>
                            <h5>RESUMO T√ÅTICO DO COMPORTAMENTO IL√çCITO</h5>
                            <div class="analise-pontos">
                                <div class="analise-ponto"><span class="ponto-num">1</span><div><strong>N√£o comete crimes por impulso. Constr√≥i sistemas.</strong><p>Thomas estrutura imp√©rios paralelos, com apar√™ncia legal, mas fun√ß√£o oculta. Age como um CEO do submundo.</p></div></div>
                                <div class="analise-ponto"><span class="ponto-num">2</span><div><strong>Comanda, n√£o executa.</strong><p>Terceiriza tudo. Cobra com frieza. Lealdade √© fun√ß√£o, n√£o afeto.</p></div></div>
                                <div class="analise-ponto"><span class="ponto-num">3</span><div><strong>Guerra Psicol√≥gica √© sua arma principal.</strong><p>Vence pela d√∫vida, pelo sil√™ncio, pelo dom√≠nio mental.</p></div></div>
                                <div class="analise-ponto"><span class="ponto-num">4</span><div><strong>Infiltra e domina.</strong><p>Entra como ningu√©m, sai como dono. Se espalha como v√≠rus.</p></div></div>
                                <div class="analise-ponto"><span class="ponto-num">5</span><div><strong>Usa o sistema legal como escudo.</strong><p>Conhece a lei melhor que os ju√≠zes. Opera dentro das brechas.</p></div></div>
                            </div>
                            <div class="analise-conclusao"><strong>CONCLUS√ÉO:</strong> O lado il√≠cito de Thomas √© estrutural, cir√∫rgico e invis√≠vel. √â poder sob disfarce.</div>
                        </div>
                    </div>
                    <!-- CRIMES DE THOMAS SHELBY -->
                    <div class="shelby-section">
                        <h4 class="section-title-shelby ilicito"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14.5 17.5L3 6V3h3l11.5 11.5M13 19l6-6M16 16l4 4M19 19l2 2"/></svg> PRINCIPAIS CRIMES COMETIDOS</h4>
                        <div class="crimes-grid" id="crimesGrid"></div>
                        <div class="crimes-footer"><p>Esses crimes n√£o eram cometidos por impulso, e sim por <strong>intelig√™ncia e prop√≥sito</strong>. Cada a√ß√£o servia ao imp√©rio, e cada viola√ß√£o da lei era, na pr√°tica, uma pe√ßa movida no tabuleiro de poder.</p></div>
                    </div>
                    <div class="shelby-section">
                        <h4 class="section-title-shelby ilicito"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg> FASES DO ANO ‚Äî LADO IL√çCITO</h4>
                        <div id="fasesIlicitasContainer"></div>
                    </div>
                    <div class="shelby-section">
                        <h4 class="section-title-shelby ilicito"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg> MISS√ïES SOMBRIAS SEMANAIS</h4>
                        <div id="missoesSombriasContainer"></div>
                    </div>
                    <div class="shelby-section">
                        <h4 class="section-title-shelby ilicito"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14.5 17.5L3 6V3h3l11.5 11.5"/></svg> OPERA√á√ÉO OCULTA ‚Äî PROVA FINAL</h4>
                        <div class="operacao-oculta">
                            <p>Criar um plano de impacto real no mundo. Executar silenciosamente. Ningu√©m pode saber que foi voc√™.</p>
                            <textarea id="operacaoOcultaTexto" placeholder="Descreva sua opera√ß√£o oculta..."></textarea>
                            <button class="btn-operacao" id="btnOperacao" onclick="concluirOperacaoOculta()">OPERA√á√ÉO CONCLU√çDA</button>
                        </div>
                    </div>
                </div>
                <!-- SELO SHELBY -->
                <div class="selo-shelby" id="seloShelby">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="8" r="5"/><path d="M3 21v-2a7 7 0 0 1 7-7h4a7 7 0 0 1 7 7v2"/></svg>
                    <h2>BY ORDER OF THE PEAKY BLINDERS</h2>
                    <p>Voc√™ completou o Plano Shelby. O imp√©rio √© seu.</p>
                </div>
            </div>
            <div class="footer-actions"><span class="reset-info"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>Reset autom√°tico: Segunda-feira, 05:00</span><button class="btn-primary" onclick="openExportModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px;vertical-align:middle;margin-right:8px"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>Exportar Relat√≥rio</button></div>
        </div>
    </div>
    <div class="modal-overlay" id="cutModal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Registrar Corte do Dia</h3><button class="modal-close" onclick="closeCutModal()">&times;</button></div><div class="form-group"><label>O que voc√™ cortou hoje?</label><input type="text" id="cutDescription" placeholder="Ex: Procrastina√ß√£o, pessoa t√≥xica..."></div><div class="form-group"><label>Categoria</label><select id="cutCategory"><option value="comportamento">Comportamento</option><option value="pensamento">Pensamento</option><option value="pessoa">Pessoa</option><option value="habito">H√°bito</option><option value="outro">Outro</option></select></div><div class="form-group"><label>Data</label><input type="date" id="cutDate"></div><div class="form-group"><label>Anota√ß√µes (opcional)</label><textarea id="cutNotes" rows="3" placeholder="Por que isso precisava ser cortado?"></textarea></div><div class="modal-buttons"><button class="btn-secondary" onclick="closeCutModal()">Cancelar</button><button class="btn-blood" onclick="saveCut()" style="padding:12px 25px">Registrar Corte</button></div></div></div>
    <div class="modal-overlay" id="victoryModal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Relatar Vit√≥ria do Dia</h3><button class="modal-close" onclick="closeVictoryModal()">&times;</button></div><div class="form-group"><label>O que voc√™ venceu hoje?</label><input type="text" id="victoryDescription" placeholder="Ex: Completei treino mesmo cansado..."></div><div class="form-group"><label>O que voc√™ resistiu?</label><input type="text" id="victoryResisted" placeholder="Ex: Tenta√ß√£o de desistir..."></div><div class="form-group"><label>Lei do Poder Aplicada</label><select id="victoryLaw"><option value="">Nenhuma</option></select></div><div class="form-group"><label>Data</label><input type="date" id="victoryDate"></div><div class="modal-buttons"><button class="btn-secondary" onclick="closeVictoryModal()">Cancelar</button><button class="btn-gold" onclick="saveVictory()" style="padding:12px 25px">Registrar Vit√≥ria</button></div></div></div>
    <div class="modal-overlay" id="missionModal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Nova Miss√£o Estrat√©gica</h3><button class="modal-close" onclick="closeMissionModal()">&times;</button></div><input type="hidden" id="missionId"><div class="form-group"><label>Tipo de Miss√£o</label><select id="missionType"><option value="corpo">Corpo</option><option value="mente">Mente</option><option value="espirito">Esp√≠rito</option></select></div><div class="form-group"><label>T√≠tulo</label><input type="text" id="missionTitle" placeholder="Ex: Dominar o f√≠sico"></div><div class="form-group"><label>Descri√ß√£o</label><textarea id="missionDescription" rows="3" placeholder="Descreva sua miss√£o..."></textarea></div><div class="modal-buttons"><button class="btn-secondary" onclick="closeMissionModal()">Cancelar</button><button class="btn-primary" onclick="saveMission()">Salvar</button></div></div></div>
    <div class="modal-overlay" id="ritualModal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Novo Ritual de For√ßa</h3><button class="modal-close" onclick="closeRitualModal()">&times;</button></div><input type="hidden" id="ritualId"><input type="hidden" id="ritualFrequency"><div class="form-group"><label>Nome do Ritual</label><input type="text" id="ritualName" placeholder="Ex: Medita√ß√£o matinal"></div><div class="form-group"><label>Hor√°rio (opcional)</label><input type="time" id="ritualTime"></div><div class="form-group"><label>√çcone</label><select id="ritualIcon"><option value="sun">‚òÄÔ∏è Sol</option><option value="moon">üåô Lua</option><option value="fire">üî• Fogo</option><option value="book">üìñ Livro</option><option value="run">üèÉ Exerc√≠cio</option><option value="meditate">üßò Medita√ß√£o</option><option value="write">‚úçÔ∏è Escrita</option></select></div><div class="modal-buttons"><button class="btn-secondary" onclick="closeRitualModal()">Cancelar</button><button class="btn-primary" onclick="saveRitual()">Salvar</button></div></div></div>
    <div class="modal-overlay" id="exportModal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Exportar Relat√≥rio de Guerra</h3><button class="modal-close" onclick="closeExportModal()">&times;</button></div><div class="form-group"><label>Formato de Exporta√ß√£o</label><select id="exportFormat"><option value="txt"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:14px;height:14px;vertical-align:middle;margin-right:5px"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><path d="M14 2v6h6"/><path d="M16 13H8"/><path d="M16 17H8"/><path d="M10 9H8"/></svg>TXT (Texto Puro)</option><option value="pdf"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:14px;height:14px;vertical-align:middle;margin-right:5px"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><path d="M14 2v6h6"/><path d="M16 13H8"/><path d="M16 17H8"/><path d="M10 9H8"/></svg>PDF (Documento)</option></select></div><div style="padding:15px;background:rgba(212,175,125,.1);border:1px solid rgba(212,175,125,.3);border-radius:8px;margin-bottom:15px;"><p style="font-size:.85em;color:rgba(255,255,255,.7);line-height:1.5;margin:0;font-style:italic;">"Quem n√£o sangra no treino, sangra no campo."</p></div><div class="modal-buttons"><button class="btn-secondary" onclick="closeExportModal()">Cancelar</button><button class="btn-primary" onclick="generateReport()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:16px;height:16px;vertical-align:middle;margin-right:5px"><path d="M14.5 17.5L3 6V3h3l11.5 11.5"/><path d="M13 19l6-6"/><path d="M16 16l4 4"/><path d="M19 21l2-2"/></svg>Gerar Relat√≥rio</button></div></div></div>
    <div class="toast" id="toast"></div>
    <script>
const STORAGE_KEY='painelGuerra';
const provocations=["Voc√™ j√° matou o fraco hoje?","O conforto √© o veneno do guerreiro.","Quem voc√™ foi ontem j√° morreu?","A dor que voc√™ evita √© o crescimento que voc√™ perde.","Voc√™ est√° construindo ou destruindo?","Seu maior inimigo acordou com voc√™.","O medo s√≥ existe se voc√™ aliment√°-lo.","Disciplina √© liberdade. Voc√™ √© livre?","O mundo n√£o deve nada a voc√™.","Sil√™ncio. Foco. Execu√ß√£o.","Voc√™ est√° ca√ßando ou sendo ca√ßado?","A mediocridade √© uma escolha di√°ria.","Ningu√©m vem te salvar. Levante.","O fraco reclama. O forte executa.","Cada desculpa √© uma derrota aceita.","Voc√™ est√° mais forte que ontem?","O tempo n√£o espera. Nem deveria."];
const statusPhrases={discipline:{low:"Voc√™ est√° perdendo terreno.",medium:"Mantenha a guarda erguida.",high:"O escudo est√° firme."},focus:{fraco:"Voc√™ ainda se distrai com lixo.",moderado:"A mira ainda treme.",afiado:"Um tiro, um alvo."},spirit:{seco:"A chama est√° morrendo.",vivo:"Continue regando o fogo.",blindado:"Nada penetra. Nada abala."},danger:{baixo:"Voc√™ est√° dom√©stico demais.",medio:"Voc√™ ainda √© previs√≠vel.",alto:"Eles temem o que n√£o entendem."}};
const laws48=[{number:1,title:"Nunca ofusque o brilho do mestre",description:"Fa√ßa sempre com que as pessoas acima de voc√™ se sintam superiores."},{number:2,title:"Nunca confie demais nos amigos",description:"Desconfie dos amigos, pois eles o trair√£o mais r√°pido."},{number:3,title:"Oculte suas inten√ß√µes",description:"Mantenha as pessoas sem saber para onde voc√™ est√° indo."},{number:4,title:"Sempre diga menos do que o necess√°rio",description:"Pessoas poderosas impressionam dizendo menos."},{number:5,title:"Proteja sua reputa√ß√£o com sua vida",description:"A reputa√ß√£o √© a pedra angular do poder."},{number:6,title:"Chame aten√ß√£o a qualquer pre√ßo",description:"O que n√£o √© visto conta como nada."},{number:7,title:"Fa√ßa os outros trabalharem para voc√™",description:"Use a sabedoria dos outros para avan√ßar sua causa."},{number:8,title:"Fa√ßa as pessoas virem at√© voc√™",description:"Quando voc√™ for√ßa o outro a agir, voc√™ est√° no controle."},{number:9,title:"Ven√ßa atrav√©s de a√ß√µes",description:"Demonstre, n√£o argumente."},{number:10,title:"Evite os infelizes e azarados",description:"Estados emocionais s√£o contagiosos."},{number:11,title:"Mantenha as pessoas dependentes de voc√™",description:"Quanto mais voc√™ √© confiado, mais liberdade voc√™ tem."},{number:12,title:"Use honestidade seletiva",description:"Um gesto sincero pode encobrir dezenas de desonestos."},{number:13,title:"Apele para o interesse pr√≥prio",description:"N√£o lembre favores passados."},{number:14,title:"Seja um espi√£o",description:"Saber sobre seu rival √© cr√≠tico."},{number:15,title:"Esmague seu inimigo totalmente",description:"Um inimigo temido deve ser esmagado completamente."},{number:16,title:"Use a aus√™ncia para aumentar respeito",description:"Muito circulando far√° voc√™ desvalorizar."},{number:17,title:"Cultive imprevisibilidade",description:"Seja deliberadamente imprevis√≠vel."},{number:18,title:"N√£o construa fortalezas",description:"O isolamento o exp√µe a mais perigos."},{number:19,title:"Saiba com quem est√° lidando",description:"Nunca assuma que todos reagem igual."},{number:20,title:"N√£o se comprometa com ningu√©m",description:"√â tolice apressar-se a tomar um lado."},{number:21,title:"Jogue de bobo para pegar um esperto",description:"Fa√ßa suas v√≠timas se sentirem espertas."},{number:22,title:"Use a t√°tica da rendi√ß√£o",description:"A rendi√ß√£o lhe d√° tempo para se recuperar."},{number:23,title:"Concentre suas for√ßas",description:"Encontre uma mina rica e minere-a mais profundamente."},{number:24,title:"Jogue o cortes√£o perfeito",description:"Domine a arte da indire√ß√£o."},{number:25,title:"Recrie-se",description:"Forje uma nova identidade que comanda aten√ß√£o."},{number:26,title:"Mantenha suas m√£os limpas",description:"Suas m√£os nunca s√£o sujas por erros."},{number:27,title:"Jogue com a necessidade de acreditar",description:"Torne-se o ponto focal do desejo de crer."},{number:28,title:"Entre na a√ß√£o com ousadia",description:"A timidez √© perigosa."},{number:29,title:"Planeje todo o caminho at√© o fim",description:"O final √© tudo."},{number:30,title:"Fa√ßa parecer sem esfor√ßo",description:"Esconda todo o trabalho duro."},{number:31,title:"Controle as op√ß√µes",description:"Fa√ßa os outros jogarem com suas cartas."},{number:32,title:"Jogue com as fantasias",description:"A verdade √© frequentemente evitada."},{number:33,title:"Descubra o ponto fraco",description:"Todos t√™m uma fraqueza."},{number:34,title:"Aja como rei",description:"A maneira como voc√™ se comporta determina como √© tratado."},{number:35,title:"Domine a arte do timing",description:"Nunca pare√ßa ter pressa."},{number:36,title:"Despreze o que n√£o pode ter",description:"Ignorar √© a melhor vingan√ßa."},{number:37,title:"Crie espet√°culos convincentes",description:"Gestos simb√≥licos grandiosos criam aura de poder."},{number:38,title:"Pense como quiser, comporte-se como os outros",description:"N√£o ostente ideias n√£o convencionais."},{number:39,title:"Agite a √°gua para pegar o peixe",description:"Deixe seus inimigos com raiva enquanto permanece calmo."},{number:40,title:"Despreze a refei√ß√£o gr√°tis",description:"O que √© oferecido de gra√ßa √© perigoso."},{number:41,title:"Evite pisar nos sapatos de um grande homem",description:"Suceder um grande homem exige o dobro."},{number:42,title:"Ataque o pastor",description:"Identifique e neutralize o l√≠der."},{number:43,title:"Trabalhe nos cora√ß√µes e mentes",description:"Seduza os outros a querer se mover em sua dire√ß√£o."},{number:44,title:"Desarme com o efeito espelho",description:"Espelhe seus inimigos para confundi-los."},{number:45,title:"Pregue mudan√ßa, mas nunca reforme demais",description:"Muita inova√ß√£o √© traum√°tica."},{number:46,title:"Nunca pare√ßa perfeito demais",description:"A inveja cria inimigos silenciosos."},{number:47,title:"Na vit√≥ria, aprenda quando parar",description:"A arrog√¢ncia pode empurr√°-lo al√©m da meta."},{number:48,title:"Assuma forma sem forma",description:"Mantenha-se adapt√°vel e em movimento."}];
let data={status:{discipline:75,focus:'moderado',spirit:'vivo',danger:'medio'},missions:[{id:1,type:'corpo',title:'Dominar o F√≠sico',description:'Treinar com consist√™ncia e disciplina.',weeklyChecks:{seg:false,ter:false,qua:false,qui:false,sex:false,sab:false,dom:false}},{id:2,type:'mente',title:'Expandir o Conhecimento',description:'Leitura di√°ria e estudo de estrat√©gia.',weeklyChecks:{seg:false,ter:false,qua:false,qui:false,sex:false,sab:false,dom:false}},{id:3,type:'espirito',title:'Fortalecer a Mente',description:'Medita√ß√£o e controle emocional.',weeklyChecks:{seg:false,ter:false,qua:false,qui:false,sex:false,sab:false,dom:false}}],rituals:{daily:[{id:1,name:'Acordar √†s 5h',time:'05:00',icon:'sun',completed:false},{id:2,name:'Medita√ß√£o matinal',time:'05:30',icon:'meditate',completed:false},{id:3,name:'Leitura estrat√©gica',time:'06:00',icon:'book',completed:false},{id:4,name:'Treino f√≠sico',time:'07:00',icon:'run',completed:false},{id:5,name:'Revis√£o do dia',time:'22:00',icon:'write',completed:false}],weekly:[{id:6,name:'Planejamento semanal',time:null,icon:'write',completed:false},{id:7,name:'An√°lise de resultados',time:null,icon:'book',completed:false}]},laws:laws48.map(l=>({...l,applied:false,favorite:false,notes:''})),lawOfTheWeek:1,warHistory:[],lastReset:null};
function init(){loadData();checkWeeklyReset();updateDate();setRandomProvocation();populateLawsDropdown();renderAll();setInterval(checkWeeklyReset,60000);}
function loadData(){const saved=localStorage.getItem(STORAGE_KEY);if(saved){const parsed=JSON.parse(saved);data={...data,...parsed,laws:data.laws.map((law,i)=>({...law,...(parsed.laws?.[i]||{})}))};if(!data.warHistory)data.warHistory=[];}}
function saveData(){localStorage.setItem(STORAGE_KEY,JSON.stringify(data));}
function updateDate(){const now=new Date();document.getElementById('currentDate').textContent=now.toLocaleDateString('pt-BR',{weekday:'long',day:'numeric',month:'long',year:'numeric'});}
function setRandomProvocation(){document.getElementById('dailyProvocation').textContent=`"${provocations[Math.floor(Math.random()*provocations.length)]}"`;}
function populateLawsDropdown(){const select=document.getElementById('victoryLaw');select.innerHTML='<option value="">Nenhuma</option>';laws48.forEach(law=>{const option=document.createElement('option');option.value=law.number;option.textContent=`Lei ${law.number}: ${law.title}`;select.appendChild(option);});}
function checkWeeklyReset(){const now=new Date();if(now.getDay()===1&&now.getHours()===5){const today=now.toDateString();if(data.lastReset!==today){performWeeklyReset();data.lastReset=today;saveData();}}}
function performWeeklyReset(){data.missions.forEach(m=>{m.weeklyChecks={seg:false,ter:false,qua:false,qui:false,sex:false,sab:false,dom:false};});data.rituals.daily.forEach(r=>{r.completed=false;});data.rituals.weekly.forEach(r=>{r.completed=false;});const pending=data.laws.filter(l=>!l.applied);data.lawOfTheWeek=pending.length>0?pending[Math.floor(Math.random()*pending.length)].number:Math.floor(Math.random()*48)+1;showToast('Reset semanal!','success');renderAll();}
function switchTab(tabName){document.querySelectorAll('.tab-btn').forEach(btn=>btn.classList.remove('active'));document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));event.target.closest('.tab-btn').classList.add('active');document.getElementById('tab-'+tabName).classList.add('active');}
function updateDiscipline(value){data.status.discipline=parseInt(value);document.getElementById('disciplineValue').textContent=value+'%';document.getElementById('disciplineBar').style.width=value+'%';const phraseEl=document.getElementById('disciplinePhrase');phraseEl.className='status-phrase';if(value<40){phraseEl.textContent=statusPhrases.discipline.low;phraseEl.classList.add('warning');}else if(value<75){phraseEl.textContent=statusPhrases.discipline.medium;phraseEl.classList.add('caution');}else{phraseEl.textContent=statusPhrases.discipline.high;phraseEl.classList.add('positive');}saveData();}
function updateFocus(value){data.status.focus=value;const phraseEl=document.getElementById('focusPhrase');phraseEl.className='status-phrase';phraseEl.textContent=statusPhrases.focus[value];if(value==='fraco')phraseEl.classList.add('warning');else if(value==='moderado')phraseEl.classList.add('caution');else phraseEl.classList.add('positive');saveData();}
function updateSpirit(value){data.status.spirit=value;const phraseEl=document.getElementById('spiritPhrase');phraseEl.className='status-phrase';phraseEl.textContent=statusPhrases.spirit[value];if(value==='seco')phraseEl.classList.add('warning');else phraseEl.classList.add('positive');saveData();}
function updateDanger(value){data.status.danger=value;const phraseEl=document.getElementById('dangerPhrase');phraseEl.className='status-phrase';phraseEl.textContent=statusPhrases.danger[value];if(value==='baixo')phraseEl.classList.add('warning');else if(value==='medio')phraseEl.classList.add('caution');else phraseEl.classList.add('positive');saveData();}
function renderStatus(){document.getElementById('disciplineRange').value=data.status.discipline;updateDiscipline(data.status.discipline);document.getElementById('focusSelect').value=data.status.focus;updateFocus(data.status.focus);document.getElementById('spiritSelect').value=data.status.spirit;updateSpirit(data.status.spirit);document.getElementById('dangerSelect').value=data.status.danger;updateDanger(data.status.danger);}
function openCutModal(){document.getElementById('cutModal').classList.add('active');document.getElementById('cutDate').value=new Date().toISOString().split('T')[0];document.getElementById('cutDescription').value='';document.getElementById('cutCategory').value='comportamento';document.getElementById('cutNotes').value='';}
function closeCutModal(){document.getElementById('cutModal').classList.remove('active');}
function saveCut(){const description=document.getElementById('cutDescription').value.trim();const category=document.getElementById('cutCategory').value;const date=document.getElementById('cutDate').value;const notes=document.getElementById('cutNotes').value.trim();if(!description){showToast('Descreva o corte','error');return;}let entry=data.warHistory.find(h=>h.date===date);if(!entry){entry={id:Date.now(),date,cut:null,victory:null};data.warHistory.push(entry);}entry.cut={description,category,notes};data.warHistory.sort((a,b)=>new Date(b.date)-new Date(a.date));data.warHistory=data.warHistory.slice(0,30);saveData();renderHistory();closeCutModal();showToast('Corte registrado!','success');}
function openVictoryModal(){document.getElementById('victoryModal').classList.add('active');document.getElementById('victoryDate').value=new Date().toISOString().split('T')[0];document.getElementById('victoryDescription').value='';document.getElementById('victoryResisted').value='';document.getElementById('victoryLaw').value='';}
function closeVictoryModal(){document.getElementById('victoryModal').classList.remove('active');}
function saveVictory(){const description=document.getElementById('victoryDescription').value.trim();const resisted=document.getElementById('victoryResisted').value.trim();const lawApplied=document.getElementById('victoryLaw').value;const date=document.getElementById('victoryDate').value;if(!description){showToast('Descreva a vit√≥ria','error');return;}let entry=data.warHistory.find(h=>h.date===date);if(!entry){entry={id:Date.now(),date,cut:null,victory:null};data.warHistory.push(entry);}entry.victory={description,resisted,lawApplied:lawApplied?parseInt(lawApplied):null};data.warHistory.sort((a,b)=>new Date(b.date)-new Date(a.date));data.warHistory=data.warHistory.slice(0,30);saveData();renderHistory();closeVictoryModal();showToast('Vit√≥ria registrada!','success');}
function renderHistory(){const container=document.getElementById('historyList');const last7=data.warHistory.slice(0,7);if(last7.length===0){container.innerHTML='<div class="history-empty">Nenhum registro ainda. Comece registrando um corte ou vit√≥ria.</div>';return;}const daysOfWeek=['Dom','Seg','Ter','Qua','Qui','Sex','S√°b'];container.innerHTML=last7.map(entry=>{const dateObj=new Date(entry.date+'T12:00:00');const dayName=daysOfWeek[dateObj.getDay()];const dayNum=dateObj.getDate();const month=dateObj.toLocaleDateString('pt-BR',{month:'short'});const lawInfo=entry.victory?.lawApplied?laws48.find(l=>l.number===entry.victory.lawApplied):null;return`<div class="history-item"><div class="history-date">${dayNum} ${month}<small>${dayName}</small></div><div class="history-cut"><span class="history-cut-label">Corte</span><span class="history-cut-value">${entry.cut?.description||'‚Äî'}</span></div><div class="history-victory"><span class="history-victory-label">Vit√≥ria</span><span class="history-victory-value">${entry.victory?.description||'‚Äî'}</span></div><div class="history-law">${lawInfo?`<span class="history-law-number">${lawInfo.number}</span><span class="history-law-title">${lawInfo.title}</span>`:'<span style="color:rgba(255,255,255,.3);font-size:.85em">‚Äî</span>'}</div><div class="history-actions"><button class="btn-icon" onclick="editHistoryEntry('${entry.date}')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button></div></div>`;}).join('');}
function editHistoryEntry(date){const entry=data.warHistory.find(h=>h.date===date);if(!entry)return;if(entry.cut){document.getElementById('cutDescription').value=entry.cut.description||'';document.getElementById('cutCategory').value=entry.cut.category||'comportamento';document.getElementById('cutDate').value=date;document.getElementById('cutNotes').value=entry.cut.notes||'';document.getElementById('cutModal').classList.add('active');}else{openCutModal();document.getElementById('cutDate').value=date;}}
function renderMissions(){const container=document.getElementById('missionsList');const icons={corpo:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="5" r="3"/><path d="M12 8v8"/><path d="M8 14l4 4 4-4"/></svg>',mente:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2a8 8 0 0 1 8 8c0 5.33-8 12-8 12S4 15.33 4 10a8 8 0 0 1 8-8z"/><circle cx="12" cy="10" r="3"/></svg>',espirito:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2c1 3 2.5 3.5 3.5 4.5A5 5 0 0 1 17 10c0 3.5-2.5 6-5 8-2.5-2-5-4.5-5-8a5 5 0 0 1 1.5-3.5C9.5 5.5 11 5 12 2z"/></svg>'};const typeLabels={corpo:'Corpo',mente:'Mente',espirito:'Esp√≠rito'};const days=['seg','ter','qua','qui','sex','sab','dom'];const dayLabels={seg:'S',ter:'T',qua:'Q',qui:'Q',sex:'S',sab:'S',dom:'D'};container.innerHTML=data.missions.map(mission=>`<div class="mission-card"><div class="mission-card-header ${mission.type}"><div class="mission-info"><div class="mission-type">${typeLabels[mission.type]}</div><div class="mission-title">${mission.title}</div></div><div class="mission-icon">${icons[mission.type]}</div></div><div class="mission-card-body"><p class="mission-description">${mission.description}</p><div class="weekly-checks">${days.map(day=>`<div class="day-check"><label>${dayLabels[day]}</label><input type="checkbox" ${mission.weeklyChecks[day]?'checked':''} onchange="toggleMissionDay(${mission.id},'${day}')"></div>`).join('')}</div></div><div class="mission-card-footer"><button class="btn-icon" onclick="editMission(${mission.id})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button><button class="btn-icon delete" onclick="deleteMission(${mission.id})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button></div></div>`).join('');}
function toggleMissionDay(missionId,day){const mission=data.missions.find(m=>m.id===missionId);if(mission){mission.weeklyChecks[day]=!mission.weeklyChecks[day];saveData();}}
function openMissionModal(missionId=null){const modal=document.getElementById('missionModal');document.getElementById('missionId').value=missionId||'';if(missionId){const mission=data.missions.find(m=>m.id===missionId);document.getElementById('missionType').value=mission.type;document.getElementById('missionTitle').value=mission.title;document.getElementById('missionDescription').value=mission.description;}else{document.getElementById('missionType').value='corpo';document.getElementById('missionTitle').value='';document.getElementById('missionDescription').value='';}modal.classList.add('active');}
function closeMissionModal(){document.getElementById('missionModal').classList.remove('active');}
function saveMission(){const id=document.getElementById('missionId').value;const type=document.getElementById('missionType').value;const title=document.getElementById('missionTitle').value.trim();const description=document.getElementById('missionDescription').value.trim();if(!title){showToast('Preencha o t√≠tulo','error');return;}if(data.missions.length>=3&&!id){showToast('M√°ximo de 3 miss√µes','error');return;}if(id){const mission=data.missions.find(m=>m.id===parseInt(id));mission.type=type;mission.title=title;mission.description=description;}else{data.missions.push({id:Math.max(...data.missions.map(m=>m.id),0)+1,type,title,description,weeklyChecks:{seg:false,ter:false,qua:false,qui:false,sex:false,sab:false,dom:false}});}saveData();renderMissions();closeMissionModal();showToast('Miss√£o salva!','success');}
function editMission(id){openMissionModal(id);}
function deleteMission(id){if(confirm('Excluir miss√£o?')){data.missions=data.missions.filter(m=>m.id!==id);saveData();renderMissions();showToast('Exclu√≠da','success');}}
function renderRituals(){const iconsSvg={sun:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>',moon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>',fire:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2c1 3 2.5 3.5 3.5 4.5A5 5 0 0 1 17 10c0 3.5-2.5 6-5 8-2.5-2-5-4.5-5-8a5 5 0 0 1 1.5-3.5C9.5 5.5 11 5 12 2z"/></svg>',book:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>',run:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="5" r="2"/><path d="M4 17l4-4 4 4 4-4 4 4"/><line x1="12" y1="7" x2="12" y2="13"/></svg>',meditate:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="6" r="3"/><path d="M12 9v4"/><path d="M5 21c0-4 3-7 7-7s7 3 7 7"/></svg>',write:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>'};const renderList=(rituals,listId)=>{const container=document.getElementById(listId);if(rituals.length===0){container.innerHTML='<div style="text-align:center;color:rgba(255,255,255,.4);padding:20px">Nenhum ritual</div>';return;}container.innerHTML=rituals.map(ritual=>`<div class="ritual-item ${ritual.completed?'completed':''}"><input type="checkbox" class="ritual-check" ${ritual.completed?'checked':''} onchange="toggleRitual(${ritual.id})"><div class="ritual-icon">${iconsSvg[ritual.icon]||iconsSvg.fire}</div><div class="ritual-info"><div class="ritual-name">${ritual.name}</div>${ritual.time?`<div class="ritual-time">${ritual.time}</div>`:''}</div><div class="ritual-actions"><button class="btn-icon" onclick="editRitual(${ritual.id})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button><button class="btn-icon delete" onclick="deleteRitual(${ritual.id})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button></div></div>`).join('');};renderList(data.rituals.daily,'dailyRitualsList');renderList(data.rituals.weekly,'weeklyRitualsList');}
function toggleRitual(id){let ritual=data.rituals.daily.find(r=>r.id===id)||data.rituals.weekly.find(r=>r.id===id);if(ritual){ritual.completed=!ritual.completed;saveData();renderRituals();}}
function openRitualModal(frequency,ritualId=null){const modal=document.getElementById('ritualModal');document.getElementById('ritualId').value=ritualId||'';document.getElementById('ritualFrequency').value=frequency;if(ritualId){const ritual=data.rituals.daily.find(r=>r.id===ritualId)||data.rituals.weekly.find(r=>r.id===ritualId);document.getElementById('ritualName').value=ritual.name;document.getElementById('ritualTime').value=ritual.time||'';document.getElementById('ritualIcon').value=ritual.icon;}else{document.getElementById('ritualName').value='';document.getElementById('ritualTime').value='';document.getElementById('ritualIcon').value='sun';}modal.classList.add('active');}
function closeRitualModal(){document.getElementById('ritualModal').classList.remove('active');}
function saveRitual(){const id=document.getElementById('ritualId').value;const frequency=document.getElementById('ritualFrequency').value;const name=document.getElementById('ritualName').value.trim();const time=document.getElementById('ritualTime').value||null;const icon=document.getElementById('ritualIcon').value;if(!name){showToast('Preencha o nome','error');return;}const list=frequency==='diario'?data.rituals.daily:data.rituals.weekly;if(id){const ritual=list.find(r=>r.id===parseInt(id));ritual.name=name;ritual.time=time;ritual.icon=icon;}else{const allRituals=[...data.rituals.daily,...data.rituals.weekly];list.push({id:Math.max(...allRituals.map(r=>r.id),0)+1,name,time,icon,completed:false});}saveData();renderRituals();closeRitualModal();showToast('Ritual salvo!','success');}
function editRitual(id){const isDaily=data.rituals.daily.some(r=>r.id===id);openRitualModal(isDaily?'diario':'semanal',id);}
function deleteRitual(id){if(confirm('Excluir ritual?')){data.rituals.daily=data.rituals.daily.filter(r=>r.id!==id);data.rituals.weekly=data.rituals.weekly.filter(r=>r.id!==id);saveData();renderRituals();showToast('Exclu√≠do','success');}}
let currentFilter='todas';
function renderLaws(){renderLawOfTheWeek();renderLawsList();}
function renderLawOfTheWeek(){const law=data.laws.find(l=>l.number===data.lawOfTheWeek);document.getElementById('lawWeekCard').innerHTML=`<span class="law-week-badge">Lei da Semana</span><div class="law-week-number">Lei ${law.number}</div><h2 class="law-week-title">${law.title}</h2><p class="law-week-description">${law.description}</p><div class="law-week-actions"><button class="btn-primary" onclick="applyLaw(${law.number})">Aplicar Hoje</button><button class="btn-secondary" onclick="changeLawOfWeek()">Sortear Nova Lei</button></div>`;}
function renderLawsList(){let filtered=data.laws;if(currentFilter==='aplicadas')filtered=data.laws.filter(l=>l.applied);else if(currentFilter==='pendentes')filtered=data.laws.filter(l=>!l.applied);else if(currentFilter==='favoritas')filtered=data.laws.filter(l=>l.favorite);if(filtered.length===0){document.getElementById('lawsList').innerHTML='<div style="text-align:center;color:rgba(255,255,255,.4);padding:40px">Nenhuma lei encontrada</div>';return;}document.getElementById('lawsList').innerHTML=filtered.map(law=>`<div class="law-item ${law.applied?'applied':''} ${law.favorite?'favorite':''}"><div class="law-item-header" onclick="toggleLawBody(${law.number})"><div class="law-item-info"><span class="law-number">${law.number}</span><span class="law-title">${law.title}</span></div><div class="law-item-actions"><span class="law-status-badge ${law.applied?'applied':'pending'}">${law.applied?'Aplicada':'Pendente'}</span><button class="btn-icon favorite ${law.favorite?'active':''}" onclick="event.stopPropagation();toggleFavorite(${law.number})"><svg viewBox="0 0 24 24" fill="${law.favorite?'currentColor':'none'}" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></button></div></div><div class="law-item-body" id="law-body-${law.number}"><p class="law-description">${law.description}</p><div class="law-notes"><label>Anota√ß√µes</label><textarea placeholder="Insights, vit√≥rias, falhas..." onchange="saveLawNotes(${law.number},this.value)">${law.notes||''}</textarea></div><div class="law-actions"><button class="btn-success" onclick="applyLaw(${law.number})">${law.applied?'Desmarcar':'Marcar como Aplicada'}</button></div></div></div>`).join('');}
function toggleLawBody(number){document.getElementById('law-body-'+number).classList.toggle('active');}
function filterLaws(filter){currentFilter=filter;document.querySelectorAll('.filter-btn').forEach(btn=>btn.classList.remove('active'));event.target.classList.add('active');renderLawsList();}
function applyLaw(number){const law=data.laws.find(l=>l.number===number);law.applied=!law.applied;saveData();renderLaws();showToast(law.applied?'Lei aplicada!':'Lei desmarcada','success');}
function toggleFavorite(number){const law=data.laws.find(l=>l.number===number);law.favorite=!law.favorite;saveData();renderLawsList();}
function saveLawNotes(number,notes){data.laws.find(l=>l.number===number).notes=notes;saveData();}
function changeLawOfWeek(){const pending=data.laws.filter(l=>!l.applied&&l.number!==data.lawOfTheWeek);data.lawOfTheWeek=pending.length>0?pending[Math.floor(Math.random()*pending.length)].number:Math.floor(Math.random()*48)+1;saveData();renderLawOfTheWeek();showToast('Nova lei selecionada!','success');}

function openExportModal(){document.getElementById('exportModal').classList.add('active');}
function closeExportModal(){document.getElementById('exportModal').classList.remove('active');}

function generateReport(){
const format = document.getElementById('exportFormat').value;
const now = new Date();
const dateStr = now.toLocaleDateString('pt-BR', {day:'2-digit',month:'2-digit',year:'numeric'});

// Coment√°rios autom√°ticos baseados nos n√≠veis
const disciplineComments = {
    low: "‚ö†Ô∏è Voc√™ est√° sangrando. A guerra n√£o perdoa os fracos.",
    medium: "üî∂ Ainda h√° brechas. O inimigo observa cada vacilo.",
    high: "üõ°Ô∏è O escudo est√° erguido. Continue assim, soldado."
};
const focusComments = {
    fraco: "Voc√™ ainda se distrai com lixo. O fraco mira no nada.",
    moderado: "A mira ainda treme. Estabilize ou ser√° abatido.",
    afiado: "Um tiro. Um alvo. Zero desperd√≠cio."
};
const spiritComments = {
    seco: "A chama est√° morrendo. Reacenda ou ser√° consumido pelas trevas.",
    vivo: "O fogo arde, mas precisa de lenha. Continue alimentando.",
    blindado: "Nada penetra. Nada abala. Voc√™ √© fortaleza."
};
const dangerComments = {
    baixo: "Voc√™ est√° dom√©stico demais. Um le√£o de zool√≥gico n√£o ca√ßa.",
    medio: "Voc√™ ainda √© previs√≠vel. Surpreenda ou seja surpreendido.",
    alto: "Eles temem o que n√£o entendem. Continue sendo o caos calculado."
};

// Determinar n√≠vel de disciplina
const discLevel = data.status.discipline < 40 ? 'low' : data.status.discipline < 70 ? 'medium' : 'high';

// Labels
const focusLabels = {fraco:'FRACO',moderado:'MODERADO',afiado:'AFIADO'};
const spiritLabels = {seco:'SECO',vivo:'VIVO',blindado:'BLINDADO'};
const dangerLabels = {baixo:'BAIXO',medio:'M√âDIO',alto:'ALTO'};

// Buscar √∫ltimo corte e vit√≥ria
const lastEntry = data.warHistory.length > 0 ? data.warHistory[0] : null;
const lastCut = lastEntry?.cut || null;
const lastVictory = lastEntry?.victory || null;

// Lei da semana
const lawOfWeek = data.laws.find(l => l.number === data.lawOfTheWeek);

// Frases de encerramento
const closingPhrases = [
    "Eu sou perigoso porque domino minha mente.",
    "Eu sou livre porque ningu√©m me controla.",
    "O fraco morre todos os dias. O forte morre uma vez.",
    "Disciplina √© a ponte entre metas e conquistas.",
    "Quem controla a si mesmo, controla o mundo."
];
const closingPhrase = closingPhrases[Math.floor(Math.random() * closingPhrases.length)];

const report = `

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:16px;height:16px;vertical-align:middle;margin-right:5px"><path d="M14.5 17.5L3 6V3h3l11.5 11.5"/><path d="M13 19l6-6"/><path d="M16 16l4 4"/><path d="M19 21l2-2"/></svg>RELAT√ìRIO DE GUERRA ‚Äì ${dateStr}

> "Quem n√£o sangra no treino, sangra no campo."
> ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üéØ STATUS DE GUERRA
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

‚Ä¢ Disciplina: ${data.status.discipline}%
${disciplineComments[discLevel]}

‚Ä¢ Foco: ${focusLabels[data.status.focus]}
${focusComments[data.status.focus]}

‚Ä¢ Esp√≠rito: ${spiritLabels[data.status.spirit]}
${spiritComments[data.status.spirit]}

‚Ä¢ Perigo: ${dangerLabels[data.status.danger]}
${dangerComments[data.status.danger]}

üíÄ CORTE DO DIA
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${lastCut ? `‚Ä¢ Corte aplicado: ${lastCut.description} ‚Ä¢ Categoria: ${lastCut.category.toUpperCase()} ‚Ä¢ Data: ${lastCut.date} ${lastCut.notes ?`‚Ä¢ Motivo: ${lastCut.notes}`: ''}` : `‚Ä¢ Nenhum corte registrado hoje. ‚ö†Ô∏è O que voc√™ est√° tolerando que deveria eliminar?`}

üõ°Ô∏è VIT√ìRIA DO DIA
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${lastVictory ? `‚Ä¢ A√ß√£o realizada: ${lastVictory.description} ${lastVictory.resisted ?`‚Ä¢ Resist√™ncia: ${lastVictory.resisted}`: ''} ${lastVictory.lawApplied ?`‚Ä¢ Lei aplicada: Lei ${lastVictory.lawApplied}`: ''} ‚Ä¢ Resultado: Mais um passo em dire√ß√£o √† vers√£o imbat√≠vel.` : `‚Ä¢ Nenhuma vit√≥ria registrada hoje. ‚ö†Ô∏è Quem n√£o registra vit√≥rias, n√£o reconhece seu progresso.`}

üìú LEI DA SEMANA
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

Lei ${lawOfWeek.number}: "${lawOfWeek.title}"
Status: ${lawOfWeek.applied ? '‚úÖ APLICADA' : '‚è≥ PENDENTE'}

"${lawOfWeek.description}"

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
ENCERRAMENTO
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

"${closingPhrase}"

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
ZARA ‚Ä¢ PAINEL DE GUERRA ‚Ä¢ ${dateStr}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
`;

if(format === 'txt'){
    // Exportar como TXT
    const blob = new Blob([report], {type:'text/plain;charset=utf-8'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `relatorio-guerra-${now.toISOString().split('T')[0]}.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    closeExportModal();
    showToast('Relat√≥rio TXT exportado!','success');
} else {
    // Exportar como PDF usando jsPDF
    generatePDF(report, dateStr, now);
}

}

function generatePDF(reportText, dateStr, now){
const printWindow = window.open('', '_blank');
const htmlContent = '<!DOCTYPE html><html><head><title>Relat√≥rio de Guerra - ' + dateStr + '</title><style>@import url("https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap");*{margin:0;padding:0;box-sizing:border-box}body{font-family:"Courier Prime",monospace;background:#0a0a0a;color:#d4af7d;padding:40px;line-height:1.6}.container{max-width:800px;margin:0 auto;background:#141414;border:2px solid #d4af7d;padding:40px;box-shadow:0 0 50px rgba(212,175,125,0.2)}pre{white-space:pre-wrap;word-wrap:break-word;font-family:"Courier Prime",monospace;font-size:14px;color:#e0e0e0}@media print{body{background:white;color:black;padding:20px}.container{border-color:#333;box-shadow:none;background:white}pre{color:#333}}</style></head><body><div class="container"><pre>' + reportText.replace(/</g,'<').replace(/>/g,'>') + '</pre></div><scr'+'ipt>setTimeout(function(){window.print();},500);</scr'+'ipt></body></html>';
printWindow.document.write(htmlContent);
printWindow.document.close();
closeExportModal();
showToast('PDF gerado! Use Ctrl+P para salvar.','success');
}
function showToast(message,type='success'){const toast=document.getElementById('toast');toast.textContent=message;toast.className='toast '+type+' active';setTimeout(()=>{toast.classList.remove('active');},3000);}
function renderAll(){renderStatus();renderHistory();renderMissions();renderRituals();renderLaws();renderToji();renderShelby();}

// ============================================
// TOJI - CAMINHO DO PREDADOR SILENCIOSO
// ============================================
const TOJI_STORAGE='toji_data';
const TRACOS_TOJI=[
{id:'frieza',nome:'Frieza Absoluta',desc:'Controle emocional total.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="12" y1="2" x2="12" y2="22"/><line x1="2" y1="12" x2="22" y2="12"/></svg>'},
{id:'forca',nome:'For√ßa Bruta',desc:'Corpo como arma. Treino constante.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="6" y="6" width="12" height="12"/></svg>'},
{id:'silencio',nome:'Sil√™ncio Estrat√©gico',desc:'Falar apenas o necess√°rio.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/></svg>'},
{id:'desapego',nome:'Desapego Material',desc:'Nenhuma depend√™ncia de conforto.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>'},
{id:'instinto',nome:'Instinto Predador',desc:'Decis√µes r√°pidas, sem hesita√ß√£o.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>'},
{id:'disciplina',nome:'Disciplina Mon√°stica',desc:'Rotina inflex√≠vel.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>'},
{id:'isolamento',nome:'Isolamento Produtivo',desc:'Solid√£o como ferramenta.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>'},
{id:'resistencia',nome:'Resist√™ncia ao Prazer',desc:'Negar gratifica√ß√£o instant√¢nea.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>'},
{id:'execucao',nome:'Execu√ß√£o Silenciosa',desc:'Agir sem anunciar.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>'},
{id:'indiferenca',nome:'Indiferen√ßa Social',desc:'Opini√£o alheia √© irrelevante.',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/><line x1="1" y1="1" x2="23" y2="23"/></svg>'}
];
const BLOCOS_TOJI_DEFAULT=[
{id:1,nome:'CORPO COMO ARMA',dias:'Dias 1‚Äì90',frase:'Antes de ser frio por dentro, seja inquebr√°vel por fora.',objetivo:'Construir uma base f√≠sica s√≥lida e eliminar depend√™ncias do corpo.',metas:[{id:'m1_1',texto:'Treinar 6x por semana (for√ßa, resist√™ncia, agilidade)'},{id:'m1_2',texto:'Banho gelado di√°rio'},{id:'m1_3',texto:'Cortar pornografia e masturba√ß√£o'},{id:'m1_4',texto:'Alimenta√ß√£o funcional (zero lixo)'},{id:'m1_5',texto:'Dormir antes das 23h todos os dias'}],rituaisSemanais:[{id:'rs1_1',texto:'Jejum controlado at√© meio-dia (2x por semana)'},{id:'rs1_2',texto:'Sil√™ncio absoluto de 20min'},{id:'rs1_3',texto:'Escrita de inten√ß√£o antes do treino'}],prova:'48h de disciplina mon√°stica: Sem celular, redes, conversa. Apenas treino, leitura e refei√ß√µes funcionais.'},
{id:2,nome:'FRIEZA SILENCIOSA',dias:'Dias 91‚Äì180',frase:'A emo√ß√£o n√£o serve no campo de batalha.',objetivo:'Desenvolver controle emocional absoluto e eliminar reatividade.',metas:[{id:'m2_1',texto:'Controle absoluto de reatividade'},{id:'m2_2',texto:'Treinar mesmo com dor ou falta de vontade'},{id:'m2_3',texto:'Responder com "sim/n√£o" ao inv√©s de justificar'},{id:'m2_4',texto:'Evitar conversa fiada'}],rituaisSemanais:[{id:'rs2_1',texto:'1 dia de voto de sil√™ncio'},{id:'rs2_2',texto:'An√°lise das pr√≥prias emo√ß√µes (jornada interna)'},{id:'rs2_3',texto:'A√ß√£o importante feita sem avisar'}],prova:'3 dias sem redes, sem conversa, sem distra√ß√£o. Apenas disciplina, execu√ß√£o e leitura.'},
{id:3,nome:'INSTINTO SELVAGEM',dias:'Dias 181‚Äì270',frase:'Predador n√£o pede permiss√£o.',objetivo:'Treinar rea√ß√£o instintiva e eliminar hesita√ß√£o.',metas:[{id:'m3_1',texto:'Tomar decis√µes r√°pidas, sem hesitar'},{id:'m3_2',texto:'Agir antes de falar'},{id:'m3_3',texto:'Eliminar o que atrasa (sem drama)'},{id:'m3_4',texto:'Iniciar projetos no sigilo'}],rituaisSemanais:[{id:'rs3_1',texto:'Testar 1 ideia por semana'},{id:'rs3_2',texto:'1 dia de "execu√ß√£o sem aviso" (resolver algo importante sem contar)'},{id:'rs3_3',texto:'Registrar atitudes de instinto'}],prova:'24h de execu√ß√£o total: Planejar e realizar 5 a√ß√µes de alto impacto no sigilo absoluto.'},
{id:4,nome:'DESAPEGO TOTAL',dias:'Dias 271‚Äì365',frase:'Nada me controla. Nada me define.',objetivo:'Eliminar todas as depend√™ncias e operar com desapego absoluto.',metas:[{id:'m4_1',texto:'7 dias com rotina minimalista'},{id:'m4_2',texto:'Zero est√≠mulo artificial (sem celular, sem m√∫sica, sem redes)'},{id:'m4_3',texto:'Trabalhar sem depender de elogio ou reconhecimento'},{id:'m4_4',texto:'Passar tempo sozinho com produtividade'}],rituaisSemanais:[{id:'rs4_1',texto:'Esvaziar o ambiente (limpeza e minimalismo)'},{id:'rs4_2',texto:'Entregar algo valioso sem buscar aplauso'},{id:'rs4_3',texto:'1 dia por semana em isolamento parcial'}],prova:'72h de rotina espartana: Sem prazer, sem distra√ß√£o. Apenas fun√ß√£o. Acordar 5h, banho gelado, treino, leitura, escrita, sil√™ncio, alimento limpo.'}
];
const RITUAIS_TOJI_DEFAULT=[
{id:'acordar',texto:'Acordar 05h sem celular',hora:'05:00'},
{id:'banho',texto:'Banho gelado',hora:'05:15'},
{id:'treino',texto:'Treino (m√≠nimo 45min)',hora:'06:00'},
{id:'jejum',texto:'Jejum at√© meio-dia',hora:'12:00'},
{id:'silencio',texto:'Sil√™ncio absoluto 20min',hora:'22:00'},
{id:'dormir',texto:'Dormir antes das 23h',hora:'23:00'}
];
const DIAS_SEMANA=['S','T','Q','Q','S','S','D'];
const DIAS_SEMANA_FULL=['Seg','Ter','Qua','Qui','Sex','S√°b','Dom'];
let tojiData=JSON.parse(localStorage.getItem(TOJI_STORAGE))||{tracos:{},blocos:{},rituais:{},rituaisConfig:null,cortes:[],lastReset:null,weekStart:null};
if(!tojiData.blocos||typeof tojiData.blocos!=='object')tojiData.blocos={};
if(!tojiData.rituaisConfig)tojiData.rituaisConfig=[...RITUAIS_TOJI_DEFAULT];
function saveToji(){localStorage.setItem(TOJI_STORAGE,JSON.stringify(tojiData));}
function getBlocosConfig(){
if(!tojiData.blocosConfig)tojiData.blocosConfig=JSON.parse(JSON.stringify(BLOCOS_TOJI_DEFAULT));
return tojiData.blocosConfig;
}
function getWeekStart(){
const now=new Date();
const day=now.getDay();
const diff=now.getDate()-day+(day===0?-6:1);
return new Date(now.setDate(diff)).toDateString();
}
function checkWeekReset(){
const currentWeek=getWeekStart();
if(tojiData.weekStart&&tojiData.weekStart!==currentWeek){
// Nova semana - verificar se completou todos os 7 dias em cada fase
const blocos=getBlocosConfig();
blocos.forEach(b=>{
const bd=tojiData.blocos[b.id];
if(bd&&bd.metasCheck){
// Contar quantos dias foram completos na semana anterior
let diasCompletos=0;
for(let i=0;i<7;i++){
const diaCompleto=b.metas.every(m=>{
const checks=bd.metasCheck[m.id]||{};
return checks[i]===true;
});
if(diaCompleto)diasCompletos++;
}
// Se n√£o completou os 7 dias, RESET para 0
if(diasCompletos<7){
setFaseProgresso(b.id,0);
showToast('FASE '+b.id+' RESETADA! Voc√™ falhou em '+(7-diasCompletos)+' dia(s).','error');
}
// Limpar checkboxes para nova semana
bd.metasCheck={};
}
});
saveToji();
}
tojiData.weekStart=currentWeek;
saveToji();
}
function renderToji(){
checkWeekReset();
const hoje=new Date().toDateString();
if(tojiData.lastReset!==hoje){tojiData.rituais={};tojiData.lastReset=hoje;saveToji();}
renderTracosToji();renderBlocosToji();renderRituaisToji();renderCortesToji();atualizarEssenciaToji();verificarSeloPredador();
}
function renderTracosToji(){
const grid=document.getElementById('tracosGrid');if(!grid)return;
grid.innerHTML=TRACOS_TOJI.map(t=>{
const v=tojiData.tracos[t.id]||0;
return `<div class="traco-item"><div class="traco-header">${t.icon}<h4>${t.nome}</h4></div><p class="traco-desc">${t.desc}</p><div class="traco-bar"><div class="traco-fill" style="width:${v}%"></div></div><div class="traco-controls"><span class="traco-percent">${v}%</span><div class="traco-btns"><button class="traco-btn" onclick="ajustarTracoToji('${t.id}',-5)">‚àí</button><button class="traco-btn" onclick="ajustarTracoToji('${t.id}',5)">+</button></div></div></div>`;
}).join('');
}
function ajustarTracoToji(id,delta){tojiData.tracos[id]=Math.max(0,Math.min(100,(tojiData.tracos[id]||0)+delta));saveToji();renderTracosToji();atualizarEssenciaToji();}
function atualizarEssenciaToji(){
const vals=TRACOS_TOJI.map(t=>tojiData.tracos[t.id]||0);
const media=vals.reduce((a,b)=>a+b,0)/vals.length;
const el=document.getElementById('essenciaValor');if(el)el.textContent=Math.round(media)+'%';
const circle=document.getElementById('essenciaCircle');if(circle){const circ=2*Math.PI*60;circle.style.strokeDashoffset=circ-(media/100)*circ;}
}
function getFaseProgresso(faseId){return parseInt(localStorage.getItem('toji_fase'+faseId+'_progresso'))||0;}
function setFaseProgresso(faseId,valor){localStorage.setItem('toji_fase'+faseId+'_progresso',Math.min(90,Math.max(0,valor)));}
function verificarDiaCompleto(blocoId,diaIdx){
const blocos=getBlocosConfig();
const bloco=blocos.find(b=>b.id===blocoId);
if(!bloco)return false;
const bd=tojiData.blocos[blocoId];
if(!bd||!bd.metasCheck)return false;
return bloco.metas.every(m=>{
const checks=bd.metasCheck[m.id]||{};
return checks[diaIdx]===true;
});
}
function contarDiasCompletos(blocoId){
let count=0;
for(let i=0;i<7;i++){
if(verificarDiaCompleto(blocoId,i))count++;
}
return count;
}
function toggleMetaDia(blocoId,metaId,diaIdx){
if(!tojiData.blocos[blocoId])tojiData.blocos[blocoId]={metasCheck:{},prova:false,open:true};
if(!tojiData.blocos[blocoId].metasCheck)tojiData.blocos[blocoId].metasCheck={};
if(!tojiData.blocos[blocoId].metasCheck[metaId])tojiData.blocos[blocoId].metasCheck[metaId]={};

const eraCompletoAntes=verificarDiaCompleto(blocoId,diaIdx);
tojiData.blocos[blocoId].metasCheck[metaId][diaIdx]=!tojiData.blocos[blocoId].metasCheck[metaId][diaIdx];
const eraCompletoDepois=verificarDiaCompleto(blocoId,diaIdx);

const diasCompletos=contarDiasCompletos(blocoId);
setFaseProgresso(blocoId,diasCompletos);

if(!eraCompletoAntes&&eraCompletoDepois){
    showToast('DIA COMPLETO! Fase '+blocoId+': '+diasCompletos+'/90','success');
}

saveToji();
renderBlocosToji();

}
function renderBlocosToji(){
const c=document.getElementById('blocosContainer');if(!c)return;
const blocos=getBlocosConfig();
const checkSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>';
const chevSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polyline points="6 9 12 15 18 9"/></svg>';
const editSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:14px;height:14px"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>';
const delSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:14px;height:14px"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>';
const addSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:14px;height:14px"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>';

c.innerHTML=blocos.map(b=>{
    const bd=tojiData.blocos[b.id]||{metasCheck:{},prova:false,open:false};
    const progresso=getFaseProgresso(b.id);
    const percentual=Math.floor((progresso/90)*100);
    
    // Verificar quais dias est√£o completos
    const diasCompletos=[];
    for(let i=0;i<7;i++){diasCompletos[i]=verificarDiaCompleto(b.id,i);}
    
    // Header com dias da semana
    const diasHeader=DIAS_SEMANA.map((d,i)=>`<div class="dia-header ${diasCompletos[i]?'completo':''}">${d}</div>`).join('');
    
    const metasHtml=b.metas.map(m=>{
        const checks=bd.metasCheck?.[m.id]||{};
        const diasHtml=DIAS_SEMANA.map((d,i)=>{
            const checked=checks[i]?'checked':'';
            return `<div class="dia-check ${checked}" onclick="toggleMetaDia(${b.id},'${m.id}',${i})"></div>`;
        }).join('');
        return `<div class="meta-row-toji"><div class="meta-nome">${m.texto}<div class="meta-actions-inline"><button class="btn-meta-action-sm" onclick="editarMetaToji(${b.id},'${m.id}')" title="Editar">${editSvg}</button><button class="btn-meta-action-sm del" onclick="excluirMetaToji(${b.id},'${m.id}')" title="Excluir">${delSvg}</button></div></div><div class="meta-dias-row">${diasHtml}</div></div>`;
    }).join('');
    
    return `<div class="bloco-toji ${bd.open?'open':''}" id="bloco-toji-${b.id}"><div class="bloco-header-toji" onclick="toggleBlocoToji(${b.id})"><div class="bloco-info"><div class="bloco-num">${b.id}</div><div><div class="bloco-nome">${b.nome}</div><div class="bloco-dias">${b.dias}</div></div></div><div class="bloco-status-toji"><div class="bloco-check-toji ${bd.prova?'done':''}">${checkSvg}</div><div class="bloco-toggle">${chevSvg}</div></div></div><div class="bloco-content-toji"><div class="fase-progress-container"><div class="fase-progress-header"><span class="fase-progress-label">PROGRESSO DA FASE</span><span class="fase-progress-count">${progresso}/90 dias</span></div><div class="fase-progress-bar"><div class="fase-progress-fill" style="width:${percentual}%"></div></div><div class="fase-progress-percent">${percentual}% conclu√≠do</div></div><p class="bloco-frase-toji">"${b.frase}"</p><div class="metas-header"><span>METAS DA FASE</span><button class="btn-add-meta" onclick="adicionarMetaToji(${b.id})">${addSvg} Adicionar</button></div><div class="metas-grid-container"><div class="metas-dias-header"><div class="meta-nome-header">Meta</div><div class="dias-header-row">${diasHeader}</div></div>${metasHtml}</div>${b.rituaisSemanais?`<div class="rituais-semanais-toji"><h5><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:16px;height:16px;vertical-align:middle;margin-right:5px"><path d="M23 4v6h-6M1 20v-6h6"/><path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/></svg>RITUAIS SEMANAIS</h5><ul>${b.rituaisSemanais.map(r=>'<li>'+r.texto+'</li>').join('')}</ul></div>`:''}<div class="prova-final-toji"><h5><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:16px;height:16px;vertical-align:middle;margin-right:5px"><path d="M14.5 17.5L3 6V3h3l11.5 11.5"/><path d="M13 19l6-6"/><path d="M16 16l4 4"/><path d="M19 21l2-2"/></svg>PROVA FINAL</h5><p>${b.prova}</p><button class="prova-btn-toji ${bd.prova?'done':''}" onclick="toggleProvaToji(${b.id})">${bd.prova?'‚úì CONCLU√çDA':'MARCAR CONCLU√çDA'}</button></div></div></div>`;
}).join('');

}
function toggleBlocoToji(id){if(!tojiData.blocos[id])tojiData.blocos[id]={metasCheck:{},prova:false,open:false};tojiData.blocos[id].open=!tojiData.blocos[id].open;saveToji();renderBlocosToji();}
function toggleProvaToji(bid){if(!tojiData.blocos[bid])tojiData.blocos[bid]={metasCheck:{},prova:false,open:true};tojiData.blocos[bid].prova=!tojiData.blocos[bid].prova;saveToji();renderBlocosToji();verificarSeloPredador();}
function verificarSeloPredador(){const blocos=getBlocosConfig();const todos=blocos.every(b=>tojiData.blocos[b.id]?.prova);const selo=document.getElementById('seloPredador');if(selo){if(todos)selo.classList.add('visivel');else selo.classList.remove('visivel');}}
function adicionarMetaToji(blocoId){
const texto=prompt('Nome da meta:');if(!texto)return;
const blocos=getBlocosConfig();
const bloco=blocos.find(b=>b.id===blocoId);
if(bloco){
const novoId='m'+blocoId+'*'+Date.now();
bloco.metas.push({id:novoId,texto});
saveToji();renderBlocosToji();showToast('Meta adicionada!','success');
}
}
function editarMetaToji(blocoId,metaId){
const blocos=getBlocosConfig();
const bloco=blocos.find(b=>b.id===blocoId);
const meta=bloco?.metas.find(m=>m.id===metaId);
if(!meta)return;
const texto=prompt('Nome da meta:',meta.texto);if(!texto)return;
meta.texto=texto;
saveToji();renderBlocosToji();showToast('Meta editada!','success');
}
function excluirMetaToji(blocoId,metaId){
if(!confirm('Excluir esta meta?'))return;
const blocos=getBlocosConfig();
const bloco=blocos.find(b=>b.id===blocoId);
if(bloco){
bloco.metas=bloco.metas.filter(m=>m.id!==metaId);
if(tojiData.blocos[blocoId]?.metasCheck){
delete tojiData.blocos[blocoId].metasCheck[metaId];
}
const diasCompletos=contarDiasCompletos(blocoId);
setFaseProgresso(blocoId,diasCompletos);
saveToji();renderBlocosToji();showToast('Meta exclu√≠da!','success');
}
}
function renderRituaisToji(){
const c=document.getElementById('rituaisToji');if(!c)return;
const rituais=tojiData.rituaisConfig||RITUAIS_TOJI_DEFAULT;
const checkSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>';
const editSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:14px;height:14px"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>';
const delSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:14px;height:14px"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>';
c.innerHTML=rituais.map(r=>{
const checked=tojiData.rituais[r.id]||false;
return `<div class="ritual-item-toji"><div class="ritual-check-toji ${checked?'checked':''}" onclick="toggleRitualToji('${r.id}')">${checkSvg}</div><span class="ritual-text-toji">${r.texto}</span><span class="ritual-time-toji">${r.hora}</span><div class="ritual-actions-toji"><button class="btn-meta-action" onclick="editarRitualToji('${r.id}')" title="Editar">${editSvg}</button><button class="btn-meta-action del" onclick="excluirRitualToji('${r.id}')" title="Excluir">${delSvg}</button></div></div>`;
}).join('');
c.innerHTML+=`<button class="btn-add-ritual" onclick="adicionarRitualToji()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:14px;height:14px"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg> Adicionar Ritual</button>`;
const done=rituais.filter(r=>tojiData.rituais[r.id]).length;
const prog=document.getElementById('rituaisTojProgress');if(prog)prog.textContent=`${done} / ${rituais.length} rituais hoje`;
}
function toggleRitualToji(id){tojiData.rituais[id]=!tojiData.rituais[id];saveToji();renderRituaisToji();}
function adicionarRitualToji(){
const texto=prompt('Nome do ritual:');if(!texto)return;
const hora=prompt('Hor√°rio (ex: 05:00):','00:00');if(!hora)return;
if(!tojiData.rituaisConfig)tojiData.rituaisConfig=[...RITUAIS_TOJI_DEFAULT];
const novoId='r*'+Date.now();
tojiData.rituaisConfig.push({id:novoId,texto,hora});
saveToji();renderRituaisToji();showToast('Ritual adicionado!','success');
}
function editarRitualToji(id){
const rituais=tojiData.rituaisConfig||RITUAIS_TOJI_DEFAULT;
const ritual=rituais.find(r=>r.id===id);
if(!ritual)return;
const texto=prompt('Nome do ritual:',ritual.texto);if(!texto)return;
const hora=prompt('Hor√°rio (ex: 05:00):',ritual.hora);if(!hora)return;
ritual.texto=texto;ritual.hora=hora;
saveToji();renderRituaisToji();showToast('Ritual editado!','success');
}
function excluirRitualToji(id){
if(!confirm('Excluir este ritual?'))return;
if(!tojiData.rituaisConfig)tojiData.rituaisConfig=[...RITUAIS_TOJI_DEFAULT];
tojiData.rituaisConfig=tojiData.rituaisConfig.filter(r=>r.id!==id);
saveToji();renderRituaisToji();showToast('Ritual exclu√≠do!','success');
}
function renderCortesToji(){
const c=document.getElementById('cortesListaToji');if(!c)return;
const last7=tojiData.cortes.slice(-7).reverse();
if(!last7.length){c.innerHTML='<p style="color:rgba(255,255,255,.4);text-align:center;padding:20px;">Nenhum corte registrado.</p>';return;}
c.innerHTML=last7.map(ct=>`<div class="corte-item-toji"><div class="corte-icon-toji"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></div><span class="corte-text-toji">${ct.texto}</span><span class="corte-data-toji">${ct.data}</span></div>`).join('');
}
function adicionarCorteToji(){
const input=document.getElementById('corteInputToji');const texto=input.value.trim();if(!texto)return;
tojiData.cortes.push({texto,data:new Date().toLocaleDateString('pt-BR')});
saveToji();input.value='';renderCortesToji();showToast('Corte registrado!','success');
}
document.addEventListener('keypress',function(e){if(e.target.id==='corteInputToji'&&e.key==='Enter')adicionarCorteToji();});

// ============================================
// SHELBY - PLANO DE 1 ANO
// ============================================
const SHELBY_STORAGE='shelby_data';
const TRACOS_LICITOS=[
{id:'visao',nome:'Mente Vision√°ria'},
{id:'influencia',nome:'Influ√™ncia Social'},
{id:'frieza',nome:'Frieza Pol√≠tica'},
{id:'imagem',nome:'Imagem de Autoridade'},
{id:'rede',nome:'Rede de Aliados'}
];
const TRACOS_ILICITOS=[
{id:'manipulacao',nome:'Manipula√ß√£o Calculada'},
{id:'dominio',nome:'Dom√≠nio Emocional'},
{id:'guerra',nome:'Guerra Psicol√≥gica'},
{id:'comando',nome:'Comando Paralelo'},
{id:'execucao',nome:'Execu√ß√£o Fria'}
];
const FASES_LICITAS=[
{id:1,nome:'CONSTRUIR O NOME',dias:'Dias 1‚Äì90',frase:'Antes de dominar outros, domine sua imagem.',metas:[{id:'fl1_1',texto:'Definir identidade visual de poder'},{id:'fl1_2',texto:'Criar rotina de autoridade'},{id:'fl1_3',texto:'Estudar 1 lei do poder por semana'},{id:'fl1_4',texto:'Networking estrat√©gico semanal'},{id:'fl1_5',texto:'Zero rea√ß√µes emocionais p√∫blicas'}],prova:'Ser reconhecido como refer√™ncia em seu meio'},
{id:2,nome:'DOMINAR O TERRENO',dias:'Dias 91‚Äì180',frase:'Conhe√ßa cada pe√ßa do tabuleiro.',metas:[{id:'fl2_1',texto:'Mapear todos os players do ambiente'},{id:'fl2_2',texto:'Criar 3 alian√ßas estrat√©gicas'},{id:'fl2_3',texto:'Eliminar 1 fraqueza pessoal por m√™s'},{id:'fl2_4',texto:'Dominar a arte da negocia√ß√£o'}],prova:'Fechar um acordo que beneficie apenas voc√™'},
{id:3,nome:'CONSTRUIR O IMP√âRIO',dias:'Dias 181‚Äì270',frase:'Tijolo por tijolo, silenciosamente.',metas:[{id:'fl3_1',texto:'Criar fonte de renda/influ√™ncia paralela'},{id:'fl3_2',texto:'Posicionar aliados em lugares estrat√©gicos'},{id:'fl3_3',texto:'Documentar tudo, expor nada'}],prova:'Ter uma conquista que ningu√©m sabe que foi sua'},
{id:4,nome:'GUERRA TOTAL',dias:'Dias 271‚Äì365',frase:'Quando atacar, n√£o deixe sobreviventes.',metas:[{id:'fl4_1',texto:'Executar plano de domina√ß√£o completo'},{id:'fl4_2',texto:'Neutralizar √∫ltima amea√ßa'},{id:'fl4_3',texto:'Consolidar posi√ß√£o de poder'}],prova:'Estar em posi√ß√£o que ningu√©m pode tocar'}
];
const FASES_ILICITAS=[
{id:1,nome:'OBSERVAR NA SOMBRA',dias:'Dias 1‚Äì90',frase:'Veja tudo, revele nada.',metas:[{id:'fi1_1',texto:'Mapear fraquezas de todos ao redor'},{id:'fi1_2',texto:'Criar persona p√∫blica neutra'},{id:'fi1_3',texto:'Praticar leitura fria di√°ria'},{id:'fi1_4',texto:'Nunca ser o primeiro a falar'}],prova:'Descobrir um segredo √∫til sem perguntar'},
{id:2,nome:'MANIPULAR SUTILMENTE',dias:'Dias 91‚Äì180',frase:'Plante ideias, colha resultados.',metas:[{id:'fi2_1',texto:'Fazer algu√©m agir sem perceber sua influ√™ncia'},{id:'fi2_2',texto:'Controlar uma narrativa'},{id:'fi2_3',texto:'Criar depend√™ncia em algu√©m √∫til'}],prova:'Mudar uma decis√£o importante sem ser citado'},
{id:3,nome:'COMANDO INVIS√çVEL',dias:'Dias 181‚Äì270',frase:'Lidere sem t√≠tulo.',metas:[{id:'fi3_1',texto:'Ter informantes em diferentes c√≠rculos'},{id:'fi3_2',texto:'Influenciar decis√µes √† dist√¢ncia'},{id:'fi3_3',texto:'Ser consultado sem pedir'}],prova:'Ser o poder por tr√°s de uma decis√£o p√∫blica'},
{id:4,nome:'EXECU√á√ÉO FINAL',dias:'Dias 271‚Äì365',frase:'Quando mover, ser√° tarde demais para reagir.',metas:[{id:'fi4_1',texto:'Executar opera√ß√£o de alto impacto'},{id:'fi4_2',texto:'Deixar marca permanente sem rastros'}],prova:'Opera√ß√£o Oculta conclu√≠da com sucesso'}
];
const CHECKLIST_COMANDO=[
{id:'cc1',texto:'Apar√™ncia t√°tica impec√°vel'},
{id:'cc2',texto:'30min de leitura estrat√©gica'},
{id:'cc3',texto:'1 a√ß√£o executada sem hesita√ß√£o'},
{id:'cc4',texto:'Influ√™ncia ou sil√™ncio calculado'},
{id:'cc5',texto:'An√°lise de 1 pessoa/situa√ß√£o'}
];
const LEITURAS_FASES=[
{fase:1,titulo:'FASE 1',livros:['O Pr√≠ncipe - Maquiavel','As 48 Leis do Poder - Robert Greene','Medita√ß√µes - Marco Aur√©lio']},
{fase:2,titulo:'FASE 2',livros:['A Arte da Guerra - Sun Tzu','O Jogo - Neil Strauss','Se o Corpo Falasse - Pierre Weil']},
{fase:3,titulo:'FASE 3',livros:['Maestria - Robert Greene','O Ego √© Seu Inimigo - Ryan Holiday','O Obst√°culo √© o Caminho - Ryan Holiday']},
{fase:4,titulo:'FASE 4',livros:['As 33 Estrat√©gias de Guerra - Robert Greene','A Arte da Sedu√ß√£o - Robert Greene','Antifr√°gil - Nassim Taleb']}
];
const MISSOES_SOMBRIAS=[
{id:'ms1',texto:'Influenciar uma decis√£o sem ser percebido'},
{id:'ms2',texto:'Coletar informa√ß√£o estrat√©gica sobre algu√©m'},
{id:'ms3',texto:'Dominar um ambiente sem falar'},
{id:'ms4',texto:'Criar um la√ßo por interesse puro'},
{id:'ms5',texto:'Cortar algu√©m sem drama ou explica√ß√£o'}
];
const CRIMES_SHELBY=[
{id:'extorsao',nome:'EXTORS√ÉO',desc:'Obedi√™ncia ou coopta√ß√£o sem contratos',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></svg>',
definicao:'Uso de amea√ßa, for√ßa impl√≠cita ou press√£o para obter obedi√™ncia, dinheiro, recursos ou coopera√ß√£o de indiv√≠duos ou empresas, sem qualquer contrato formal.',
objetivo:'Garantir lealdade for√ßada, sil√™ncio de testemunhas, e fluxo de recursos sem rastros jur√≠dicos. Serve para controlar sem aparecer.',
mecanismos:['Amea√ßas veladas ou expl√≠citas','Destrui√ß√£o de propriedade como aviso','Prote√ß√£o for√ßada (cobran√ßa por n√£o ser atacado)','Controle de informa√ß√µes comprometedoras'],
execucao:['Identificar vulnerabilidades do alvo','Criar contexto de depend√™ncia ou medo','Fazer a oferta: prote√ß√£o ou consequ√™ncia','Manter presen√ßa silenciosa e constante','Cobrar sem negocia√ß√£o'],
exemplo:'Thomas oferecia "prote√ß√£o" a comerciantes de Small Heath. Quem recusava era visitado por Arthur. Quem aceitava, pagava mensalmente ‚Äî e ningu√©m falava com a pol√≠cia.',
codigo:['A obedi√™ncia vale mais que o contrato.','O medo bem administrado √© mais eficiente que a viol√™ncia constante.','Quem paga, pertence.']},
{id:'homicidio',nome:'HOMIC√çDIO',desc:'Elimina√ß√£o cir√∫rgica de risco ou retalia√ß√£o estrat√©gica',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><line x1="22" y1="2" x2="2" y2="22"/></svg>',
definicao:'Assassinato premeditado como ferramenta estrat√©gica. Elimina√ß√£o de amea√ßas, traidores ou obst√°culos que n√£o podem ser neutralizados de outra forma.',
objetivo:'Remover permanentemente uma vari√°vel perigosa do tabuleiro. Proteger o imp√©rio, enviar mensagem, ou vingar trai√ß√µes de forma definitiva.',
mecanismos:['Execu√ß√£o direta por membros leais','Contrata√ß√£o de terceiros sem liga√ß√£o','Acidentes fabricados','Desaparecimentos sem rastro'],
execucao:['Avaliar se a elimina√ß√£o √© a √∫nica sa√≠da','Planejar sem envolvimento direto','Definir executor de confian√ßa absoluta','Criar √°libi s√≥lido','Garantir sil√™ncio eterno'],
exemplo:'Quando descobriu que um informante da pol√≠cia estava infiltrado, Thomas ordenou a execu√ß√£o sem hesitar ‚Äî o corpo nunca foi encontrado.',
codigo:['Matar n√£o √© a primeira op√ß√£o. √â a √∫ltima. Mas quando √© necess√°ria, n√£o se hesita.','Mortos n√£o falam, n√£o traem, n√£o voltam.','O sangue lava, mas tamb√©m mancha. Use com precis√£o.']},
{id:'corrupcao',nome:'CORRUP√á√ÉO',desc:'Acesso a decis√µes e escudos legais',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 1v22M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>',
definicao:'Suborno, coopta√ß√£o ou chantagem de agentes p√∫blicos, pol√≠ticos, ju√≠zes e policiais para garantir prote√ß√£o, informa√ß√£o privilegiada ou manipula√ß√£o de decis√µes.',
objetivo:'Transformar o Estado em aliado invis√≠vel. Ter acesso a decis√µes antes que aconte√ßam. Blindar opera√ß√µes ilegais com apar√™ncia de legalidade.',
mecanismos:['Pagamentos regulares a policiais e pol√≠ticos','Favores e presentes estrat√©gicos','Chantagem com informa√ß√µes comprometedoras','Financiamento de campanhas'],
execucao:['Mapear quem tem poder real','Descobrir fraquezas: dinheiro, v√≠cios, segredos','Fazer a primeira oferta discreta','Criar depend√™ncia m√∫tua','Nunca deixar rastros diretos'],
exemplo:'Thomas financiou campanhas de pol√≠ticos e mantinha policiais na folha de pagamento. Quando precisava, um telefonema resolvia mandados, investiga√ß√µes e pris√µes de rivais.',
codigo:['Todo homem tem um pre√ßo. Descubra o dele antes que ele descubra o seu.','O Estado √© uma ferramenta. Quem n√£o o controla, √© controlado por ele.','Corrup√ß√£o √© investimento de longo prazo.']},
{id:'contrabando',nome:'CONTRABANDO',desc:'Financiamento e influ√™ncia popular',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="3" width="15" height="13"/><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>',
definicao:'Transporte e venda de mercadorias ilegais ou sem impostos: bebidas, armas, cigarros, produtos roubados. Base financeira de imp√©rios criminosos.',
objetivo:'Gerar capital fora do sistema tribut√°rio. Criar rede de distribui√ß√£o e lealdade. Financiar outras opera√ß√µes com dinheiro limpo na origem.',
mecanismos:['Rotas secretas de transporte','Suborno de fiscais e guardas','Armaz√©ns e esconderijos estrat√©gicos','Rede de revendedores locais'],
execucao:['Identificar demanda: o que o povo quer e n√£o pode ter','Estabelecer fonte confi√°vel','Criar log√≠stica segura','Distribuir por intermedi√°rios','Reinvestir lucros em opera√ß√µes legais'],
exemplo:'Os Peaky Blinders come√ßaram com apostas e bebidas contrabandeadas. O dinheiro financiou a expans√£o para neg√≥cios leg√≠timos e compra de influ√™ncia.',
codigo:['O povo quer o que √© proibido. Quem fornece, lidera.','Contrabando √© a porta de entrada. Legitimidade √© a sa√≠da.','Cada caixa que passa √© um tijolo do imp√©rio.']},
{id:'lavagem',nome:'LAVAGEM DE DINHEIRO',desc:'Sustenta√ß√£o do imp√©rio "legal"',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>',
definicao:'Processo de transformar dinheiro obtido ilegalmente em capital aparentemente leg√≠timo, atrav√©s de empresas de fachada, investimentos e movimenta√ß√µes financeiras complexas.',
objetivo:'Permitir uso livre do capital sem levantar suspeitas. Criar patrim√¥nio legal que justifique o padr√£o de vida. Blindar o imp√©rio contra investiga√ß√µes financeiras.',
mecanismos:['Empresas de fachada (bares, lavanderias, apostas)','Compra e venda de im√≥veis','Investimentos em neg√≥cios leg√≠timos','Doa√ß√µes e transa√ß√µes em dinheiro vivo'],
execucao:['Criar neg√≥cios com alto fluxo de caixa','Misturar dinheiro sujo com receita real','Documentar tudo com apar√™ncia legal','Diversificar fontes de "renda"','Manter contadores leais e discretos'],
exemplo:'Thomas abriu a Shelby Company Limited, oficialmente uma empresa de exporta√ß√£o. Na pr√°tica, todo dinheiro do submundo passava por ela e sa√≠a limpo.',
codigo:['Dinheiro sujo compra, mas n√£o constr√≥i. Limpe-o primeiro.','Um imp√©rio sem fachada √© uma fortaleza sem muros.','O contador certo vale mais que dez soldados.']},
{id:'fraude',nome:'FRAUDE POL√çTICA',desc:'Dom√≠nio institucional e blindagem',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/></svg>',
definicao:'Manipula√ß√£o de processos eleitorais, compra de votos, falsifica√ß√£o de resultados, e uso de cargo p√∫blico para benef√≠cio pr√≥prio ou do grupo.',
objetivo:'Controlar o sistema por dentro. Ter acesso direto a decis√µes de Estado. Criar leis favor√°veis e bloquear investiga√ß√µes.',
mecanismos:['Compra de votos em massa','Intimida√ß√£o de oponentes','Falsifica√ß√£o de urnas e resultados','Uso de cargos para favorecimento'],
execucao:['Identificar elei√ß√£o estrat√©gica','Financiar candidato control√°vel','Mobilizar base de apoio (legal e ilegal)','Garantir vit√≥ria por qualquer meio','Cobrar favores ap√≥s a posse'],
exemplo:'Thomas se candidatou ao Parlamento. Usou dinheiro, influ√™ncia e intimida√ß√£o para vencer. Uma vez dentro, tinha acesso a informa√ß√µes privilegiadas e prote√ß√£o institucional.',
codigo:['Melhor ter um pol√≠tico no bolso do que cem soldados na rua.','O poder real n√£o est√° no parlamento. Est√° em quem controla quem senta l√°.','A democracia √© um jogo. Aprenda as regras, depois quebre-as.']},
{id:'espionagem',nome:'ESPIONAGEM',desc:'Vantagem absoluta em todas as frentes',icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>',
definicao:'Coleta sistem√°tica de informa√ß√µes sobre rivais, aliados, autoridades e mercados. Infiltra√ß√£o, vigil√¢ncia e intercepta√ß√£o de comunica√ß√µes.',
objetivo:'Saber tudo antes de todos. Antecipar movimentos de inimigos. Ter sempre a vantagem da informa√ß√£o.',
mecanismos:['Informantes em organiza√ß√µes rivais','Vigil√¢ncia de alvos estrat√©gicos','Intercepta√ß√£o de correspond√™ncias','Infiltrados em posi√ß√µes-chave'],
execucao:['Mapear quem sabe o qu√™','Recrutar informantes com incentivos ou press√£o','Criar rede de coleta de informa√ß√µes','Analisar e cruzar dados','Agir antes que o inimigo perceba'],
exemplo:'Thomas mantinha informantes em gangues rivais, na pol√≠cia e at√© no governo. Sabia de opera√ß√µes antes de acontecerem e sempre estava um passo √† frente.',
codigo:['Informa√ß√£o √© a moeda mais valiosa. Quem tem, comanda.','Nunca entre em uma sala sem saber quem est√° l√° e o que querem.','O espi√£o perfeito √© aquele que ningu√©m sabe que existe.']}
];
let shelbyData=JSON.parse(localStorage.getItem(SHELBY_STORAGE))||{tracosLicitos:{},tracosIlicitos:{},fasesLicitas:{},fasesIlicitas:{},checklist:{},missoesSombrias:{},operacaoOculta:{texto:'',concluida:false},weekStart:null,lastReset:null};
function saveShelby(){localStorage.setItem(SHELBY_STORAGE,JSON.stringify(shelbyData));}
function getShelbyFaseProgresso(tipo,faseId){return parseInt(localStorage.getItem('shelby_'+tipo+'_fase'+faseId+'*progresso'))||0;}
function setShelbyFaseProgresso(tipo,faseId,valor){localStorage.setItem('shelby*'+tipo+'_fase'+faseId+'_progresso',Math.min(90,Math.max(0,valor)));}
function toggleLadoShelby(lado){
document.querySelectorAll('.lado-btn').forEach(b=>b.classList.remove('active'));
event.target.closest('.lado-btn').classList.add('active');
if(lado==='ilicito')event.target.closest('.lado-btn').classList.add('ilicito');
document.getElementById('ladoLicito').classList.toggle('hidden',lado!=='licito');
document.getElementById('ladoIlicito').classList.toggle('hidden',lado!=='ilicito');
}
function renderShelby(){
checkShelbyWeekReset();
const hoje=new Date().toDateString();
if(shelbyData.lastReset!==hoje){shelbyData.checklist={};shelbyData.lastReset=hoje;saveShelby();}
renderTracosLicitos();renderTracosIlicitos();renderCrimesShelby();
renderFasesShelby('licitas',FASES_LICITAS,'fasesLicitasContainer');
renderFasesShelby('ilicitas',FASES_ILICITAS,'fasesIlicitasContainer');
renderChecklistComando();renderLeituras();renderMissoesSombrias();renderOperacaoOculta();verificarSeloShelby();
}
function renderTracosLicitos(){
const grid=document.getElementById('tracosLicitosGrid');if(!grid)return;
grid.innerHTML=TRACOS_LICITOS.map(t=>{
const v=shelbyData.tracosLicitos[t.id]||0;
return `<div class="traco-shelby"><h5>${t.nome}</h5><div class="traco-shelby-bar"><div class="traco-shelby-fill" style="width:${v}%"></div></div><div class="traco-shelby-controls"><span class="traco-shelby-percent">${v}%</span><div class="traco-shelby-btns"><button class="traco-shelby-btn" onclick="ajustarTracoShelby('licitos','${t.id}',-5)">‚àí</button><button class="traco-shelby-btn" onclick="ajustarTracoShelby('licitos','${t.id}',5)">+</button></div></div></div>`;
}).join('');
}
function renderTracosIlicitos(){
const grid=document.getElementById('tracosIlicitosGrid');if(!grid)return;
grid.innerHTML=TRACOS_ILICITOS.map(t=>{
const v=shelbyData.tracosIlicitos[t.id]||0;
return `<div class="traco-shelby ilicito"><h5>${t.nome}</h5><div class="traco-shelby-bar"><div class="traco-shelby-fill" style="width:${v}%"></div></div><div class="traco-shelby-controls"><span class="traco-shelby-percent">${v}%</span><div class="traco-shelby-btns"><button class="traco-shelby-btn" onclick="ajustarTracoShelby('ilicitos','${t.id}',-5)">‚àí</button><button class="traco-shelby-btn" onclick="ajustarTracoShelby('ilicitos','${t.id}',5)">+</button></div></div></div>`;
}).join('');
}
function ajustarTracoShelby(tipo,id,delta){
const key=tipo==='licitos'?'tracosLicitos':'tracosIlicitos';
shelbyData[key][id]=Math.max(0,Math.min(100,(shelbyData[key][id]||0)+delta));
saveShelby();
tipo==='licitos'?renderTracosLicitos():renderTracosIlicitos();
}
function renderCrimesShelby(){
const grid=document.getElementById('crimesGrid');if(!grid)return;
const chevSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polyline points="6 9 12 15 18 9"/></svg>';
const defSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>';
const alvSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>';
const mecSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>';
const exeSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></svg>';
const exmSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>';
const codSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>';
grid.innerHTML=CRIMES_SHELBY.map(c=>`<div class="crime-card" id="crime-${c.id}"><div class="crime-header" onclick="toggleCrime('${c.id}')"><div class="crime-icon">${c.icon}</div><div class="crime-info"><h6>${c.nome}</h6><p>${c.desc}</p></div><div class="crime-toggle">${chevSvg}</div></div><div class="crime-manual"><div class="manual-section"><h5>${defSvg} DEFINI√á√ÉO FRIA</h5><p>${c.definicao}</p></div><div class="manual-section"><h5>${alvSvg} OBJETIVO ESTRAT√âGICO</h5><p>${c.objetivo}</p></div><div class="manual-section"><h5>${mecSvg} MECANISMOS UTILIZADOS</h5><ul>${c.mecanismos.map(m=>'<li>'+m+'</li>').join('')}</ul></div><div class="manual-section"><h5>${exeSvg} ESTRUTURA DE EXECU√á√ÉO</h5><ul>${c.execucao.map(e=>'<li>'+e+'</li>').join('')}</ul></div><div class="manual-section"><h5>${exmSvg} EXEMPLO SHELBY</h5><div class="manual-exemplo">${c.exemplo}</div></div><div class="manual-section"><h5>${codSvg} C√ìDIGO DO ESTRATEGISTA</h5><div class="manual-codigo">${c.codigo.map(cd=>'<p>"'+cd+'"</p>').join('')}</div></div></div></div>`).join('');
}
function toggleCrime(id){
const card=document.getElementById('crime-'+id);
if(card)card.classList.toggle('open');
}
function verificarDiaCompletoShelby(tipo,faseId,diaIdx,fases){
const fase=fases.find(f=>f.id===faseId);if(!fase)return false;
const key=tipo==='licitas'?'fasesLicitas':'fasesIlicitas';
const fd=shelbyData[key][faseId];
if(!fd||!fd.metasCheck)return false;
return fase.metas.every(m=>{const checks=fd.metasCheck[m.id]||{};return checks[diaIdx]===true;});
}
function contarDiasCompletosShelby(tipo,faseId,fases){
let count=0;
for(let i=0;i<7;i++){if(verificarDiaCompletoShelby(tipo,faseId,i,fases))count++;}
return count;
}
function toggleMetaDiaShelby(tipo,faseId,metaId,diaIdx){
const key=tipo==='licitas'?'fasesLicitas':'fasesIlicitas';
const fases=tipo==='licitas'?FASES_LICITAS:FASES_ILICITAS;
if(!shelbyData[key][faseId])shelbyData[key][faseId]={metasCheck:{},prova:false,open:true};
if(!shelbyData[key][faseId].metasCheck)shelbyData[key][faseId].metasCheck={};
if(!shelbyData[key][faseId].metasCheck[metaId])shelbyData[key][faseId].metasCheck[metaId]={};
const antes=verificarDiaCompletoShelby(tipo,faseId,diaIdx,fases);
shelbyData[key][faseId].metasCheck[metaId][diaIdx]=!shelbyData[key][faseId].metasCheck[metaId][diaIdx];
const depois=verificarDiaCompletoShelby(tipo,faseId,diaIdx,fases);
const dias=contarDiasCompletosShelby(tipo,faseId,fases);
setShelbyFaseProgresso(tipo,faseId,dias);
if(!antes&&depois)showToast('DIA COMPLETO! '+dias+'/90','success');
saveShelby();
renderFasesShelby(tipo,fases,tipo==='licitas'?'fasesLicitasContainer':'fasesIlicitasContainer');
}
function renderFasesShelby(tipo,fases,containerId){
const c=document.getElementById(containerId);if(!c)return;
const key=tipo==='licitas'?'fasesLicitas':'fasesIlicitas';
const isIlicito=tipo==='ilicitas';
const checkSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>';
const chevSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polyline points="6 9 12 15 18 9"/></svg>';
const DIAS=['S','T','Q','Q','S','S','D'];
c.innerHTML=fases.map(f=>{
const fd=shelbyData[key][f.id]||{metasCheck:{},prova:false,open:false};
const prog=getShelbyFaseProgresso(tipo,f.id);
const pct=Math.floor((prog/90)*100);
const diasCompletos=[];for(let i=0;i<7;i++){diasCompletos[i]=verificarDiaCompletoShelby(tipo,f.id,i,fases);}
const diasHeader=DIAS.map((d,i)=>`<div class="dia-header ${diasCompletos[i]?'completo':''}">${d}</div>`).join('');
const metasHtml=f.metas.map(m=>{
const checks=fd.metasCheck?.[m.id]||{};
const diasHtml=DIAS.map((d,i)=>{const checked=checks[i]?'checked':'';return `<div class="dia-check ${checked}" onclick="toggleMetaDiaShelby('${tipo}',${f.id},'${m.id}',${i})"></div>`;}).join('');
return `<div class="meta-row-toji"><div class="meta-nome">${m.texto}</div><div class="meta-dias-row">${diasHtml}</div></div>`;
}).join('');
return `<div class="bloco-toji ${fd.open?'open':''}" style="${isIlicito?'border-color:rgba(212,175,125,.3)':''}"><div class="bloco-header-toji" onclick="toggleFaseShelby('${tipo}',${f.id})" style="${isIlicito?'background:rgba(212,175,125,.1)':''}"><div class="bloco-info"><div class="bloco-num" style="${isIlicito?'border-color:#d4af7d;background:rgba(212,175,125,.2)':''}">${f.id}</div><div><div class="bloco-nome" style="${isIlicito?'color:#d4af7d':''}">${f.nome}</div><div class="bloco-dias">${f.dias}</div></div></div><div class="bloco-status-toji"><div class="bloco-check-toji ${fd.prova?'done':''}" style="${isIlicito?'border-color:rgba(212,175,125,.4)':''}">${checkSvg}</div><div class="bloco-toggle">${chevSvg}</div></div></div><div class="bloco-content-toji"><div class="fase-progress-container" style="${isIlicito?'border-color:rgba(212,175,125,.2)':''}"><div class="fase-progress-header"><span class="fase-progress-label" style="${isIlicito?'color:#d4af7d':''}">PROGRESSO</span><span class="fase-progress-count">${prog}/90</span></div><div class="fase-progress-bar" style="${isIlicito?'background:rgba(212,175,125,.2)':''}"><div class="fase-progress-fill" style="width:${pct}%;${isIlicito?'background:linear-gradient(90deg,#d4af7d,#d4af7d)':''}"></div></div><div class="fase-progress-percent">${pct}%</div></div><p class="bloco-frase-toji">"${f.frase}"</p><div class="metas-grid-container" style="${isIlicito?'border-color:rgba(212,175,125,.2)':''}"><div class="metas-dias-header" style="${isIlicito?'background:rgba(212,175,125,.15)':''}"><div class="meta-nome-header">Meta</div><div class="dias-header-row">${diasHeader}</div></div>${metasHtml}</div><div class="prova-final-toji" style="${isIlicito?'background:rgba(212,175,125,.15);border-color:rgba(212,175,125,.4)':''}"><h5 style="${isIlicito?'color:#d4af7d':''}"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:16px;height:16px;vertical-align:middle;margin-right:5px"><path d="M14.5 17.5L3 6V3h3l11.5 11.5"/><path d="M13 19l6-6"/><path d="M16 16l4 4"/><path d="M19 21l2-2"/></svg>PROVA FINAL</h5><p>${f.prova}</p><button class="prova-btn-toji ${fd.prova?'done':''}" onclick="toggleProvaShelby('${tipo}',${f.id})" style="${isIlicito?'border-color:#d4af7d;color:#d4af7d':''}">${fd.prova?'‚úì CONCLU√çDA':'MARCAR CONCLU√çDA'}</button></div></div></div>`;
}).join('');
}
function toggleFaseShelby(tipo,id){
const key=tipo==='licitas'?'fasesLicitas':'fasesIlicitas';
if(!shelbyData[key][id])shelbyData[key][id]={metasCheck:{},prova:false,open:false};
shelbyData[key][id].open=!shelbyData[key][id].open;
saveShelby();
renderFasesShelby(tipo,tipo==='licitas'?FASES_LICITAS:FASES_ILICITAS,tipo==='licitas'?'fasesLicitasContainer':'fasesIlicitasContainer');
}
function toggleProvaShelby(tipo,id){
const key=tipo==='licitas'?'fasesLicitas':'fasesIlicitas';
if(!shelbyData[key][id])shelbyData[key][id]={metasCheck:{},prova:false,open:true};
shelbyData[key][id].prova=!shelbyData[key][id].prova;
saveShelby();
renderFasesShelby(tipo,tipo==='licitas'?FASES_LICITAS:FASES_ILICITAS,tipo==='licitas'?'fasesLicitasContainer':'fasesIlicitasContainer');
verificarSeloShelby();
}
function renderChecklistComando(){
const c=document.getElementById('checklistComandoContainer');if(!c)return;
const checkSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>';
c.innerHTML=CHECKLIST_COMANDO.map(item=>{
const checked=shelbyData.checklist[item.id]||false;
return `<div class="ritual-item-toji"><div class="ritual-check-toji ${checked?'checked':''}" onclick="toggleChecklistShelby('${item.id}')">${checkSvg}</div><span class="ritual-text-toji">${item.texto}</span></div>`;
}).join('');
}
function toggleChecklistShelby(id){shelbyData.checklist[id]=!shelbyData.checklist[id];saveShelby();renderChecklistComando();}
function renderLeituras(){
const c=document.getElementById('leiturasContainer');if(!c)return;
c.innerHTML=LEITURAS_FASES.map(lf=>`<div class="leitura-fase"><h5>${lf.titulo}</h5><ul>${lf.livros.map(l=>`<li>${l}</li>`).join('')}</ul></div>`).join('');
}
function renderMissoesSombrias(){
const c=document.getElementById('missoesSombriasContainer');if(!c)return;
const checkSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>';
c.innerHTML=MISSOES_SOMBRIAS.map(m=>{
const checked=shelbyData.missoesSombrias[m.id]||false;
return `<div class="ritual-item-toji" style="border-color:rgba(212,175,125,.2)"><div class="ritual-check-toji ${checked?'checked':''}" onclick="toggleMissaoSombria('${m.id}')" style="border-color:rgba(212,175,125,.4)">${checkSvg}</div><span class="ritual-text-toji">${m.texto}</span></div>`;
}).join('');
}
function toggleMissaoSombria(id){shelbyData.missoesSombrias[id]=!shelbyData.missoesSombrias[id];saveShelby();renderMissoesSombrias();}
function renderOperacaoOculta(){
const txt=document.getElementById('operacaoOcultaTexto');
const btn=document.getElementById('btnOperacao');
if(txt)txt.value=shelbyData.operacaoOculta.texto||'';
if(btn){
if(shelbyData.operacaoOculta.concluida){btn.classList.add('done');btn.textContent='‚úì OPERA√á√ÉO CONCLU√çDA';}
else{btn.classList.remove('done');btn.textContent='OPERA√á√ÉO CONCLU√çDA';}
}
}
function concluirOperacaoOculta(){
const txt=document.getElementById('operacaoOcultaTexto');
shelbyData.operacaoOculta.texto=txt?txt.value:'';
shelbyData.operacaoOculta.concluida=!shelbyData.operacaoOculta.concluida;
saveShelby();renderOperacaoOculta();verificarSeloShelby();
if(shelbyData.operacaoOculta.concluida)showToast('OPERA√á√ÉO OCULTA CONCLU√çDA','success');
}
function checkShelbyWeekReset(){
const currentWeek=getWeekStart();
if(shelbyData.weekStart&&shelbyData.weekStart!==currentWeek){
[['licitas',FASES_LICITAS,'fasesLicitas'],['ilicitas',FASES_ILICITAS,'fasesIlicitas']].forEach(([tipo,fases,key])=>{
fases.forEach(f=>{
const fd=shelbyData[key][f.id];
if(fd&&fd.metasCheck){
let diasCompletos=0;
for(let i=0;i<7;i++){if(verificarDiaCompletoShelby(tipo,f.id,i,fases))diasCompletos++;}
if(diasCompletos<7){setShelbyFaseProgresso(tipo,f.id,0);showToast('FASE '+f.id+' ('+tipo.toUpperCase()+') RESETADA!','error');}
fd.metasCheck={};
}
});
});
shelbyData.missoesSombrias={};
saveShelby();
}
shelbyData.weekStart=currentWeek;
saveShelby();
}
function verificarSeloShelby(){
const licitasDone=FASES_LICITAS.every(f=>shelbyData.fasesLicitas[f.id]?.prova);
const ilicitasDone=FASES_ILICITAS.every(f=>shelbyData.fasesIlicitas[f.id]?.prova);
const opDone=shelbyData.operacaoOculta.concluida;
const selo=document.getElementById('seloShelby');
if(selo){if(licitasDone&&ilicitasDone&&opDone)selo.classList.add('visivel');else selo.classList.remove('visivel');}
}

init();
</script>
</body>
</html>